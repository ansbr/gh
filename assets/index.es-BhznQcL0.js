const __vite__fileDeps=["./index-D_h92p73.js","./index-sWiaoxFm.js","./index-DoklN7qk.css"],__vite__mapDeps=i=>i.map(i=>__vite__fileDeps[i]);
import{uU as ui,wd as oa,wc as Jr,_ as tb}from"./index-sWiaoxFm.js";const rb={},nb=Object.freeze(Object.defineProperty({__proto__:null,default:rb},Symbol.toStringTag,{value:"Module"})),ib=ui(nb);var Ku={exports:{}},qi=typeof Reflect=="object"?Reflect:null,pf=qi&&typeof qi.apply=="function"?qi.apply:function(e,t,i){return Function.prototype.apply.call(e,t,i)},Yo;qi&&typeof qi.ownKeys=="function"?Yo=qi.ownKeys:Object.getOwnPropertySymbols?Yo=function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Yo=function(e){return Object.getOwnPropertyNames(e)};function sb(n){console&&console.warn&&console.warn(n)}var Zd=Number.isNaN||function(e){return e!==e};function ot(){ot.init.call(this)}Ku.exports=ot;Ku.exports.once=ub;ot.EventEmitter=ot;ot.prototype._events=void 0;ot.prototype._eventsCount=0;ot.prototype._maxListeners=void 0;var gf=10;function aa(n){if(typeof n!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof n)}Object.defineProperty(ot,"defaultMaxListeners",{enumerable:!0,get:function(){return gf},set:function(n){if(typeof n!="number"||n<0||Zd(n))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+n+".");gf=n}});ot.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};ot.prototype.setMaxListeners=function(e){if(typeof e!="number"||e<0||Zd(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this};function ep(n){return n._maxListeners===void 0?ot.defaultMaxListeners:n._maxListeners}ot.prototype.getMaxListeners=function(){return ep(this)};ot.prototype.emit=function(e){for(var t=[],i=1;i<arguments.length;i++)t.push(arguments[i]);var o=e==="error",c=this._events;if(c!==void 0)o=o&&c.error===void 0;else if(!o)return!1;if(o){var u;if(t.length>0&&(u=t[0]),u instanceof Error)throw u;var f=new Error("Unhandled error."+(u?" ("+u.message+")":""));throw f.context=u,f}var g=c[e];if(g===void 0)return!1;if(typeof g=="function")pf(g,this,t);else for(var p=g.length,_=sp(g,p),i=0;i<p;++i)pf(_[i],this,t);return!0};function tp(n,e,t,i){var o,c,u;if(aa(t),c=n._events,c===void 0?(c=n._events=Object.create(null),n._eventsCount=0):(c.newListener!==void 0&&(n.emit("newListener",e,t.listener?t.listener:t),c=n._events),u=c[e]),u===void 0)u=c[e]=t,++n._eventsCount;else if(typeof u=="function"?u=c[e]=i?[t,u]:[u,t]:i?u.unshift(t):u.push(t),o=ep(n),o>0&&u.length>o&&!u.warned){u.warned=!0;var f=new Error("Possible EventEmitter memory leak detected. "+u.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");f.name="MaxListenersExceededWarning",f.emitter=n,f.type=e,f.count=u.length,sb(f)}return n}ot.prototype.addListener=function(e,t){return tp(this,e,t,!1)};ot.prototype.on=ot.prototype.addListener;ot.prototype.prependListener=function(e,t){return tp(this,e,t,!0)};function ob(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function rp(n,e,t){var i={fired:!1,wrapFn:void 0,target:n,type:e,listener:t},o=ob.bind(i);return o.listener=t,i.wrapFn=o,o}ot.prototype.once=function(e,t){return aa(t),this.on(e,rp(this,e,t)),this};ot.prototype.prependOnceListener=function(e,t){return aa(t),this.prependListener(e,rp(this,e,t)),this};ot.prototype.removeListener=function(e,t){var i,o,c,u,f;if(aa(t),o=this._events,o===void 0)return this;if(i=o[e],i===void 0)return this;if(i===t||i.listener===t)--this._eventsCount===0?this._events=Object.create(null):(delete o[e],o.removeListener&&this.emit("removeListener",e,i.listener||t));else if(typeof i!="function"){for(c=-1,u=i.length-1;u>=0;u--)if(i[u]===t||i[u].listener===t){f=i[u].listener,c=u;break}if(c<0)return this;c===0?i.shift():ab(i,c),i.length===1&&(o[e]=i[0]),o.removeListener!==void 0&&this.emit("removeListener",e,f||t)}return this};ot.prototype.off=ot.prototype.removeListener;ot.prototype.removeAllListeners=function(e){var t,i,o;if(i=this._events,i===void 0)return this;if(i.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):i[e]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete i[e]),this;if(arguments.length===0){var c=Object.keys(i),u;for(o=0;o<c.length;++o)u=c[o],u!=="removeListener"&&this.removeAllListeners(u);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(t=i[e],typeof t=="function")this.removeListener(e,t);else if(t!==void 0)for(o=t.length-1;o>=0;o--)this.removeListener(e,t[o]);return this};function np(n,e,t){var i=n._events;if(i===void 0)return[];var o=i[e];return o===void 0?[]:typeof o=="function"?t?[o.listener||o]:[o]:t?cb(o):sp(o,o.length)}ot.prototype.listeners=function(e){return np(this,e,!0)};ot.prototype.rawListeners=function(e){return np(this,e,!1)};ot.listenerCount=function(n,e){return typeof n.listenerCount=="function"?n.listenerCount(e):ip.call(n,e)};ot.prototype.listenerCount=ip;function ip(n){var e=this._events;if(e!==void 0){var t=e[n];if(typeof t=="function")return 1;if(t!==void 0)return t.length}return 0}ot.prototype.eventNames=function(){return this._eventsCount>0?Yo(this._events):[]};function sp(n,e){for(var t=new Array(e),i=0;i<e;++i)t[i]=n[i];return t}function ab(n,e){for(;e+1<n.length;e++)n[e]=n[e+1];n.pop()}function cb(n){for(var e=new Array(n.length),t=0;t<e.length;++t)e[t]=n[t].listener||n[t];return e}function ub(n,e){return new Promise(function(t,i){function o(u){n.removeListener(e,c),i(u)}function c(){typeof n.removeListener=="function"&&n.removeListener("error",o),t([].slice.call(arguments))}op(n,e,c,{once:!0}),e!=="error"&&hb(n,o,{once:!0})})}function hb(n,e,t){typeof n.on=="function"&&op(n,"error",e,t)}function op(n,e,t,i){if(typeof n.on=="function")i.once?n.once(e,t):n.on(e,t);else if(typeof n.addEventListener=="function")n.addEventListener(e,function o(c){i.once&&n.removeEventListener(e,o),t(c)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof n)}var Ar=Ku.exports;const Vu=oa(Ar);var Wu={},ca={},je={},ap={};(function(n){Object.defineProperty(n,"__esModule",{value:!0});function e(f,g){var p=f>>>16&65535,_=f&65535,D=g>>>16&65535,S=g&65535;return _*S+(p*S+_*D<<16>>>0)|0}n.mul=Math.imul||e;function t(f,g){return f+g|0}n.add=t;function i(f,g){return f-g|0}n.sub=i;function o(f,g){return f<<g|f>>>32-g}n.rotl=o;function c(f,g){return f<<32-g|f>>>g}n.rotr=c;function u(f){return typeof f=="number"&&isFinite(f)&&Math.floor(f)===f}n.isInteger=Number.isInteger||u,n.MAX_SAFE_INTEGER=9007199254740991,n.isSafeInteger=function(f){return n.isInteger(f)&&f>=-n.MAX_SAFE_INTEGER&&f<=n.MAX_SAFE_INTEGER}})(ap);Object.defineProperty(je,"__esModule",{value:!0});var cp=ap;function lb(n,e){return e===void 0&&(e=0),(n[e+0]<<8|n[e+1])<<16>>16}je.readInt16BE=lb;function fb(n,e){return e===void 0&&(e=0),(n[e+0]<<8|n[e+1])>>>0}je.readUint16BE=fb;function db(n,e){return e===void 0&&(e=0),(n[e+1]<<8|n[e])<<16>>16}je.readInt16LE=db;function pb(n,e){return e===void 0&&(e=0),(n[e+1]<<8|n[e])>>>0}je.readUint16LE=pb;function up(n,e,t){return e===void 0&&(e=new Uint8Array(2)),t===void 0&&(t=0),e[t+0]=n>>>8,e[t+1]=n>>>0,e}je.writeUint16BE=up;je.writeInt16BE=up;function hp(n,e,t){return e===void 0&&(e=new Uint8Array(2)),t===void 0&&(t=0),e[t+0]=n>>>0,e[t+1]=n>>>8,e}je.writeUint16LE=hp;je.writeInt16LE=hp;function pu(n,e){return e===void 0&&(e=0),n[e]<<24|n[e+1]<<16|n[e+2]<<8|n[e+3]}je.readInt32BE=pu;function gu(n,e){return e===void 0&&(e=0),(n[e]<<24|n[e+1]<<16|n[e+2]<<8|n[e+3])>>>0}je.readUint32BE=gu;function yu(n,e){return e===void 0&&(e=0),n[e+3]<<24|n[e+2]<<16|n[e+1]<<8|n[e]}je.readInt32LE=yu;function _u(n,e){return e===void 0&&(e=0),(n[e+3]<<24|n[e+2]<<16|n[e+1]<<8|n[e])>>>0}je.readUint32LE=_u;function Zo(n,e,t){return e===void 0&&(e=new Uint8Array(4)),t===void 0&&(t=0),e[t+0]=n>>>24,e[t+1]=n>>>16,e[t+2]=n>>>8,e[t+3]=n>>>0,e}je.writeUint32BE=Zo;je.writeInt32BE=Zo;function ea(n,e,t){return e===void 0&&(e=new Uint8Array(4)),t===void 0&&(t=0),e[t+0]=n>>>0,e[t+1]=n>>>8,e[t+2]=n>>>16,e[t+3]=n>>>24,e}je.writeUint32LE=ea;je.writeInt32LE=ea;function gb(n,e){e===void 0&&(e=0);var t=pu(n,e),i=pu(n,e+4);return t*4294967296+i-(i>>31)*4294967296}je.readInt64BE=gb;function yb(n,e){e===void 0&&(e=0);var t=gu(n,e),i=gu(n,e+4);return t*4294967296+i}je.readUint64BE=yb;function _b(n,e){e===void 0&&(e=0);var t=yu(n,e),i=yu(n,e+4);return i*4294967296+t-(t>>31)*4294967296}je.readInt64LE=_b;function vb(n,e){e===void 0&&(e=0);var t=_u(n,e),i=_u(n,e+4);return i*4294967296+t}je.readUint64LE=vb;function lp(n,e,t){return e===void 0&&(e=new Uint8Array(8)),t===void 0&&(t=0),Zo(n/4294967296>>>0,e,t),Zo(n>>>0,e,t+4),e}je.writeUint64BE=lp;je.writeInt64BE=lp;function fp(n,e,t){return e===void 0&&(e=new Uint8Array(8)),t===void 0&&(t=0),ea(n>>>0,e,t),ea(n/4294967296>>>0,e,t+4),e}je.writeUint64LE=fp;je.writeInt64LE=fp;function mb(n,e,t){if(t===void 0&&(t=0),n%8!==0)throw new Error("readUintBE supports only bitLengths divisible by 8");if(n/8>e.length-t)throw new Error("readUintBE: array is too short for the given bitLength");for(var i=0,o=1,c=n/8+t-1;c>=t;c--)i+=e[c]*o,o*=256;return i}je.readUintBE=mb;function bb(n,e,t){if(t===void 0&&(t=0),n%8!==0)throw new Error("readUintLE supports only bitLengths divisible by 8");if(n/8>e.length-t)throw new Error("readUintLE: array is too short for the given bitLength");for(var i=0,o=1,c=t;c<t+n/8;c++)i+=e[c]*o,o*=256;return i}je.readUintLE=bb;function wb(n,e,t,i){if(t===void 0&&(t=new Uint8Array(n/8)),i===void 0&&(i=0),n%8!==0)throw new Error("writeUintBE supports only bitLengths divisible by 8");if(!cp.isSafeInteger(e))throw new Error("writeUintBE value must be an integer");for(var o=1,c=n/8+i-1;c>=i;c--)t[c]=e/o&255,o*=256;return t}je.writeUintBE=wb;function Eb(n,e,t,i){if(t===void 0&&(t=new Uint8Array(n/8)),i===void 0&&(i=0),n%8!==0)throw new Error("writeUintLE supports only bitLengths divisible by 8");if(!cp.isSafeInteger(e))throw new Error("writeUintLE value must be an integer");for(var o=1,c=i;c<i+n/8;c++)t[c]=e/o&255,o*=256;return t}je.writeUintLE=Eb;function Db(n,e){e===void 0&&(e=0);var t=new DataView(n.buffer,n.byteOffset,n.byteLength);return t.getFloat32(e)}je.readFloat32BE=Db;function Sb(n,e){e===void 0&&(e=0);var t=new DataView(n.buffer,n.byteOffset,n.byteLength);return t.getFloat32(e,!0)}je.readFloat32LE=Sb;function Ib(n,e){e===void 0&&(e=0);var t=new DataView(n.buffer,n.byteOffset,n.byteLength);return t.getFloat64(e)}je.readFloat64BE=Ib;function xb(n,e){e===void 0&&(e=0);var t=new DataView(n.buffer,n.byteOffset,n.byteLength);return t.getFloat64(e,!0)}je.readFloat64LE=xb;function Ob(n,e,t){e===void 0&&(e=new Uint8Array(4)),t===void 0&&(t=0);var i=new DataView(e.buffer,e.byteOffset,e.byteLength);return i.setFloat32(t,n),e}je.writeFloat32BE=Ob;function Pb(n,e,t){e===void 0&&(e=new Uint8Array(4)),t===void 0&&(t=0);var i=new DataView(e.buffer,e.byteOffset,e.byteLength);return i.setFloat32(t,n,!0),e}je.writeFloat32LE=Pb;function Cb(n,e,t){e===void 0&&(e=new Uint8Array(8)),t===void 0&&(t=0);var i=new DataView(e.buffer,e.byteOffset,e.byteLength);return i.setFloat64(t,n),e}je.writeFloat64BE=Cb;function Ab(n,e,t){e===void 0&&(e=new Uint8Array(8)),t===void 0&&(t=0);var i=new DataView(e.buffer,e.byteOffset,e.byteLength);return i.setFloat64(t,n,!0),e}je.writeFloat64LE=Ab;var Tr={};Object.defineProperty(Tr,"__esModule",{value:!0});function Tb(n){for(var e=0;e<n.length;e++)n[e]=0;return n}Tr.wipe=Tb;Object.defineProperty(ca,"__esModule",{value:!0});var er=je,vu=Tr,Rb=20;function Nb(n,e,t){for(var i=1634760805,o=857760878,c=2036477234,u=1797285236,f=t[3]<<24|t[2]<<16|t[1]<<8|t[0],g=t[7]<<24|t[6]<<16|t[5]<<8|t[4],p=t[11]<<24|t[10]<<16|t[9]<<8|t[8],_=t[15]<<24|t[14]<<16|t[13]<<8|t[12],D=t[19]<<24|t[18]<<16|t[17]<<8|t[16],S=t[23]<<24|t[22]<<16|t[21]<<8|t[20],x=t[27]<<24|t[26]<<16|t[25]<<8|t[24],O=t[31]<<24|t[30]<<16|t[29]<<8|t[28],F=e[3]<<24|e[2]<<16|e[1]<<8|e[0],H=e[7]<<24|e[6]<<16|e[5]<<8|e[4],ne=e[11]<<24|e[10]<<16|e[9]<<8|e[8],L=e[15]<<24|e[14]<<16|e[13]<<8|e[12],M=i,C=o,T=c,E=u,h=f,b=g,W=p,G=_,se=D,ue=S,de=x,w=O,A=F,ee=H,Q=ne,K=L,V=0;V<Rb;V+=2)M=M+h|0,A^=M,A=A>>>16|A<<16,se=se+A|0,h^=se,h=h>>>20|h<<12,C=C+b|0,ee^=C,ee=ee>>>16|ee<<16,ue=ue+ee|0,b^=ue,b=b>>>20|b<<12,T=T+W|0,Q^=T,Q=Q>>>16|Q<<16,de=de+Q|0,W^=de,W=W>>>20|W<<12,E=E+G|0,K^=E,K=K>>>16|K<<16,w=w+K|0,G^=w,G=G>>>20|G<<12,T=T+W|0,Q^=T,Q=Q>>>24|Q<<8,de=de+Q|0,W^=de,W=W>>>25|W<<7,E=E+G|0,K^=E,K=K>>>24|K<<8,w=w+K|0,G^=w,G=G>>>25|G<<7,C=C+b|0,ee^=C,ee=ee>>>24|ee<<8,ue=ue+ee|0,b^=ue,b=b>>>25|b<<7,M=M+h|0,A^=M,A=A>>>24|A<<8,se=se+A|0,h^=se,h=h>>>25|h<<7,M=M+b|0,K^=M,K=K>>>16|K<<16,de=de+K|0,b^=de,b=b>>>20|b<<12,C=C+W|0,A^=C,A=A>>>16|A<<16,w=w+A|0,W^=w,W=W>>>20|W<<12,T=T+G|0,ee^=T,ee=ee>>>16|ee<<16,se=se+ee|0,G^=se,G=G>>>20|G<<12,E=E+h|0,Q^=E,Q=Q>>>16|Q<<16,ue=ue+Q|0,h^=ue,h=h>>>20|h<<12,T=T+G|0,ee^=T,ee=ee>>>24|ee<<8,se=se+ee|0,G^=se,G=G>>>25|G<<7,E=E+h|0,Q^=E,Q=Q>>>24|Q<<8,ue=ue+Q|0,h^=ue,h=h>>>25|h<<7,C=C+W|0,A^=C,A=A>>>24|A<<8,w=w+A|0,W^=w,W=W>>>25|W<<7,M=M+b|0,K^=M,K=K>>>24|K<<8,de=de+K|0,b^=de,b=b>>>25|b<<7;er.writeUint32LE(M+i|0,n,0),er.writeUint32LE(C+o|0,n,4),er.writeUint32LE(T+c|0,n,8),er.writeUint32LE(E+u|0,n,12),er.writeUint32LE(h+f|0,n,16),er.writeUint32LE(b+g|0,n,20),er.writeUint32LE(W+p|0,n,24),er.writeUint32LE(G+_|0,n,28),er.writeUint32LE(se+D|0,n,32),er.writeUint32LE(ue+S|0,n,36),er.writeUint32LE(de+x|0,n,40),er.writeUint32LE(w+O|0,n,44),er.writeUint32LE(A+F|0,n,48),er.writeUint32LE(ee+H|0,n,52),er.writeUint32LE(Q+ne|0,n,56),er.writeUint32LE(K+L|0,n,60)}function dp(n,e,t,i,o){if(o===void 0&&(o=0),n.length!==32)throw new Error("ChaCha: key size must be 32 bytes");if(i.length<t.length)throw new Error("ChaCha: destination is shorter than source");var c,u;if(o===0){if(e.length!==8&&e.length!==12)throw new Error("ChaCha nonce must be 8 or 12 bytes");c=new Uint8Array(16),u=c.length-e.length,c.set(e,u)}else{if(e.length!==16)throw new Error("ChaCha nonce with counter must be 16 bytes");c=e,u=o}for(var f=new Uint8Array(64),g=0;g<t.length;g+=64){Nb(f,c,n);for(var p=g;p<g+64&&p<t.length;p++)i[p]=t[p]^f[p-g];$b(c,0,u)}return vu.wipe(f),o===0&&vu.wipe(c),i}ca.streamXOR=dp;function Lb(n,e,t,i){return i===void 0&&(i=0),vu.wipe(t),dp(n,e,t,t,i)}ca.stream=Lb;function $b(n,e,t){for(var i=1;t--;)i=i+(n[e]&255)|0,n[e]=i&255,i>>>=8,e++;if(i>0)throw new Error("ChaCha: counter overflow")}var pp={},zn={};Object.defineProperty(zn,"__esModule",{value:!0});function jb(n,e,t){return~(n-1)&e|n-1&t}zn.select=jb;function Ub(n,e){return(n|0)-(e|0)-1>>>31&1}zn.lessOrEqual=Ub;function gp(n,e){if(n.length!==e.length)return 0;for(var t=0,i=0;i<n.length;i++)t|=n[i]^e[i];return 1&t-1>>>8}zn.compare=gp;function Mb(n,e){return n.length===0||e.length===0?!1:gp(n,e)!==0}zn.equal=Mb;(function(n){Object.defineProperty(n,"__esModule",{value:!0});var e=zn,t=Tr;n.DIGEST_LENGTH=16;var i=function(){function u(f){this.digestLength=n.DIGEST_LENGTH,this._buffer=new Uint8Array(16),this._r=new Uint16Array(10),this._h=new Uint16Array(10),this._pad=new Uint16Array(8),this._leftover=0,this._fin=0,this._finished=!1;var g=f[0]|f[1]<<8;this._r[0]=g&8191;var p=f[2]|f[3]<<8;this._r[1]=(g>>>13|p<<3)&8191;var _=f[4]|f[5]<<8;this._r[2]=(p>>>10|_<<6)&7939;var D=f[6]|f[7]<<8;this._r[3]=(_>>>7|D<<9)&8191;var S=f[8]|f[9]<<8;this._r[4]=(D>>>4|S<<12)&255,this._r[5]=S>>>1&8190;var x=f[10]|f[11]<<8;this._r[6]=(S>>>14|x<<2)&8191;var O=f[12]|f[13]<<8;this._r[7]=(x>>>11|O<<5)&8065;var F=f[14]|f[15]<<8;this._r[8]=(O>>>8|F<<8)&8191,this._r[9]=F>>>5&127,this._pad[0]=f[16]|f[17]<<8,this._pad[1]=f[18]|f[19]<<8,this._pad[2]=f[20]|f[21]<<8,this._pad[3]=f[22]|f[23]<<8,this._pad[4]=f[24]|f[25]<<8,this._pad[5]=f[26]|f[27]<<8,this._pad[6]=f[28]|f[29]<<8,this._pad[7]=f[30]|f[31]<<8}return u.prototype._blocks=function(f,g,p){for(var _=this._fin?0:2048,D=this._h[0],S=this._h[1],x=this._h[2],O=this._h[3],F=this._h[4],H=this._h[5],ne=this._h[6],L=this._h[7],M=this._h[8],C=this._h[9],T=this._r[0],E=this._r[1],h=this._r[2],b=this._r[3],W=this._r[4],G=this._r[5],se=this._r[6],ue=this._r[7],de=this._r[8],w=this._r[9];p>=16;){var A=f[g+0]|f[g+1]<<8;D+=A&8191;var ee=f[g+2]|f[g+3]<<8;S+=(A>>>13|ee<<3)&8191;var Q=f[g+4]|f[g+5]<<8;x+=(ee>>>10|Q<<6)&8191;var K=f[g+6]|f[g+7]<<8;O+=(Q>>>7|K<<9)&8191;var V=f[g+8]|f[g+9]<<8;F+=(K>>>4|V<<12)&8191,H+=V>>>1&8191;var J=f[g+10]|f[g+11]<<8;ne+=(V>>>14|J<<2)&8191;var re=f[g+12]|f[g+13]<<8;L+=(J>>>11|re<<5)&8191;var be=f[g+14]|f[g+15]<<8;M+=(re>>>8|be<<8)&8191,C+=be>>>5|_;var oe=0,we=oe;we+=D*T,we+=S*(5*w),we+=x*(5*de),we+=O*(5*ue),we+=F*(5*se),oe=we>>>13,we&=8191,we+=H*(5*G),we+=ne*(5*W),we+=L*(5*b),we+=M*(5*h),we+=C*(5*E),oe+=we>>>13,we&=8191;var le=oe;le+=D*E,le+=S*T,le+=x*(5*w),le+=O*(5*de),le+=F*(5*ue),oe=le>>>13,le&=8191,le+=H*(5*se),le+=ne*(5*G),le+=L*(5*W),le+=M*(5*b),le+=C*(5*h),oe+=le>>>13,le&=8191;var ve=oe;ve+=D*h,ve+=S*E,ve+=x*T,ve+=O*(5*w),ve+=F*(5*de),oe=ve>>>13,ve&=8191,ve+=H*(5*ue),ve+=ne*(5*se),ve+=L*(5*G),ve+=M*(5*W),ve+=C*(5*b),oe+=ve>>>13,ve&=8191;var B=oe;B+=D*b,B+=S*h,B+=x*E,B+=O*T,B+=F*(5*w),oe=B>>>13,B&=8191,B+=H*(5*de),B+=ne*(5*ue),B+=L*(5*se),B+=M*(5*G),B+=C*(5*W),oe+=B>>>13,B&=8191;var z=oe;z+=D*W,z+=S*b,z+=x*h,z+=O*E,z+=F*T,oe=z>>>13,z&=8191,z+=H*(5*w),z+=ne*(5*de),z+=L*(5*ue),z+=M*(5*se),z+=C*(5*G),oe+=z>>>13,z&=8191;var $=oe;$+=D*G,$+=S*W,$+=x*b,$+=O*h,$+=F*E,oe=$>>>13,$&=8191,$+=H*T,$+=ne*(5*w),$+=L*(5*de),$+=M*(5*ue),$+=C*(5*se),oe+=$>>>13,$&=8191;var d=oe;d+=D*se,d+=S*G,d+=x*W,d+=O*b,d+=F*h,oe=d>>>13,d&=8191,d+=H*E,d+=ne*T,d+=L*(5*w),d+=M*(5*de),d+=C*(5*ue),oe+=d>>>13,d&=8191;var R=oe;R+=D*ue,R+=S*se,R+=x*G,R+=O*W,R+=F*b,oe=R>>>13,R&=8191,R+=H*h,R+=ne*E,R+=L*T,R+=M*(5*w),R+=C*(5*de),oe+=R>>>13,R&=8191;var ae=oe;ae+=D*de,ae+=S*ue,ae+=x*se,ae+=O*G,ae+=F*W,oe=ae>>>13,ae&=8191,ae+=H*b,ae+=ne*h,ae+=L*E,ae+=M*T,ae+=C*(5*w),oe+=ae>>>13,ae&=8191;var fe=oe;fe+=D*w,fe+=S*de,fe+=x*ue,fe+=O*se,fe+=F*G,oe=fe>>>13,fe&=8191,fe+=H*W,fe+=ne*b,fe+=L*h,fe+=M*E,fe+=C*T,oe+=fe>>>13,fe&=8191,oe=(oe<<2)+oe|0,oe=oe+we|0,we=oe&8191,oe=oe>>>13,le+=oe,D=we,S=le,x=ve,O=B,F=z,H=$,ne=d,L=R,M=ae,C=fe,g+=16,p-=16}this._h[0]=D,this._h[1]=S,this._h[2]=x,this._h[3]=O,this._h[4]=F,this._h[5]=H,this._h[6]=ne,this._h[7]=L,this._h[8]=M,this._h[9]=C},u.prototype.finish=function(f,g){g===void 0&&(g=0);var p=new Uint16Array(10),_,D,S,x;if(this._leftover){for(x=this._leftover,this._buffer[x++]=1;x<16;x++)this._buffer[x]=0;this._fin=1,this._blocks(this._buffer,0,16)}for(_=this._h[1]>>>13,this._h[1]&=8191,x=2;x<10;x++)this._h[x]+=_,_=this._h[x]>>>13,this._h[x]&=8191;for(this._h[0]+=_*5,_=this._h[0]>>>13,this._h[0]&=8191,this._h[1]+=_,_=this._h[1]>>>13,this._h[1]&=8191,this._h[2]+=_,p[0]=this._h[0]+5,_=p[0]>>>13,p[0]&=8191,x=1;x<10;x++)p[x]=this._h[x]+_,_=p[x]>>>13,p[x]&=8191;for(p[9]-=8192,D=(_^1)-1,x=0;x<10;x++)p[x]&=D;for(D=~D,x=0;x<10;x++)this._h[x]=this._h[x]&D|p[x];for(this._h[0]=(this._h[0]|this._h[1]<<13)&65535,this._h[1]=(this._h[1]>>>3|this._h[2]<<10)&65535,this._h[2]=(this._h[2]>>>6|this._h[3]<<7)&65535,this._h[3]=(this._h[3]>>>9|this._h[4]<<4)&65535,this._h[4]=(this._h[4]>>>12|this._h[5]<<1|this._h[6]<<14)&65535,this._h[5]=(this._h[6]>>>2|this._h[7]<<11)&65535,this._h[6]=(this._h[7]>>>5|this._h[8]<<8)&65535,this._h[7]=(this._h[8]>>>8|this._h[9]<<5)&65535,S=this._h[0]+this._pad[0],this._h[0]=S&65535,x=1;x<8;x++)S=(this._h[x]+this._pad[x]|0)+(S>>>16)|0,this._h[x]=S&65535;return f[g+0]=this._h[0]>>>0,f[g+1]=this._h[0]>>>8,f[g+2]=this._h[1]>>>0,f[g+3]=this._h[1]>>>8,f[g+4]=this._h[2]>>>0,f[g+5]=this._h[2]>>>8,f[g+6]=this._h[3]>>>0,f[g+7]=this._h[3]>>>8,f[g+8]=this._h[4]>>>0,f[g+9]=this._h[4]>>>8,f[g+10]=this._h[5]>>>0,f[g+11]=this._h[5]>>>8,f[g+12]=this._h[6]>>>0,f[g+13]=this._h[6]>>>8,f[g+14]=this._h[7]>>>0,f[g+15]=this._h[7]>>>8,this._finished=!0,this},u.prototype.update=function(f){var g=0,p=f.length,_;if(this._leftover){_=16-this._leftover,_>p&&(_=p);for(var D=0;D<_;D++)this._buffer[this._leftover+D]=f[g+D];if(p-=_,g+=_,this._leftover+=_,this._leftover<16)return this;this._blocks(this._buffer,0,16),this._leftover=0}if(p>=16&&(_=p-p%16,this._blocks(f,g,_),g+=_,p-=_),p){for(var D=0;D<p;D++)this._buffer[this._leftover+D]=f[g+D];this._leftover+=p}return this},u.prototype.digest=function(){if(this._finished)throw new Error("Poly1305 was finished");var f=new Uint8Array(16);return this.finish(f),f},u.prototype.clean=function(){return t.wipe(this._buffer),t.wipe(this._r),t.wipe(this._h),t.wipe(this._pad),this._leftover=0,this._fin=0,this._finished=!0,this},u}();n.Poly1305=i;function o(u,f){var g=new i(u);g.update(f);var p=g.digest();return g.clean(),p}n.oneTimeAuth=o;function c(u,f){return u.length!==n.DIGEST_LENGTH||f.length!==n.DIGEST_LENGTH?!1:e.equal(u,f)}n.equal=c})(pp);(function(n){Object.defineProperty(n,"__esModule",{value:!0});var e=ca,t=pp,i=Tr,o=je,c=zn;n.KEY_LENGTH=32,n.NONCE_LENGTH=12,n.TAG_LENGTH=16;var u=new Uint8Array(16),f=function(){function g(p){if(this.nonceLength=n.NONCE_LENGTH,this.tagLength=n.TAG_LENGTH,p.length!==n.KEY_LENGTH)throw new Error("ChaCha20Poly1305 needs 32-byte key");this._key=new Uint8Array(p)}return g.prototype.seal=function(p,_,D,S){if(p.length>16)throw new Error("ChaCha20Poly1305: incorrect nonce length");var x=new Uint8Array(16);x.set(p,x.length-p.length);var O=new Uint8Array(32);e.stream(this._key,x,O,4);var F=_.length+this.tagLength,H;if(S){if(S.length!==F)throw new Error("ChaCha20Poly1305: incorrect destination length");H=S}else H=new Uint8Array(F);return e.streamXOR(this._key,x,_,H,4),this._authenticate(H.subarray(H.length-this.tagLength,H.length),O,H.subarray(0,H.length-this.tagLength),D),i.wipe(x),H},g.prototype.open=function(p,_,D,S){if(p.length>16)throw new Error("ChaCha20Poly1305: incorrect nonce length");if(_.length<this.tagLength)return null;var x=new Uint8Array(16);x.set(p,x.length-p.length);var O=new Uint8Array(32);e.stream(this._key,x,O,4);var F=new Uint8Array(this.tagLength);if(this._authenticate(F,O,_.subarray(0,_.length-this.tagLength),D),!c.equal(F,_.subarray(_.length-this.tagLength,_.length)))return null;var H=_.length-this.tagLength,ne;if(S){if(S.length!==H)throw new Error("ChaCha20Poly1305: incorrect destination length");ne=S}else ne=new Uint8Array(H);return e.streamXOR(this._key,x,_.subarray(0,_.length-this.tagLength),ne,4),i.wipe(x),ne},g.prototype.clean=function(){return i.wipe(this._key),this},g.prototype._authenticate=function(p,_,D,S){var x=new t.Poly1305(_);S&&(x.update(S),S.length%16>0&&x.update(u.subarray(S.length%16))),x.update(D),D.length%16>0&&x.update(u.subarray(D.length%16));var O=new Uint8Array(8);S&&o.writeUint64LE(S.length,O),x.update(O),o.writeUint64LE(D.length,O),x.update(O);for(var F=x.digest(),H=0;H<F.length;H++)p[H]=F[H];x.clean(),i.wipe(F),i.wipe(O)},g}();n.ChaCha20Poly1305=f})(Wu);var yp={},Ts={},Gu={};Object.defineProperty(Gu,"__esModule",{value:!0});function qb(n){return typeof n.saveState<"u"&&typeof n.restoreState<"u"&&typeof n.cleanSavedState<"u"}Gu.isSerializableHash=qb;Object.defineProperty(Ts,"__esModule",{value:!0});var nn=Gu,Fb=zn,zb=Tr,_p=function(){function n(e,t){this._finished=!1,this._inner=new e,this._outer=new e,this.blockSize=this._outer.blockSize,this.digestLength=this._outer.digestLength;var i=new Uint8Array(this.blockSize);t.length>this.blockSize?this._inner.update(t).finish(i).clean():i.set(t);for(var o=0;o<i.length;o++)i[o]^=54;this._inner.update(i);for(var o=0;o<i.length;o++)i[o]^=106;this._outer.update(i),nn.isSerializableHash(this._inner)&&nn.isSerializableHash(this._outer)&&(this._innerKeyedState=this._inner.saveState(),this._outerKeyedState=this._outer.saveState()),zb.wipe(i)}return n.prototype.reset=function(){if(!nn.isSerializableHash(this._inner)||!nn.isSerializableHash(this._outer))throw new Error("hmac: can't reset() because hash doesn't implement restoreState()");return this._inner.restoreState(this._innerKeyedState),this._outer.restoreState(this._outerKeyedState),this._finished=!1,this},n.prototype.clean=function(){nn.isSerializableHash(this._inner)&&this._inner.cleanSavedState(this._innerKeyedState),nn.isSerializableHash(this._outer)&&this._outer.cleanSavedState(this._outerKeyedState),this._inner.clean(),this._outer.clean()},n.prototype.update=function(e){return this._inner.update(e),this},n.prototype.finish=function(e){return this._finished?(this._outer.finish(e),this):(this._inner.finish(e),this._outer.update(e.subarray(0,this.digestLength)).finish(e),this._finished=!0,this)},n.prototype.digest=function(){var e=new Uint8Array(this.digestLength);return this.finish(e),e},n.prototype.saveState=function(){if(!nn.isSerializableHash(this._inner))throw new Error("hmac: can't saveState() because hash doesn't implement it");return this._inner.saveState()},n.prototype.restoreState=function(e){if(!nn.isSerializableHash(this._inner)||!nn.isSerializableHash(this._outer))throw new Error("hmac: can't restoreState() because hash doesn't implement it");return this._inner.restoreState(e),this._outer.restoreState(this._outerKeyedState),this._finished=!1,this},n.prototype.cleanSavedState=function(e){if(!nn.isSerializableHash(this._inner))throw new Error("hmac: can't cleanSavedState() because hash doesn't implement it");this._inner.cleanSavedState(e)},n}();Ts.HMAC=_p;function Bb(n,e,t){var i=new _p(n,e);i.update(t);var o=i.digest();return i.clean(),o}Ts.hmac=Bb;Ts.equal=Fb.equal;Object.defineProperty(yp,"__esModule",{value:!0});var yf=Ts,_f=Tr,Hb=function(){function n(e,t,i,o){i===void 0&&(i=new Uint8Array(0)),this._counter=new Uint8Array(1),this._hash=e,this._info=o;var c=yf.hmac(this._hash,i,t);this._hmac=new yf.HMAC(e,c),this._buffer=new Uint8Array(this._hmac.digestLength),this._bufpos=this._buffer.length}return n.prototype._fillBuffer=function(){this._counter[0]++;var e=this._counter[0];if(e===0)throw new Error("hkdf: cannot expand more");this._hmac.reset(),e>1&&this._hmac.update(this._buffer),this._info&&this._hmac.update(this._info),this._hmac.update(this._counter),this._hmac.finish(this._buffer),this._bufpos=0},n.prototype.expand=function(e){for(var t=new Uint8Array(e),i=0;i<t.length;i++)this._bufpos===this._buffer.length&&this._fillBuffer(),t[i]=this._buffer[this._bufpos++];return t},n.prototype.clean=function(){this._hmac.clean(),_f.wipe(this._buffer),_f.wipe(this._counter),this._bufpos=0},n}(),kb=yp.HKDF=Hb,Bi={},ua={},ha={};Object.defineProperty(ha,"__esModule",{value:!0});ha.BrowserRandomSource=void 0;const vf=65536;class Kb{constructor(){this.isAvailable=!1,this.isInstantiated=!1;const e=typeof self<"u"?self.crypto||self.msCrypto:null;e&&e.getRandomValues!==void 0&&(this._crypto=e,this.isAvailable=!0,this.isInstantiated=!0)}randomBytes(e){if(!this.isAvailable||!this._crypto)throw new Error("Browser random byte generator is not available.");const t=new Uint8Array(e);for(let i=0;i<t.length;i+=vf)this._crypto.getRandomValues(t.subarray(i,i+Math.min(t.length-i,vf)));return t}}ha.BrowserRandomSource=Kb;function Vb(n){throw new Error('Could not dynamically require "'+n+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var la={};Object.defineProperty(la,"__esModule",{value:!0});la.NodeRandomSource=void 0;const Wb=Tr;class Gb{constructor(){if(this.isAvailable=!1,this.isInstantiated=!1,typeof Vb<"u"){const e=ib;e&&e.randomBytes&&(this._crypto=e,this.isAvailable=!0,this.isInstantiated=!0)}}randomBytes(e){if(!this.isAvailable||!this._crypto)throw new Error("Node.js random byte generator is not available.");let t=this._crypto.randomBytes(e);if(t.length!==e)throw new Error("NodeRandomSource: got fewer bytes than requested");const i=new Uint8Array(e);for(let o=0;o<i.length;o++)i[o]=t[o];return(0,Wb.wipe)(t),i}}la.NodeRandomSource=Gb;Object.defineProperty(ua,"__esModule",{value:!0});ua.SystemRandomSource=void 0;const Yb=ha,Jb=la;class Qb{constructor(){if(this.isAvailable=!1,this.name="",this._source=new Yb.BrowserRandomSource,this._source.isAvailable){this.isAvailable=!0,this.name="Browser";return}if(this._source=new Jb.NodeRandomSource,this._source.isAvailable){this.isAvailable=!0,this.name="Node";return}}randomBytes(e){if(!this.isAvailable)throw new Error("System random byte generator is not available.");return this._source.randomBytes(e)}}ua.SystemRandomSource=Qb;(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.randomStringForEntropy=n.randomString=n.randomUint32=n.randomBytes=n.defaultRandomSource=void 0;const e=ua,t=je,i=Tr;n.defaultRandomSource=new e.SystemRandomSource;function o(p,_=n.defaultRandomSource){return _.randomBytes(p)}n.randomBytes=o;function c(p=n.defaultRandomSource){const _=o(4,p),D=(0,t.readUint32LE)(_);return(0,i.wipe)(_),D}n.randomUint32=c;const u="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";function f(p,_=u,D=n.defaultRandomSource){if(_.length<2)throw new Error("randomString charset is too short");if(_.length>256)throw new Error("randomString charset is too long");let S="";const x=_.length,O=256-256%x;for(;p>0;){const F=o(Math.ceil(p*256/O),D);for(let H=0;H<F.length&&p>0;H++){const ne=F[H];ne<O&&(S+=_.charAt(ne%x),p--)}(0,i.wipe)(F)}return S}n.randomString=f;function g(p,_=u,D=n.defaultRandomSource){const S=Math.ceil(p/(Math.log(_.length)/Math.LN2));return f(S,_,D)}n.randomStringForEntropy=g})(Bi);var fa={};(function(n){Object.defineProperty(n,"__esModule",{value:!0});var e=je,t=Tr;n.DIGEST_LENGTH=32,n.BLOCK_SIZE=64;var i=function(){function f(){this.digestLength=n.DIGEST_LENGTH,this.blockSize=n.BLOCK_SIZE,this._state=new Int32Array(8),this._temp=new Int32Array(64),this._buffer=new Uint8Array(128),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this.reset()}return f.prototype._initState=function(){this._state[0]=1779033703,this._state[1]=3144134277,this._state[2]=1013904242,this._state[3]=2773480762,this._state[4]=1359893119,this._state[5]=2600822924,this._state[6]=528734635,this._state[7]=1541459225},f.prototype.reset=function(){return this._initState(),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this},f.prototype.clean=function(){t.wipe(this._buffer),t.wipe(this._temp),this.reset()},f.prototype.update=function(g,p){if(p===void 0&&(p=g.length),this._finished)throw new Error("SHA256: can't update because hash was finished.");var _=0;if(this._bytesHashed+=p,this._bufferLength>0){for(;this._bufferLength<this.blockSize&&p>0;)this._buffer[this._bufferLength++]=g[_++],p--;this._bufferLength===this.blockSize&&(c(this._temp,this._state,this._buffer,0,this.blockSize),this._bufferLength=0)}for(p>=this.blockSize&&(_=c(this._temp,this._state,g,_,p),p%=this.blockSize);p>0;)this._buffer[this._bufferLength++]=g[_++],p--;return this},f.prototype.finish=function(g){if(!this._finished){var p=this._bytesHashed,_=this._bufferLength,D=p/536870912|0,S=p<<3,x=p%64<56?64:128;this._buffer[_]=128;for(var O=_+1;O<x-8;O++)this._buffer[O]=0;e.writeUint32BE(D,this._buffer,x-8),e.writeUint32BE(S,this._buffer,x-4),c(this._temp,this._state,this._buffer,0,x),this._finished=!0}for(var O=0;O<this.digestLength/4;O++)e.writeUint32BE(this._state[O],g,O*4);return this},f.prototype.digest=function(){var g=new Uint8Array(this.digestLength);return this.finish(g),g},f.prototype.saveState=function(){if(this._finished)throw new Error("SHA256: cannot save finished state");return{state:new Int32Array(this._state),buffer:this._bufferLength>0?new Uint8Array(this._buffer):void 0,bufferLength:this._bufferLength,bytesHashed:this._bytesHashed}},f.prototype.restoreState=function(g){return this._state.set(g.state),this._bufferLength=g.bufferLength,g.buffer&&this._buffer.set(g.buffer),this._bytesHashed=g.bytesHashed,this._finished=!1,this},f.prototype.cleanSavedState=function(g){t.wipe(g.state),g.buffer&&t.wipe(g.buffer),g.bufferLength=0,g.bytesHashed=0},f}();n.SHA256=i;var o=new Int32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]);function c(f,g,p,_,D){for(;D>=64;){for(var S=g[0],x=g[1],O=g[2],F=g[3],H=g[4],ne=g[5],L=g[6],M=g[7],C=0;C<16;C++){var T=_+C*4;f[C]=e.readUint32BE(p,T)}for(var C=16;C<64;C++){var E=f[C-2],h=(E>>>17|E<<15)^(E>>>19|E<<13)^E>>>10;E=f[C-15];var b=(E>>>7|E<<25)^(E>>>18|E<<14)^E>>>3;f[C]=(h+f[C-7]|0)+(b+f[C-16]|0)}for(var C=0;C<64;C++){var h=(((H>>>6|H<<26)^(H>>>11|H<<21)^(H>>>25|H<<7))+(H&ne^~H&L)|0)+(M+(o[C]+f[C]|0)|0)|0,b=((S>>>2|S<<30)^(S>>>13|S<<19)^(S>>>22|S<<10))+(S&x^S&O^x&O)|0;M=L,L=ne,ne=H,H=F+h|0,F=O,O=x,x=S,S=h+b|0}g[0]+=S,g[1]+=x,g[2]+=O,g[3]+=F,g[4]+=H,g[5]+=ne,g[6]+=L,g[7]+=M,_+=64,D-=64}return _}function u(f){var g=new i;g.update(f);var p=g.digest();return g.clean(),p}n.hash=u})(fa);var Yu={};(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.sharedKey=n.generateKeyPair=n.generateKeyPairFromSeed=n.scalarMultBase=n.scalarMult=n.SHARED_KEY_LENGTH=n.SECRET_KEY_LENGTH=n.PUBLIC_KEY_LENGTH=void 0;const e=Bi,t=Tr;n.PUBLIC_KEY_LENGTH=32,n.SECRET_KEY_LENGTH=32,n.SHARED_KEY_LENGTH=32;function i(C){const T=new Float64Array(16);if(C)for(let E=0;E<C.length;E++)T[E]=C[E];return T}const o=new Uint8Array(32);o[0]=9;const c=i([56129,1]);function u(C){let T=1;for(let E=0;E<16;E++){let h=C[E]+T+65535;T=Math.floor(h/65536),C[E]=h-T*65536}C[0]+=T-1+37*(T-1)}function f(C,T,E){const h=~(E-1);for(let b=0;b<16;b++){const W=h&(C[b]^T[b]);C[b]^=W,T[b]^=W}}function g(C,T){const E=i(),h=i();for(let b=0;b<16;b++)h[b]=T[b];u(h),u(h),u(h);for(let b=0;b<2;b++){E[0]=h[0]-65517;for(let G=1;G<15;G++)E[G]=h[G]-65535-(E[G-1]>>16&1),E[G-1]&=65535;E[15]=h[15]-32767-(E[14]>>16&1);const W=E[15]>>16&1;E[14]&=65535,f(h,E,1-W)}for(let b=0;b<16;b++)C[2*b]=h[b]&255,C[2*b+1]=h[b]>>8}function p(C,T){for(let E=0;E<16;E++)C[E]=T[2*E]+(T[2*E+1]<<8);C[15]&=32767}function _(C,T,E){for(let h=0;h<16;h++)C[h]=T[h]+E[h]}function D(C,T,E){for(let h=0;h<16;h++)C[h]=T[h]-E[h]}function S(C,T,E){let h,b,W=0,G=0,se=0,ue=0,de=0,w=0,A=0,ee=0,Q=0,K=0,V=0,J=0,re=0,be=0,oe=0,we=0,le=0,ve=0,B=0,z=0,$=0,d=0,R=0,ae=0,fe=0,Ie=0,Be=0,Ke=0,Ue=0,gt=0,yt=0,qe=E[0],xe=E[1],Ne=E[2],Le=E[3],Fe=E[4],Pe=E[5],$e=E[6],Se=E[7],Ce=E[8],He=E[9],Oe=E[10],Ve=E[11],Ge=E[12],et=E[13],tt=E[14],Qe=E[15];h=T[0],W+=h*qe,G+=h*xe,se+=h*Ne,ue+=h*Le,de+=h*Fe,w+=h*Pe,A+=h*$e,ee+=h*Se,Q+=h*Ce,K+=h*He,V+=h*Oe,J+=h*Ve,re+=h*Ge,be+=h*et,oe+=h*tt,we+=h*Qe,h=T[1],G+=h*qe,se+=h*xe,ue+=h*Ne,de+=h*Le,w+=h*Fe,A+=h*Pe,ee+=h*$e,Q+=h*Se,K+=h*Ce,V+=h*He,J+=h*Oe,re+=h*Ve,be+=h*Ge,oe+=h*et,we+=h*tt,le+=h*Qe,h=T[2],se+=h*qe,ue+=h*xe,de+=h*Ne,w+=h*Le,A+=h*Fe,ee+=h*Pe,Q+=h*$e,K+=h*Se,V+=h*Ce,J+=h*He,re+=h*Oe,be+=h*Ve,oe+=h*Ge,we+=h*et,le+=h*tt,ve+=h*Qe,h=T[3],ue+=h*qe,de+=h*xe,w+=h*Ne,A+=h*Le,ee+=h*Fe,Q+=h*Pe,K+=h*$e,V+=h*Se,J+=h*Ce,re+=h*He,be+=h*Oe,oe+=h*Ve,we+=h*Ge,le+=h*et,ve+=h*tt,B+=h*Qe,h=T[4],de+=h*qe,w+=h*xe,A+=h*Ne,ee+=h*Le,Q+=h*Fe,K+=h*Pe,V+=h*$e,J+=h*Se,re+=h*Ce,be+=h*He,oe+=h*Oe,we+=h*Ve,le+=h*Ge,ve+=h*et,B+=h*tt,z+=h*Qe,h=T[5],w+=h*qe,A+=h*xe,ee+=h*Ne,Q+=h*Le,K+=h*Fe,V+=h*Pe,J+=h*$e,re+=h*Se,be+=h*Ce,oe+=h*He,we+=h*Oe,le+=h*Ve,ve+=h*Ge,B+=h*et,z+=h*tt,$+=h*Qe,h=T[6],A+=h*qe,ee+=h*xe,Q+=h*Ne,K+=h*Le,V+=h*Fe,J+=h*Pe,re+=h*$e,be+=h*Se,oe+=h*Ce,we+=h*He,le+=h*Oe,ve+=h*Ve,B+=h*Ge,z+=h*et,$+=h*tt,d+=h*Qe,h=T[7],ee+=h*qe,Q+=h*xe,K+=h*Ne,V+=h*Le,J+=h*Fe,re+=h*Pe,be+=h*$e,oe+=h*Se,we+=h*Ce,le+=h*He,ve+=h*Oe,B+=h*Ve,z+=h*Ge,$+=h*et,d+=h*tt,R+=h*Qe,h=T[8],Q+=h*qe,K+=h*xe,V+=h*Ne,J+=h*Le,re+=h*Fe,be+=h*Pe,oe+=h*$e,we+=h*Se,le+=h*Ce,ve+=h*He,B+=h*Oe,z+=h*Ve,$+=h*Ge,d+=h*et,R+=h*tt,ae+=h*Qe,h=T[9],K+=h*qe,V+=h*xe,J+=h*Ne,re+=h*Le,be+=h*Fe,oe+=h*Pe,we+=h*$e,le+=h*Se,ve+=h*Ce,B+=h*He,z+=h*Oe,$+=h*Ve,d+=h*Ge,R+=h*et,ae+=h*tt,fe+=h*Qe,h=T[10],V+=h*qe,J+=h*xe,re+=h*Ne,be+=h*Le,oe+=h*Fe,we+=h*Pe,le+=h*$e,ve+=h*Se,B+=h*Ce,z+=h*He,$+=h*Oe,d+=h*Ve,R+=h*Ge,ae+=h*et,fe+=h*tt,Ie+=h*Qe,h=T[11],J+=h*qe,re+=h*xe,be+=h*Ne,oe+=h*Le,we+=h*Fe,le+=h*Pe,ve+=h*$e,B+=h*Se,z+=h*Ce,$+=h*He,d+=h*Oe,R+=h*Ve,ae+=h*Ge,fe+=h*et,Ie+=h*tt,Be+=h*Qe,h=T[12],re+=h*qe,be+=h*xe,oe+=h*Ne,we+=h*Le,le+=h*Fe,ve+=h*Pe,B+=h*$e,z+=h*Se,$+=h*Ce,d+=h*He,R+=h*Oe,ae+=h*Ve,fe+=h*Ge,Ie+=h*et,Be+=h*tt,Ke+=h*Qe,h=T[13],be+=h*qe,oe+=h*xe,we+=h*Ne,le+=h*Le,ve+=h*Fe,B+=h*Pe,z+=h*$e,$+=h*Se,d+=h*Ce,R+=h*He,ae+=h*Oe,fe+=h*Ve,Ie+=h*Ge,Be+=h*et,Ke+=h*tt,Ue+=h*Qe,h=T[14],oe+=h*qe,we+=h*xe,le+=h*Ne,ve+=h*Le,B+=h*Fe,z+=h*Pe,$+=h*$e,d+=h*Se,R+=h*Ce,ae+=h*He,fe+=h*Oe,Ie+=h*Ve,Be+=h*Ge,Ke+=h*et,Ue+=h*tt,gt+=h*Qe,h=T[15],we+=h*qe,le+=h*xe,ve+=h*Ne,B+=h*Le,z+=h*Fe,$+=h*Pe,d+=h*$e,R+=h*Se,ae+=h*Ce,fe+=h*He,Ie+=h*Oe,Be+=h*Ve,Ke+=h*Ge,Ue+=h*et,gt+=h*tt,yt+=h*Qe,W+=38*le,G+=38*ve,se+=38*B,ue+=38*z,de+=38*$,w+=38*d,A+=38*R,ee+=38*ae,Q+=38*fe,K+=38*Ie,V+=38*Be,J+=38*Ke,re+=38*Ue,be+=38*gt,oe+=38*yt,b=1,h=W+b+65535,b=Math.floor(h/65536),W=h-b*65536,h=G+b+65535,b=Math.floor(h/65536),G=h-b*65536,h=se+b+65535,b=Math.floor(h/65536),se=h-b*65536,h=ue+b+65535,b=Math.floor(h/65536),ue=h-b*65536,h=de+b+65535,b=Math.floor(h/65536),de=h-b*65536,h=w+b+65535,b=Math.floor(h/65536),w=h-b*65536,h=A+b+65535,b=Math.floor(h/65536),A=h-b*65536,h=ee+b+65535,b=Math.floor(h/65536),ee=h-b*65536,h=Q+b+65535,b=Math.floor(h/65536),Q=h-b*65536,h=K+b+65535,b=Math.floor(h/65536),K=h-b*65536,h=V+b+65535,b=Math.floor(h/65536),V=h-b*65536,h=J+b+65535,b=Math.floor(h/65536),J=h-b*65536,h=re+b+65535,b=Math.floor(h/65536),re=h-b*65536,h=be+b+65535,b=Math.floor(h/65536),be=h-b*65536,h=oe+b+65535,b=Math.floor(h/65536),oe=h-b*65536,h=we+b+65535,b=Math.floor(h/65536),we=h-b*65536,W+=b-1+37*(b-1),b=1,h=W+b+65535,b=Math.floor(h/65536),W=h-b*65536,h=G+b+65535,b=Math.floor(h/65536),G=h-b*65536,h=se+b+65535,b=Math.floor(h/65536),se=h-b*65536,h=ue+b+65535,b=Math.floor(h/65536),ue=h-b*65536,h=de+b+65535,b=Math.floor(h/65536),de=h-b*65536,h=w+b+65535,b=Math.floor(h/65536),w=h-b*65536,h=A+b+65535,b=Math.floor(h/65536),A=h-b*65536,h=ee+b+65535,b=Math.floor(h/65536),ee=h-b*65536,h=Q+b+65535,b=Math.floor(h/65536),Q=h-b*65536,h=K+b+65535,b=Math.floor(h/65536),K=h-b*65536,h=V+b+65535,b=Math.floor(h/65536),V=h-b*65536,h=J+b+65535,b=Math.floor(h/65536),J=h-b*65536,h=re+b+65535,b=Math.floor(h/65536),re=h-b*65536,h=be+b+65535,b=Math.floor(h/65536),be=h-b*65536,h=oe+b+65535,b=Math.floor(h/65536),oe=h-b*65536,h=we+b+65535,b=Math.floor(h/65536),we=h-b*65536,W+=b-1+37*(b-1),C[0]=W,C[1]=G,C[2]=se,C[3]=ue,C[4]=de,C[5]=w,C[6]=A,C[7]=ee,C[8]=Q,C[9]=K,C[10]=V,C[11]=J,C[12]=re,C[13]=be,C[14]=oe,C[15]=we}function x(C,T){S(C,T,T)}function O(C,T){const E=i();for(let h=0;h<16;h++)E[h]=T[h];for(let h=253;h>=0;h--)x(E,E),h!==2&&h!==4&&S(E,E,T);for(let h=0;h<16;h++)C[h]=E[h]}function F(C,T){const E=new Uint8Array(32),h=new Float64Array(80),b=i(),W=i(),G=i(),se=i(),ue=i(),de=i();for(let Q=0;Q<31;Q++)E[Q]=C[Q];E[31]=C[31]&127|64,E[0]&=248,p(h,T);for(let Q=0;Q<16;Q++)W[Q]=h[Q];b[0]=se[0]=1;for(let Q=254;Q>=0;--Q){const K=E[Q>>>3]>>>(Q&7)&1;f(b,W,K),f(G,se,K),_(ue,b,G),D(b,b,G),_(G,W,se),D(W,W,se),x(se,ue),x(de,b),S(b,G,b),S(G,W,ue),_(ue,b,G),D(b,b,G),x(W,b),D(G,se,de),S(b,G,c),_(b,b,se),S(G,G,b),S(b,se,de),S(se,W,h),x(W,ue),f(b,W,K),f(G,se,K)}for(let Q=0;Q<16;Q++)h[Q+16]=b[Q],h[Q+32]=G[Q],h[Q+48]=W[Q],h[Q+64]=se[Q];const w=h.subarray(32),A=h.subarray(16);O(w,w),S(A,A,w);const ee=new Uint8Array(32);return g(ee,A),ee}n.scalarMult=F;function H(C){return F(C,o)}n.scalarMultBase=H;function ne(C){if(C.length!==n.SECRET_KEY_LENGTH)throw new Error(`x25519: seed must be ${n.SECRET_KEY_LENGTH} bytes`);const T=new Uint8Array(C);return{publicKey:H(T),secretKey:T}}n.generateKeyPairFromSeed=ne;function L(C){const T=(0,e.randomBytes)(32,C),E=ne(T);return(0,t.wipe)(T),E}n.generateKeyPair=L;function M(C,T,E=!1){if(C.length!==n.PUBLIC_KEY_LENGTH)throw new Error("X25519: incorrect secret key length");if(T.length!==n.PUBLIC_KEY_LENGTH)throw new Error("X25519: incorrect public key length");const h=F(C,T);if(E){let b=0;for(let W=0;W<h.length;W++)b|=h[W];if(b===0)throw new Error("X25519: invalid shared key")}return h}n.sharedKey=M})(Yu);function Ju(n){return globalThis.Buffer!=null?new Uint8Array(n.buffer,n.byteOffset,n.byteLength):n}function vp(n=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?Ju(globalThis.Buffer.allocUnsafe(n)):new Uint8Array(n)}function mu(n,e){e||(e=n.reduce((o,c)=>o+c.length,0));const t=vp(e);let i=0;for(const o of n)t.set(o,i),i+=o.length;return Ju(t)}function Xb(n,e){if(n.length>=255)throw new TypeError("Alphabet too long");for(var t=new Uint8Array(256),i=0;i<t.length;i++)t[i]=255;for(var o=0;o<n.length;o++){var c=n.charAt(o),u=c.charCodeAt(0);if(t[u]!==255)throw new TypeError(c+" is ambiguous");t[u]=o}var f=n.length,g=n.charAt(0),p=Math.log(f)/Math.log(256),_=Math.log(256)/Math.log(f);function D(O){if(O instanceof Uint8Array||(ArrayBuffer.isView(O)?O=new Uint8Array(O.buffer,O.byteOffset,O.byteLength):Array.isArray(O)&&(O=Uint8Array.from(O))),!(O instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(O.length===0)return"";for(var F=0,H=0,ne=0,L=O.length;ne!==L&&O[ne]===0;)ne++,F++;for(var M=(L-ne)*_+1>>>0,C=new Uint8Array(M);ne!==L;){for(var T=O[ne],E=0,h=M-1;(T!==0||E<H)&&h!==-1;h--,E++)T+=256*C[h]>>>0,C[h]=T%f>>>0,T=T/f>>>0;if(T!==0)throw new Error("Non-zero carry");H=E,ne++}for(var b=M-H;b!==M&&C[b]===0;)b++;for(var W=g.repeat(F);b<M;++b)W+=n.charAt(C[b]);return W}function S(O){if(typeof O!="string")throw new TypeError("Expected String");if(O.length===0)return new Uint8Array;var F=0;if(O[F]!==" "){for(var H=0,ne=0;O[F]===g;)H++,F++;for(var L=(O.length-F)*p+1>>>0,M=new Uint8Array(L);O[F];){var C=t[O.charCodeAt(F)];if(C===255)return;for(var T=0,E=L-1;(C!==0||T<ne)&&E!==-1;E--,T++)C+=f*M[E]>>>0,M[E]=C%256>>>0,C=C/256>>>0;if(C!==0)throw new Error("Non-zero carry");ne=T,F++}if(O[F]!==" "){for(var h=L-ne;h!==L&&M[h]===0;)h++;for(var b=new Uint8Array(H+(L-h)),W=H;h!==L;)b[W++]=M[h++];return b}}}function x(O){var F=S(O);if(F)return F;throw new Error(`Non-${e} character`)}return{encode:D,decodeUnsafe:S,decode:x}}var Zb=Xb,ew=Zb;const tw=n=>{if(n instanceof Uint8Array&&n.constructor.name==="Uint8Array")return n;if(n instanceof ArrayBuffer)return new Uint8Array(n);if(ArrayBuffer.isView(n))return new Uint8Array(n.buffer,n.byteOffset,n.byteLength);throw new Error("Unknown type, must be binary type")},rw=n=>new TextEncoder().encode(n),nw=n=>new TextDecoder().decode(n);class iw{constructor(e,t,i){this.name=e,this.prefix=t,this.baseEncode=i}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class sw{constructor(e,t,i){if(this.name=e,this.prefix=t,t.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=t.codePointAt(0),this.baseDecode=i}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return mp(this,e)}}class ow{constructor(e){this.decoders=e}or(e){return mp(this,e)}decode(e){const t=e[0],i=this.decoders[t];if(i)return i.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const mp=(n,e)=>new ow({...n.decoders||{[n.prefix]:n},...e.decoders||{[e.prefix]:e}});class aw{constructor(e,t,i,o){this.name=e,this.prefix=t,this.baseEncode=i,this.baseDecode=o,this.encoder=new iw(e,t,i),this.decoder=new sw(e,t,o)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const da=({name:n,prefix:e,encode:t,decode:i})=>new aw(n,e,t,i),Rs=({prefix:n,name:e,alphabet:t})=>{const{encode:i,decode:o}=ew(t,e);return da({prefix:n,name:e,encode:i,decode:c=>tw(o(c))})},cw=(n,e,t,i)=>{const o={};for(let _=0;_<e.length;++_)o[e[_]]=_;let c=n.length;for(;n[c-1]==="=";)--c;const u=new Uint8Array(c*t/8|0);let f=0,g=0,p=0;for(let _=0;_<c;++_){const D=o[n[_]];if(D===void 0)throw new SyntaxError(`Non-${i} character`);g=g<<t|D,f+=t,f>=8&&(f-=8,u[p++]=255&g>>f)}if(f>=t||255&g<<8-f)throw new SyntaxError("Unexpected end of data");return u},uw=(n,e,t)=>{const i=e[e.length-1]==="=",o=(1<<t)-1;let c="",u=0,f=0;for(let g=0;g<n.length;++g)for(f=f<<8|n[g],u+=8;u>t;)u-=t,c+=e[o&f>>u];if(u&&(c+=e[o&f<<t-u]),i)for(;c.length*t&7;)c+="=";return c},Jt=({name:n,prefix:e,bitsPerChar:t,alphabet:i})=>da({prefix:e,name:n,encode(o){return uw(o,i,t)},decode(o){return cw(o,i,t,n)}}),hw=da({prefix:"\0",name:"identity",encode:n=>nw(n),decode:n=>rw(n)}),lw=Object.freeze(Object.defineProperty({__proto__:null,identity:hw},Symbol.toStringTag,{value:"Module"})),fw=Jt({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1}),dw=Object.freeze(Object.defineProperty({__proto__:null,base2:fw},Symbol.toStringTag,{value:"Module"})),pw=Jt({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3}),gw=Object.freeze(Object.defineProperty({__proto__:null,base8:pw},Symbol.toStringTag,{value:"Module"})),yw=Rs({prefix:"9",name:"base10",alphabet:"0123456789"}),_w=Object.freeze(Object.defineProperty({__proto__:null,base10:yw},Symbol.toStringTag,{value:"Module"})),vw=Jt({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),mw=Jt({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4}),bw=Object.freeze(Object.defineProperty({__proto__:null,base16:vw,base16upper:mw},Symbol.toStringTag,{value:"Module"})),ww=Jt({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),Ew=Jt({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),Dw=Jt({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),Sw=Jt({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),Iw=Jt({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),xw=Jt({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),Ow=Jt({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),Pw=Jt({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),Cw=Jt({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),Aw=Object.freeze(Object.defineProperty({__proto__:null,base32:ww,base32hex:Iw,base32hexpad:Ow,base32hexpadupper:Pw,base32hexupper:xw,base32pad:Dw,base32padupper:Sw,base32upper:Ew,base32z:Cw},Symbol.toStringTag,{value:"Module"})),Tw=Rs({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),Rw=Rs({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"}),Nw=Object.freeze(Object.defineProperty({__proto__:null,base36:Tw,base36upper:Rw},Symbol.toStringTag,{value:"Module"})),Lw=Rs({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),$w=Rs({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}),jw=Object.freeze(Object.defineProperty({__proto__:null,base58btc:Lw,base58flickr:$w},Symbol.toStringTag,{value:"Module"})),Uw=Jt({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),Mw=Jt({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),qw=Jt({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),Fw=Jt({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6}),zw=Object.freeze(Object.defineProperty({__proto__:null,base64:Uw,base64pad:Mw,base64url:qw,base64urlpad:Fw},Symbol.toStringTag,{value:"Module"})),bp=Array.from("🚀🪐☄🛰🌌🌑🌒🌓🌔🌕🌖🌗🌘🌍🌏🌎🐉☀💻🖥💾💿😂❤😍🤣😊🙏💕😭😘👍😅👏😁🔥🥰💔💖💙😢🤔😆🙄💪😉☺👌🤗💜😔😎😇🌹🤦🎉💞✌✨🤷😱😌🌸🙌😋💗💚😏💛🙂💓🤩😄😀🖤😃💯🙈👇🎶😒🤭❣😜💋👀😪😑💥🙋😞😩😡🤪👊🥳😥🤤👉💃😳✋😚😝😴🌟😬🙃🍀🌷😻😓⭐✅🥺🌈😈🤘💦✔😣🏃💐☹🎊💘😠☝😕🌺🎂🌻😐🖕💝🙊😹🗣💫💀👑🎵🤞😛🔴😤🌼😫⚽🤙☕🏆🤫👈😮🙆🍻🍃🐶💁😲🌿🧡🎁⚡🌞🎈❌✊👋😰🤨😶🤝🚶💰🍓💢🤟🙁🚨💨🤬✈🎀🍺🤓😙💟🌱😖👶🥴▶➡❓💎💸⬇😨🌚🦋😷🕺⚠🙅😟😵👎🤲🤠🤧📌🔵💅🧐🐾🍒😗🤑🌊🤯🐷☎💧😯💆👆🎤🙇🍑❄🌴💣🐸💌📍🥀🤢👅💡💩👐📸👻🤐🤮🎼🥵🚩🍎🍊👼💍📣🥂"),Bw=bp.reduce((n,e,t)=>(n[t]=e,n),[]),Hw=bp.reduce((n,e,t)=>(n[e.codePointAt(0)]=t,n),[]);function kw(n){return n.reduce((e,t)=>(e+=Bw[t],e),"")}function Kw(n){const e=[];for(const t of n){const i=Hw[t.codePointAt(0)];if(i===void 0)throw new Error(`Non-base256emoji character: ${t}`);e.push(i)}return new Uint8Array(e)}const Vw=da({prefix:"🚀",name:"base256emoji",encode:kw,decode:Kw}),Ww=Object.freeze(Object.defineProperty({__proto__:null,base256emoji:Vw},Symbol.toStringTag,{value:"Module"}));new TextEncoder;new TextDecoder;const mf={...lw,...dw,...gw,..._w,...bw,...Aw,...Nw,...jw,...zw,...Ww};function wp(n,e,t,i){return{name:n,prefix:e,encoder:{name:n,prefix:e,encode:t},decoder:{decode:i}}}const bf=wp("utf8","u",n=>"u"+new TextDecoder("utf8").decode(n),n=>new TextEncoder().encode(n.substring(1))),Kc=wp("ascii","a",n=>{let e="a";for(let t=0;t<n.length;t++)e+=String.fromCharCode(n[t]);return e},n=>{n=n.substring(1);const e=vp(n.length);for(let t=0;t<n.length;t++)e[t]=n.charCodeAt(t);return e}),Ep={utf8:bf,"utf-8":bf,hex:mf.base16,latin1:Kc,ascii:Kc,binary:Kc,...mf};function wr(n,e="utf8"){const t=Ep[e];if(!t)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?Ju(globalThis.Buffer.from(n,"utf-8")):t.decoder.decode(`${t.prefix}${n}`)}function lr(n,e="utf8"){const t=Ep[e];if(!t)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(n.buffer,n.byteOffset,n.byteLength).toString("utf8"):t.encoder.encode(n).substring(1)}var wf=function(n,e,t){if(t||arguments.length===2)for(var i=0,o=e.length,c;i<o;i++)(c||!(i in e))&&(c||(c=Array.prototype.slice.call(e,0,i)),c[i]=e[i]);return n.concat(c||Array.prototype.slice.call(e))},Gw=function(){function n(e,t,i){this.name=e,this.version=t,this.os=i,this.type="browser"}return n}(),Yw=function(){function n(e){this.version=e,this.type="node",this.name="node",this.os=process.platform}return n}(),Jw=function(){function n(e,t,i,o){this.name=e,this.version=t,this.os=i,this.bot=o,this.type="bot-device"}return n}(),Qw=function(){function n(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null}return n}(),Xw=function(){function n(){this.type="react-native",this.name="react-native",this.version=null,this.os=null}return n}(),Zw=/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/,eE=/(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,Ef=3,tE=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["pie",/^Microsoft Pocket Internet Explorer\/(\d+\.\d+)$/],["pie",/^Mozilla\/\d\.\d+\s\(compatible;\s(?:MSP?IE|MSInternet Explorer) (\d+\.\d+);.*Windows CE.*\)$/],["netfront",/^Mozilla\/\d\.\d+.*NetFront\/(\d.\d)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FB[AS]V\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["curl",/^curl\/([0-9\.]+)$/],["searchbot",Zw]],Df=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Windows CE",/Windows CE|WinCE|Microsoft Pocket Internet Explorer/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function rE(n){return typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"?new Xw:typeof navigator<"u"?iE(navigator.userAgent):oE()}function nE(n){return n!==""&&tE.reduce(function(e,t){var i=t[0],o=t[1];if(e)return e;var c=o.exec(n);return!!c&&[i,c]},!1)}function iE(n){var e=nE(n);if(!e)return null;var t=e[0],i=e[1];if(t==="searchbot")return new Qw;var o=i[1]&&i[1].split(".").join("_").split("_").slice(0,3);o?o.length<Ef&&(o=wf(wf([],o,!0),aE(Ef-o.length),!0)):o=[];var c=o.join("."),u=sE(n),f=eE.exec(n);return f&&f[1]?new Jw(t,c,u,f[1]):new Gw(t,c,u)}function sE(n){for(var e=0,t=Df.length;e<t;e++){var i=Df[e],o=i[0],c=i[1],u=c.exec(n);if(u)return o}return null}function oE(){var n=typeof process<"u"&&process.version;return n?new Yw(process.version.slice(1)):null}function aE(n){for(var e=[],t=0;t<n;t++)e.push("0");return e}var _e={};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var bu=function(n,e){return bu=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var o in i)i.hasOwnProperty(o)&&(t[o]=i[o])},bu(n,e)};function cE(n,e){bu(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var wu=function(){return wu=Object.assign||function(e){for(var t,i=1,o=arguments.length;i<o;i++){t=arguments[i];for(var c in t)Object.prototype.hasOwnProperty.call(t,c)&&(e[c]=t[c])}return e},wu.apply(this,arguments)};function uE(n,e){var t={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(n);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(n,i[o])&&(t[i[o]]=n[i[o]]);return t}function hE(n,e,t,i){var o=arguments.length,c=o<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,u;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")c=Reflect.decorate(n,e,t,i);else for(var f=n.length-1;f>=0;f--)(u=n[f])&&(c=(o<3?u(c):o>3?u(e,t,c):u(e,t))||c);return o>3&&c&&Object.defineProperty(e,t,c),c}function lE(n,e){return function(t,i){e(t,i,n)}}function fE(n,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(n,e)}function dE(n,e,t,i){function o(c){return c instanceof t?c:new t(function(u){u(c)})}return new(t||(t=Promise))(function(c,u){function f(_){try{p(i.next(_))}catch(D){u(D)}}function g(_){try{p(i.throw(_))}catch(D){u(D)}}function p(_){_.done?c(_.value):o(_.value).then(f,g)}p((i=i.apply(n,e||[])).next())})}function pE(n,e){var t={label:0,sent:function(){if(c[0]&1)throw c[1];return c[1]},trys:[],ops:[]},i,o,c,u;return u={next:f(0),throw:f(1),return:f(2)},typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function f(p){return function(_){return g([p,_])}}function g(p){if(i)throw new TypeError("Generator is already executing.");for(;t;)try{if(i=1,o&&(c=p[0]&2?o.return:p[0]?o.throw||((c=o.return)&&c.call(o),0):o.next)&&!(c=c.call(o,p[1])).done)return c;switch(o=0,c&&(p=[p[0]&2,c.value]),p[0]){case 0:case 1:c=p;break;case 4:return t.label++,{value:p[1],done:!1};case 5:t.label++,o=p[1],p=[0];continue;case 7:p=t.ops.pop(),t.trys.pop();continue;default:if(c=t.trys,!(c=c.length>0&&c[c.length-1])&&(p[0]===6||p[0]===2)){t=0;continue}if(p[0]===3&&(!c||p[1]>c[0]&&p[1]<c[3])){t.label=p[1];break}if(p[0]===6&&t.label<c[1]){t.label=c[1],c=p;break}if(c&&t.label<c[2]){t.label=c[2],t.ops.push(p);break}c[2]&&t.ops.pop(),t.trys.pop();continue}p=e.call(n,t)}catch(_){p=[6,_],o=0}finally{i=c=0}if(p[0]&5)throw p[1];return{value:p[0]?p[1]:void 0,done:!0}}}function gE(n,e,t,i){i===void 0&&(i=t),n[i]=e[t]}function yE(n,e){for(var t in n)t!=="default"&&!e.hasOwnProperty(t)&&(e[t]=n[t])}function Eu(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],i=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&i>=n.length&&(n=void 0),{value:n&&n[i++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Dp(n,e){var t=typeof Symbol=="function"&&n[Symbol.iterator];if(!t)return n;var i=t.call(n),o,c=[],u;try{for(;(e===void 0||e-- >0)&&!(o=i.next()).done;)c.push(o.value)}catch(f){u={error:f}}finally{try{o&&!o.done&&(t=i.return)&&t.call(i)}finally{if(u)throw u.error}}return c}function _E(){for(var n=[],e=0;e<arguments.length;e++)n=n.concat(Dp(arguments[e]));return n}function vE(){for(var n=0,e=0,t=arguments.length;e<t;e++)n+=arguments[e].length;for(var i=Array(n),o=0,e=0;e<t;e++)for(var c=arguments[e],u=0,f=c.length;u<f;u++,o++)i[o]=c[u];return i}function Ss(n){return this instanceof Ss?(this.v=n,this):new Ss(n)}function mE(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=t.apply(n,e||[]),o,c=[];return o={},u("next"),u("throw"),u("return"),o[Symbol.asyncIterator]=function(){return this},o;function u(S){i[S]&&(o[S]=function(x){return new Promise(function(O,F){c.push([S,x,O,F])>1||f(S,x)})})}function f(S,x){try{g(i[S](x))}catch(O){D(c[0][3],O)}}function g(S){S.value instanceof Ss?Promise.resolve(S.value.v).then(p,_):D(c[0][2],S)}function p(S){f("next",S)}function _(S){f("throw",S)}function D(S,x){S(x),c.shift(),c.length&&f(c[0][0],c[0][1])}}function bE(n){var e,t;return e={},i("next"),i("throw",function(o){throw o}),i("return"),e[Symbol.iterator]=function(){return this},e;function i(o,c){e[o]=n[o]?function(u){return(t=!t)?{value:Ss(n[o](u)),done:o==="return"}:c?c(u):u}:c}}function wE(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof Eu=="function"?Eu(n):n[Symbol.iterator](),t={},i("next"),i("throw"),i("return"),t[Symbol.asyncIterator]=function(){return this},t);function i(c){t[c]=n[c]&&function(u){return new Promise(function(f,g){u=n[c](u),o(f,g,u.done,u.value)})}}function o(c,u,f,g){Promise.resolve(g).then(function(p){c({value:p,done:f})},u)}}function EE(n,e){return Object.defineProperty?Object.defineProperty(n,"raw",{value:e}):n.raw=e,n}function DE(n){if(n&&n.__esModule)return n;var e={};if(n!=null)for(var t in n)Object.hasOwnProperty.call(n,t)&&(e[t]=n[t]);return e.default=n,e}function SE(n){return n&&n.__esModule?n:{default:n}}function IE(n,e){if(!e.has(n))throw new TypeError("attempted to get private field on non-instance");return e.get(n)}function xE(n,e,t){if(!e.has(n))throw new TypeError("attempted to set private field on non-instance");return e.set(n,t),t}const OE=Object.freeze(Object.defineProperty({__proto__:null,get __assign(){return wu},__asyncDelegator:bE,__asyncGenerator:mE,__asyncValues:wE,__await:Ss,__awaiter:dE,__classPrivateFieldGet:IE,__classPrivateFieldSet:xE,__createBinding:gE,__decorate:hE,__exportStar:yE,__extends:cE,__generator:pE,__importDefault:SE,__importStar:DE,__makeTemplateObject:EE,__metadata:fE,__param:lE,__read:Dp,__rest:uE,__spread:_E,__spreadArrays:vE,__values:Eu},Symbol.toStringTag,{value:"Module"})),pa=ui(OE);var Vc={},ds={},Sf;function PE(){if(Sf)return ds;Sf=1,Object.defineProperty(ds,"__esModule",{value:!0}),ds.delay=void 0;function n(e){return new Promise(t=>{setTimeout(()=>{t(!0)},e)})}return ds.delay=n,ds}var ni={},Wc={},ii={},If;function CE(){return If||(If=1,Object.defineProperty(ii,"__esModule",{value:!0}),ii.ONE_THOUSAND=ii.ONE_HUNDRED=void 0,ii.ONE_HUNDRED=100,ii.ONE_THOUSAND=1e3),ii}var Gc={},xf;function AE(){return xf||(xf=1,function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.ONE_YEAR=n.FOUR_WEEKS=n.THREE_WEEKS=n.TWO_WEEKS=n.ONE_WEEK=n.THIRTY_DAYS=n.SEVEN_DAYS=n.FIVE_DAYS=n.THREE_DAYS=n.ONE_DAY=n.TWENTY_FOUR_HOURS=n.TWELVE_HOURS=n.SIX_HOURS=n.THREE_HOURS=n.ONE_HOUR=n.SIXTY_MINUTES=n.THIRTY_MINUTES=n.TEN_MINUTES=n.FIVE_MINUTES=n.ONE_MINUTE=n.SIXTY_SECONDS=n.THIRTY_SECONDS=n.TEN_SECONDS=n.FIVE_SECONDS=n.ONE_SECOND=void 0,n.ONE_SECOND=1,n.FIVE_SECONDS=5,n.TEN_SECONDS=10,n.THIRTY_SECONDS=30,n.SIXTY_SECONDS=60,n.ONE_MINUTE=n.SIXTY_SECONDS,n.FIVE_MINUTES=n.ONE_MINUTE*5,n.TEN_MINUTES=n.ONE_MINUTE*10,n.THIRTY_MINUTES=n.ONE_MINUTE*30,n.SIXTY_MINUTES=n.ONE_MINUTE*60,n.ONE_HOUR=n.SIXTY_MINUTES,n.THREE_HOURS=n.ONE_HOUR*3,n.SIX_HOURS=n.ONE_HOUR*6,n.TWELVE_HOURS=n.ONE_HOUR*12,n.TWENTY_FOUR_HOURS=n.ONE_HOUR*24,n.ONE_DAY=n.TWENTY_FOUR_HOURS,n.THREE_DAYS=n.ONE_DAY*3,n.FIVE_DAYS=n.ONE_DAY*5,n.SEVEN_DAYS=n.ONE_DAY*7,n.THIRTY_DAYS=n.ONE_DAY*30,n.ONE_WEEK=n.SEVEN_DAYS,n.TWO_WEEKS=n.ONE_WEEK*2,n.THREE_WEEKS=n.ONE_WEEK*3,n.FOUR_WEEKS=n.ONE_WEEK*4,n.ONE_YEAR=n.ONE_DAY*365}(Gc)),Gc}var Of;function Sp(){return Of||(Of=1,function(n){Object.defineProperty(n,"__esModule",{value:!0});const e=pa;e.__exportStar(CE(),n),e.__exportStar(AE(),n)}(Wc)),Wc}var Pf;function TE(){if(Pf)return ni;Pf=1,Object.defineProperty(ni,"__esModule",{value:!0}),ni.fromMiliseconds=ni.toMiliseconds=void 0;const n=Sp();function e(i){return i*n.ONE_THOUSAND}ni.toMiliseconds=e;function t(i){return Math.floor(i/n.ONE_THOUSAND)}return ni.fromMiliseconds=t,ni}var Cf;function RE(){return Cf||(Cf=1,function(n){Object.defineProperty(n,"__esModule",{value:!0});const e=pa;e.__exportStar(PE(),n),e.__exportStar(TE(),n)}(Vc)),Vc}var $i={},Af;function NE(){if(Af)return $i;Af=1,Object.defineProperty($i,"__esModule",{value:!0}),$i.Watch=void 0;class n{constructor(){this.timestamps=new Map}start(t){if(this.timestamps.has(t))throw new Error(`Watch already started for label: ${t}`);this.timestamps.set(t,{started:Date.now()})}stop(t){const i=this.get(t);if(typeof i.elapsed<"u")throw new Error(`Watch already stopped for label: ${t}`);const o=Date.now()-i.started;this.timestamps.set(t,{started:i.started,elapsed:o})}get(t){const i=this.timestamps.get(t);if(typeof i>"u")throw new Error(`No timestamp found for label: ${t}`);return i}elapsed(t){const i=this.get(t);return i.elapsed||Date.now()-i.started}}return $i.Watch=n,$i.default=n,$i}var Yc={},ps={},Tf;function LE(){if(Tf)return ps;Tf=1,Object.defineProperty(ps,"__esModule",{value:!0}),ps.IWatch=void 0;class n{}return ps.IWatch=n,ps}var Rf;function $E(){return Rf||(Rf=1,function(n){Object.defineProperty(n,"__esModule",{value:!0}),pa.__exportStar(LE(),n)}(Yc)),Yc}(function(n){Object.defineProperty(n,"__esModule",{value:!0});const e=pa;e.__exportStar(RE(),n),e.__exportStar(NE(),n),e.__exportStar($E(),n),e.__exportStar(Sp(),n)})(_e);var ft={};Object.defineProperty(ft,"__esModule",{value:!0});ft.getLocalStorage=ft.getLocalStorageOrThrow=ft.getCrypto=ft.getCryptoOrThrow=Ip=ft.getLocation=ft.getLocationOrThrow=Xu=ft.getNavigator=ft.getNavigatorOrThrow=Qu=ft.getDocument=ft.getDocumentOrThrow=ft.getFromWindowOrThrow=ft.getFromWindow=void 0;function hi(n){let e;return typeof window<"u"&&typeof window[n]<"u"&&(e=window[n]),e}ft.getFromWindow=hi;function Hi(n){const e=hi(n);if(!e)throw new Error(`${n} is not defined in Window`);return e}ft.getFromWindowOrThrow=Hi;function jE(){return Hi("document")}ft.getDocumentOrThrow=jE;function UE(){return hi("document")}var Qu=ft.getDocument=UE;function ME(){return Hi("navigator")}ft.getNavigatorOrThrow=ME;function qE(){return hi("navigator")}var Xu=ft.getNavigator=qE;function FE(){return Hi("location")}ft.getLocationOrThrow=FE;function zE(){return hi("location")}var Ip=ft.getLocation=zE;function BE(){return Hi("crypto")}ft.getCryptoOrThrow=BE;function HE(){return hi("crypto")}ft.getCrypto=HE;function kE(){return Hi("localStorage")}ft.getLocalStorageOrThrow=kE;function KE(){return hi("localStorage")}ft.getLocalStorage=KE;var Zu={};Object.defineProperty(Zu,"__esModule",{value:!0});var xp=Zu.getWindowMetadata=void 0;const Nf=ft;function VE(){let n,e;try{n=Nf.getDocumentOrThrow(),e=Nf.getLocationOrThrow()}catch{return null}function t(){const D=n.getElementsByTagName("link"),S=[];for(let x=0;x<D.length;x++){const O=D[x],F=O.getAttribute("rel");if(F&&F.toLowerCase().indexOf("icon")>-1){const H=O.getAttribute("href");if(H)if(H.toLowerCase().indexOf("https:")===-1&&H.toLowerCase().indexOf("http:")===-1&&H.indexOf("//")!==0){let ne=e.protocol+"//"+e.host;if(H.indexOf("/")===0)ne+=H;else{const L=e.pathname.split("/");L.pop();const M=L.join("/");ne+=M+"/"+H}S.push(ne)}else if(H.indexOf("//")===0){const ne=e.protocol+H;S.push(ne)}else S.push(H)}}return S}function i(...D){const S=n.getElementsByTagName("meta");for(let x=0;x<S.length;x++){const O=S[x],F=["itemprop","property","name"].map(H=>O.getAttribute(H)).filter(H=>H?D.includes(H):!1);if(F.length&&F){const H=O.getAttribute("content");if(H)return H}}return""}function o(){let D=i("name","og:site_name","og:title","twitter:title");return D||(D=n.title),D}function c(){return i("description","og:description","twitter:description","keywords")}const u=o(),f=c(),g=e.origin,p=t();return{description:f,url:g,icons:p,name:u}}xp=Zu.getWindowMetadata=VE;var Is={},WE=n=>encodeURIComponent(n).replace(/[!'()*]/g,e=>`%${e.charCodeAt(0).toString(16).toUpperCase()}`),Op="%[a-f0-9]{2}",Lf=new RegExp("("+Op+")|([^%]+?)","gi"),$f=new RegExp("("+Op+")+","gi");function Du(n,e){try{return[decodeURIComponent(n.join(""))]}catch{}if(n.length===1)return n;e=e||1;var t=n.slice(0,e),i=n.slice(e);return Array.prototype.concat.call([],Du(t),Du(i))}function GE(n){try{return decodeURIComponent(n)}catch{for(var e=n.match(Lf)||[],t=1;t<e.length;t++)n=Du(e,t).join(""),e=n.match(Lf)||[];return n}}function YE(n){for(var e={"%FE%FF":"��","%FF%FE":"��"},t=$f.exec(n);t;){try{e[t[0]]=decodeURIComponent(t[0])}catch{var i=GE(t[0]);i!==t[0]&&(e[t[0]]=i)}t=$f.exec(n)}e["%C2"]="�";for(var o=Object.keys(e),c=0;c<o.length;c++){var u=o[c];n=n.replace(new RegExp(u,"g"),e[u])}return n}var JE=function(n){if(typeof n!="string")throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof n+"`");try{return n=n.replace(/\+/g," "),decodeURIComponent(n)}catch{return YE(n)}},QE=(n,e)=>{if(!(typeof n=="string"&&typeof e=="string"))throw new TypeError("Expected the arguments to be of type `string`");if(e==="")return[n];const t=n.indexOf(e);return t===-1?[n]:[n.slice(0,t),n.slice(t+e.length)]},XE=function(n,e){for(var t={},i=Object.keys(n),o=Array.isArray(e),c=0;c<i.length;c++){var u=i[c],f=n[u];(o?e.indexOf(u)!==-1:e(u,f,n))&&(t[u]=f)}return t};(function(n){const e=WE,t=JE,i=QE,o=XE,c=L=>L==null,u=Symbol("encodeFragmentIdentifier");function f(L){switch(L.arrayFormat){case"index":return M=>(C,T)=>{const E=C.length;return T===void 0||L.skipNull&&T===null||L.skipEmptyString&&T===""?C:T===null?[...C,[_(M,L),"[",E,"]"].join("")]:[...C,[_(M,L),"[",_(E,L),"]=",_(T,L)].join("")]};case"bracket":return M=>(C,T)=>T===void 0||L.skipNull&&T===null||L.skipEmptyString&&T===""?C:T===null?[...C,[_(M,L),"[]"].join("")]:[...C,[_(M,L),"[]=",_(T,L)].join("")];case"colon-list-separator":return M=>(C,T)=>T===void 0||L.skipNull&&T===null||L.skipEmptyString&&T===""?C:T===null?[...C,[_(M,L),":list="].join("")]:[...C,[_(M,L),":list=",_(T,L)].join("")];case"comma":case"separator":case"bracket-separator":{const M=L.arrayFormat==="bracket-separator"?"[]=":"=";return C=>(T,E)=>E===void 0||L.skipNull&&E===null||L.skipEmptyString&&E===""?T:(E=E===null?"":E,T.length===0?[[_(C,L),M,_(E,L)].join("")]:[[T,_(E,L)].join(L.arrayFormatSeparator)])}default:return M=>(C,T)=>T===void 0||L.skipNull&&T===null||L.skipEmptyString&&T===""?C:T===null?[...C,_(M,L)]:[...C,[_(M,L),"=",_(T,L)].join("")]}}function g(L){let M;switch(L.arrayFormat){case"index":return(C,T,E)=>{if(M=/\[(\d*)\]$/.exec(C),C=C.replace(/\[\d*\]$/,""),!M){E[C]=T;return}E[C]===void 0&&(E[C]={}),E[C][M[1]]=T};case"bracket":return(C,T,E)=>{if(M=/(\[\])$/.exec(C),C=C.replace(/\[\]$/,""),!M){E[C]=T;return}if(E[C]===void 0){E[C]=[T];return}E[C]=[].concat(E[C],T)};case"colon-list-separator":return(C,T,E)=>{if(M=/(:list)$/.exec(C),C=C.replace(/:list$/,""),!M){E[C]=T;return}if(E[C]===void 0){E[C]=[T];return}E[C]=[].concat(E[C],T)};case"comma":case"separator":return(C,T,E)=>{const h=typeof T=="string"&&T.includes(L.arrayFormatSeparator),b=typeof T=="string"&&!h&&D(T,L).includes(L.arrayFormatSeparator);T=b?D(T,L):T;const W=h||b?T.split(L.arrayFormatSeparator).map(G=>D(G,L)):T===null?T:D(T,L);E[C]=W};case"bracket-separator":return(C,T,E)=>{const h=/(\[\])$/.test(C);if(C=C.replace(/\[\]$/,""),!h){E[C]=T&&D(T,L);return}const b=T===null?[]:T.split(L.arrayFormatSeparator).map(W=>D(W,L));if(E[C]===void 0){E[C]=b;return}E[C]=[].concat(E[C],b)};default:return(C,T,E)=>{if(E[C]===void 0){E[C]=T;return}E[C]=[].concat(E[C],T)}}}function p(L){if(typeof L!="string"||L.length!==1)throw new TypeError("arrayFormatSeparator must be single character string")}function _(L,M){return M.encode?M.strict?e(L):encodeURIComponent(L):L}function D(L,M){return M.decode?t(L):L}function S(L){return Array.isArray(L)?L.sort():typeof L=="object"?S(Object.keys(L)).sort((M,C)=>Number(M)-Number(C)).map(M=>L[M]):L}function x(L){const M=L.indexOf("#");return M!==-1&&(L=L.slice(0,M)),L}function O(L){let M="";const C=L.indexOf("#");return C!==-1&&(M=L.slice(C)),M}function F(L){L=x(L);const M=L.indexOf("?");return M===-1?"":L.slice(M+1)}function H(L,M){return M.parseNumbers&&!Number.isNaN(Number(L))&&typeof L=="string"&&L.trim()!==""?L=Number(L):M.parseBooleans&&L!==null&&(L.toLowerCase()==="true"||L.toLowerCase()==="false")&&(L=L.toLowerCase()==="true"),L}function ne(L,M){M=Object.assign({decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1},M),p(M.arrayFormatSeparator);const C=g(M),T=Object.create(null);if(typeof L!="string"||(L=L.trim().replace(/^[?#&]/,""),!L))return T;for(const E of L.split("&")){if(E==="")continue;let[h,b]=i(M.decode?E.replace(/\+/g," "):E,"=");b=b===void 0?null:["comma","separator","bracket-separator"].includes(M.arrayFormat)?b:D(b,M),C(D(h,M),b,T)}for(const E of Object.keys(T)){const h=T[E];if(typeof h=="object"&&h!==null)for(const b of Object.keys(h))h[b]=H(h[b],M);else T[E]=H(h,M)}return M.sort===!1?T:(M.sort===!0?Object.keys(T).sort():Object.keys(T).sort(M.sort)).reduce((E,h)=>{const b=T[h];return b&&typeof b=="object"&&!Array.isArray(b)?E[h]=S(b):E[h]=b,E},Object.create(null))}n.extract=F,n.parse=ne,n.stringify=(L,M)=>{if(!L)return"";M=Object.assign({encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:","},M),p(M.arrayFormatSeparator);const C=b=>M.skipNull&&c(L[b])||M.skipEmptyString&&L[b]==="",T=f(M),E={};for(const b of Object.keys(L))C(b)||(E[b]=L[b]);const h=Object.keys(E);return M.sort!==!1&&h.sort(M.sort),h.map(b=>{const W=L[b];return W===void 0?"":W===null?_(b,M):Array.isArray(W)?W.length===0&&M.arrayFormat==="bracket-separator"?_(b,M)+"[]":W.reduce(T(b),[]).join("&"):_(b,M)+"="+_(W,M)}).filter(b=>b.length>0).join("&")},n.parseUrl=(L,M)=>{M=Object.assign({decode:!0},M);const[C,T]=i(L,"#");return Object.assign({url:C.split("?")[0]||"",query:ne(F(L),M)},M&&M.parseFragmentIdentifier&&T?{fragmentIdentifier:D(T,M)}:{})},n.stringifyUrl=(L,M)=>{M=Object.assign({encode:!0,strict:!0,[u]:!0},M);const C=x(L.url).split("?")[0]||"",T=n.extract(L.url),E=n.parse(T,{sort:!1}),h=Object.assign(E,L.query);let b=n.stringify(h,M);b&&(b=`?${b}`);let W=O(L.url);return L.fragmentIdentifier&&(W=`#${M[u]?_(L.fragmentIdentifier,M):L.fragmentIdentifier}`),`${C}${b}${W}`},n.pick=(L,M,C)=>{C=Object.assign({parseFragmentIdentifier:!0,[u]:!1},C);const{url:T,query:E,fragmentIdentifier:h}=n.parseUrl(L,C);return n.stringifyUrl({url:T,query:o(E,M),fragmentIdentifier:h},C)},n.exclude=(L,M,C)=>{const T=Array.isArray(M)?E=>!M.includes(E):(E,h)=>!M(E,h);return n.pick(L,T,C)}})(Is);const ZE={waku:{publish:"waku_publish",batchPublish:"waku_batchPublish",subscribe:"waku_subscribe",batchSubscribe:"waku_batchSubscribe",subscription:"waku_subscription",unsubscribe:"waku_unsubscribe",batchUnsubscribe:"waku_batchUnsubscribe"},irn:{publish:"irn_publish",batchPublish:"irn_batchPublish",subscribe:"irn_subscribe",batchSubscribe:"irn_batchSubscribe",subscription:"irn_subscription",unsubscribe:"irn_unsubscribe",batchUnsubscribe:"irn_batchUnsubscribe"},iridium:{publish:"iridium_publish",batchPublish:"iridium_batchPublish",subscribe:"iridium_subscribe",batchSubscribe:"iridium_batchSubscribe",subscription:"iridium_subscription",unsubscribe:"iridium_unsubscribe",batchUnsubscribe:"iridium_batchUnsubscribe"}},e3=":";function t3(n){const[e,t]=n.split(e3);return{namespace:e,reference:t}}function r3(n,e=[]){const t=[];return Object.keys(n).forEach(i=>{if(e.length&&!e.includes(i))return;const o=n[i];t.push(...o.accounts)}),t}function Pp(n,e){return n.includes(":")?[n]:e.chains||[]}const Cp="base10",hr="base16",Su="base64pad",eh="utf8",Ap=0,li=1,n3=0,jf=1,Iu=12,th=32;function i3(){const n=Yu.generateKeyPair();return{privateKey:lr(n.secretKey,hr),publicKey:lr(n.publicKey,hr)}}function xu(){const n=Bi.randomBytes(th);return lr(n,hr)}function s3(n,e){const t=Yu.sharedKey(wr(n,hr),wr(e,hr),!0),i=new kb(fa.SHA256,t).expand(th);return lr(i,hr)}function o3(n){const e=fa.hash(wr(n,hr));return lr(e,hr)}function Fi(n){const e=fa.hash(wr(n,eh));return lr(e,hr)}function a3(n){return wr(`${n}`,Cp)}function Ns(n){return Number(lr(n,Cp))}function c3(n){const e=a3(typeof n.type<"u"?n.type:Ap);if(Ns(e)===li&&typeof n.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");const t=typeof n.senderPublicKey<"u"?wr(n.senderPublicKey,hr):void 0,i=typeof n.iv<"u"?wr(n.iv,hr):Bi.randomBytes(Iu),o=new Wu.ChaCha20Poly1305(wr(n.symKey,hr)).seal(i,wr(n.message,eh));return h3({type:e,sealed:o,iv:i,senderPublicKey:t})}function u3(n){const e=new Wu.ChaCha20Poly1305(wr(n.symKey,hr)),{sealed:t,iv:i}=ta(n.encoded),o=e.open(i,t);if(o===null)throw new Error("Failed to decrypt");return lr(o,eh)}function h3(n){if(Ns(n.type)===li){if(typeof n.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");return lr(mu([n.type,n.senderPublicKey,n.iv,n.sealed]),Su)}return lr(mu([n.type,n.iv,n.sealed]),Su)}function ta(n){const e=wr(n,Su),t=e.slice(n3,jf),i=jf;if(Ns(t)===li){const f=i+th,g=f+Iu,p=e.slice(i,f),_=e.slice(f,g),D=e.slice(g);return{type:t,sealed:D,iv:_,senderPublicKey:p}}const o=i+Iu,c=e.slice(i,o),u=e.slice(o);return{type:t,sealed:u,iv:c}}function l3(n,e){const t=ta(n);return Tp({type:Ns(t.type),senderPublicKey:typeof t.senderPublicKey<"u"?lr(t.senderPublicKey,hr):void 0,receiverPublicKey:e==null?void 0:e.receiverPublicKey})}function Tp(n){const e=(n==null?void 0:n.type)||Ap;if(e===li){if(typeof(n==null?void 0:n.senderPublicKey)>"u")throw new Error("missing sender public key");if(typeof(n==null?void 0:n.receiverPublicKey)>"u")throw new Error("missing receiver public key")}return{type:e,senderPublicKey:n==null?void 0:n.senderPublicKey,receiverPublicKey:n==null?void 0:n.receiverPublicKey}}function Uf(n){return n.type===li&&typeof n.senderPublicKey=="string"&&typeof n.receiverPublicKey=="string"}var f3=Object.defineProperty,Mf=Object.getOwnPropertySymbols,d3=Object.prototype.hasOwnProperty,p3=Object.prototype.propertyIsEnumerable,qf=(n,e,t)=>e in n?f3(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,Ff=(n,e)=>{for(var t in e||(e={}))d3.call(e,t)&&qf(n,t,e[t]);if(Mf)for(var t of Mf(e))p3.call(e,t)&&qf(n,t,e[t]);return n};const g3="ReactNative",Cr={reactNative:"react-native",node:"node",browser:"browser",unknown:"unknown"},y3="js";function rh(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}function ki(){return!Qu()&&!!Xu()&&navigator.product===g3}function Ki(){return!rh()&&!!Xu()&&!!Qu()}function Ls(){return ki()?Cr.reactNative:rh()?Cr.node:Ki()?Cr.browser:Cr.unknown}function _3(){var n;try{return ki()&&typeof global<"u"&&typeof(global==null?void 0:global.Application)<"u"?(n=global.Application)==null?void 0:n.applicationId:void 0}catch{return}}function v3(n,e){let t=Is.parse(n);return t=Ff(Ff({},t),e),n=Is.stringify(t),n}function m3(){return xp()||{name:"",description:"",url:"",icons:[""]}}function b3(){if(Ls()===Cr.reactNative&&typeof global<"u"&&typeof(global==null?void 0:global.Platform)<"u"){const{OS:t,Version:i}=global.Platform;return[t,i].join("-")}const n=rE();if(n===null)return"unknown";const e=n.os?n.os.replace(" ","").toLowerCase():"unknown";return n.type==="browser"?[e,n.name,n.version].join("-"):[e,n.version].join("-")}function w3(){var n;const e=Ls();return e===Cr.browser?[e,((n=Ip())==null?void 0:n.host)||"unknown"].join(":"):e}function E3(n,e,t){const i=b3(),o=w3();return[[n,e].join("-"),[y3,t].join("-"),i,o].join("/")}function D3({protocol:n,version:e,relayUrl:t,sdkVersion:i,auth:o,projectId:c,useOnCloseEvent:u,bundleId:f}){const g=t.split("?"),p=E3(n,e,i),_={auth:o,ua:p,projectId:c,useOnCloseEvent:u||void 0,origin:f||void 0},D=v3(g[1]||"",_);return g[0]+"?"+D}function ai(n,e){return n.filter(t=>e.includes(t)).length===n.length}function Rp(n){return Object.fromEntries(n.entries())}function Np(n){return new Map(Object.entries(n))}function Ui(n=_e.FIVE_MINUTES,e){const t=_e.toMiliseconds(n||_e.FIVE_MINUTES);let i,o,c;return{resolve:u=>{c&&i&&(clearTimeout(c),i(u))},reject:u=>{c&&o&&(clearTimeout(c),o(u))},done:()=>new Promise((u,f)=>{c=setTimeout(()=>{f(new Error(e))},t),i=u,o=f})}}function xs(n,e,t){return new Promise(async(i,o)=>{const c=setTimeout(()=>o(new Error(t)),e);try{const u=await n;i(u)}catch(u){o(u)}clearTimeout(c)})}function Lp(n,e){if(typeof e=="string"&&e.startsWith(`${n}:`))return e;if(n.toLowerCase()==="topic"){if(typeof e!="string")throw new Error('Value must be "string" for expirer target type: topic');return`topic:${e}`}else if(n.toLowerCase()==="id"){if(typeof e!="number")throw new Error('Value must be "number" for expirer target type: id');return`id:${e}`}throw new Error(`Unknown expirer target type: ${n}`)}function S3(n){return Lp("topic",n)}function I3(n){return Lp("id",n)}function $p(n){const[e,t]=n.split(":"),i={id:void 0,topic:void 0};if(e==="topic"&&typeof t=="string")i.topic=t;else if(e==="id"&&Number.isInteger(Number(t)))i.id=Number(t);else throw new Error(`Invalid target, expected id:number or topic:string, got ${e}:${t}`);return i}function Pr(n,e){return _e.fromMiliseconds(Date.now()+_e.toMiliseconds(n))}function Mn(n){return Date.now()>=_e.toMiliseconds(n)}function $t(n,e){return`${n}${e?`:${e}`:""}`}function Jc(n=[],e=[]){return[...new Set([...n,...e])]}async function x3({id:n,topic:e,wcDeepLink:t}){try{if(!t)return;const i=typeof t=="string"?JSON.parse(t):t;let o=i==null?void 0:i.href;if(typeof o!="string")return;o.endsWith("/")&&(o=o.slice(0,-1));const c=`${o}/wc?requestId=${n}&sessionTopic=${e}`,u=Ls();u===Cr.browser?c.startsWith("https://")?window.open(c,"_blank","noreferrer noopener"):window.open(c,"_self","noreferrer noopener"):u===Cr.reactNative&&typeof(global==null?void 0:global.Linking)<"u"&&await global.Linking.openURL(c)}catch(i){console.error(i)}}async function O3(n,e){try{return await n.getItem(e)||(Ki()?localStorage.getItem(e):void 0)}catch(t){console.error(t)}}const P3="irn";function Ou(n){return(n==null?void 0:n.relay)||{protocol:P3}}function Jo(n){const e=ZE[n];if(typeof e>"u")throw new Error(`Relay Protocol not supported: ${n}`);return e}var C3=Object.defineProperty,A3=Object.defineProperties,T3=Object.getOwnPropertyDescriptors,zf=Object.getOwnPropertySymbols,R3=Object.prototype.hasOwnProperty,N3=Object.prototype.propertyIsEnumerable,Bf=(n,e,t)=>e in n?C3(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,L3=(n,e)=>{for(var t in e||(e={}))R3.call(e,t)&&Bf(n,t,e[t]);if(zf)for(var t of zf(e))N3.call(e,t)&&Bf(n,t,e[t]);return n},$3=(n,e)=>A3(n,T3(e));function j3(n,e="-"){const t={},i="relay"+e;return Object.keys(n).forEach(o=>{if(o.startsWith(i)){const c=o.replace(i,""),u=n[o];t[c]=u}}),t}function Hf(n){n=n.includes("wc://")?n.replace("wc://",""):n,n=n.includes("wc:")?n.replace("wc:",""):n;const e=n.indexOf(":"),t=n.indexOf("?")!==-1?n.indexOf("?"):void 0,i=n.substring(0,e),o=n.substring(e+1,t).split("@"),c=typeof t<"u"?n.substring(t):"",u=Is.parse(c);return{protocol:i,topic:U3(o[0]),version:parseInt(o[1],10),symKey:u.symKey,relay:j3(u),expiryTimestamp:u.expiryTimestamp?parseInt(u.expiryTimestamp,10):void 0}}function U3(n){return n.startsWith("//")?n.substring(2):n}function M3(n,e="-"){const t="relay",i={};return Object.keys(n).forEach(o=>{const c=t+e+o;n[o]&&(i[c]=n[o])}),i}function q3(n){return`${n.protocol}:${n.topic}@${n.version}?`+Is.stringify($3(L3({symKey:n.symKey},M3(n.relay)),{expiryTimestamp:n.expiryTimestamp}))}function Vi(n){const e=[];return n.forEach(t=>{const[i,o]=t.split(":");e.push(`${i}:${o}`)}),e}function F3(n){const e=[];return Object.values(n).forEach(t=>{e.push(...Vi(t.accounts))}),e}function z3(n,e){const t=[];return Object.values(n).forEach(i=>{Vi(i.accounts).includes(e)&&t.push(...i.methods)}),t}function B3(n,e){const t=[];return Object.values(n).forEach(i=>{Vi(i.accounts).includes(e)&&t.push(...i.events)}),t}function nh(n){return n.includes(":")}function bs(n){return nh(n)?n.split(":")[0]:n}const H3={INVALID_METHOD:{message:"Invalid method.",code:1001},INVALID_EVENT:{message:"Invalid event.",code:1002},INVALID_UPDATE_REQUEST:{message:"Invalid update request.",code:1003},INVALID_EXTEND_REQUEST:{message:"Invalid extend request.",code:1004},INVALID_SESSION_SETTLE_REQUEST:{message:"Invalid session settle request.",code:1005},UNAUTHORIZED_METHOD:{message:"Unauthorized method.",code:3001},UNAUTHORIZED_EVENT:{message:"Unauthorized event.",code:3002},UNAUTHORIZED_UPDATE_REQUEST:{message:"Unauthorized update request.",code:3003},UNAUTHORIZED_EXTEND_REQUEST:{message:"Unauthorized extend request.",code:3004},USER_REJECTED:{message:"User rejected.",code:5e3},USER_REJECTED_CHAINS:{message:"User rejected chains.",code:5001},USER_REJECTED_METHODS:{message:"User rejected methods.",code:5002},USER_REJECTED_EVENTS:{message:"User rejected events.",code:5003},UNSUPPORTED_CHAINS:{message:"Unsupported chains.",code:5100},UNSUPPORTED_METHODS:{message:"Unsupported methods.",code:5101},UNSUPPORTED_EVENTS:{message:"Unsupported events.",code:5102},UNSUPPORTED_ACCOUNTS:{message:"Unsupported accounts.",code:5103},UNSUPPORTED_NAMESPACE_KEY:{message:"Unsupported namespace key.",code:5104},USER_DISCONNECTED:{message:"User disconnected.",code:6e3},SESSION_SETTLEMENT_FAILED:{message:"Session settlement failed.",code:7e3},WC_METHOD_UNSUPPORTED:{message:"Unsupported wc_ method.",code:10001}},k3={NOT_INITIALIZED:{message:"Not initialized.",code:1},NO_MATCHING_KEY:{message:"No matching key.",code:2},RESTORE_WILL_OVERRIDE:{message:"Restore will override.",code:3},RESUBSCRIBED:{message:"Resubscribed.",code:4},MISSING_OR_INVALID:{message:"Missing or invalid.",code:5},EXPIRED:{message:"Expired.",code:6},UNKNOWN_TYPE:{message:"Unknown type.",code:7},MISMATCHED_TOPIC:{message:"Mismatched topic.",code:8},NON_CONFORMING_NAMESPACES:{message:"Non conforming namespaces.",code:9}};function ce(n,e){const{message:t,code:i}=k3[n];return{message:e?`${t} ${e}`:t,code:i}}function bt(n,e){const{message:t,code:i}=H3[n];return{message:e?`${t} ${e}`:t,code:i}}function on(n,e){return!!Array.isArray(n)}function Os(n){return Object.getPrototypeOf(n)===Object.prototype&&Object.keys(n).length}function br(n){return typeof n>"u"}function Gt(n,e){return e&&br(n)?!0:typeof n=="string"&&!!n.trim().length}function ih(n,e){return typeof n=="number"&&!isNaN(n)}function K3(n,e){const{requiredNamespaces:t}=e,i=Object.keys(n.namespaces),o=Object.keys(t);let c=!0;return ai(o,i)?(i.forEach(u=>{const{accounts:f,methods:g,events:p}=n.namespaces[u],_=Vi(f),D=t[u];(!ai(Pp(u,D),_)||!ai(D.methods,g)||!ai(D.events,p))&&(c=!1)}),c):!1}function ra(n){return Gt(n,!1)&&n.includes(":")?n.split(":").length===2:!1}function V3(n){if(Gt(n,!1)&&n.includes(":")){const e=n.split(":");if(e.length===3){const t=e[0]+":"+e[1];return!!e[2]&&ra(t)}}return!1}function W3(n){if(Gt(n,!1))try{return typeof new URL(n)<"u"}catch{return!1}return!1}function G3(n){var e;return(e=n==null?void 0:n.proposer)==null?void 0:e.publicKey}function Y3(n){return n==null?void 0:n.topic}function J3(n,e){let t=null;return Gt(n==null?void 0:n.publicKey,!1)||(t=ce("MISSING_OR_INVALID",`${e} controller public key should be a string`)),t}function kf(n){let e=!0;return on(n)?n.length&&(e=n.every(t=>Gt(t,!1))):e=!1,e}function Q3(n,e,t){let i=null;return on(e)&&e.length?e.forEach(o=>{i||ra(o)||(i=bt("UNSUPPORTED_CHAINS",`${t}, chain ${o} should be a string and conform to "namespace:chainId" format`))}):ra(n)||(i=bt("UNSUPPORTED_CHAINS",`${t}, chains must be defined as "namespace:chainId" e.g. "eip155:1": {...} in the namespace key OR as an array of CAIP-2 chainIds e.g. eip155: { chains: ["eip155:1", "eip155:5"] }`)),i}function X3(n,e,t){let i=null;return Object.entries(n).forEach(([o,c])=>{if(i)return;const u=Q3(o,Pp(o,c),`${e} ${t}`);u&&(i=u)}),i}function Z3(n,e){let t=null;return on(n)?n.forEach(i=>{t||V3(i)||(t=bt("UNSUPPORTED_ACCOUNTS",`${e}, account ${i} should be a string and conform to "namespace:chainId:address" format`))}):t=bt("UNSUPPORTED_ACCOUNTS",`${e}, accounts should be an array of strings conforming to "namespace:chainId:address" format`),t}function eD(n,e){let t=null;return Object.values(n).forEach(i=>{if(t)return;const o=Z3(i==null?void 0:i.accounts,`${e} namespace`);o&&(t=o)}),t}function tD(n,e){let t=null;return kf(n==null?void 0:n.methods)?kf(n==null?void 0:n.events)||(t=bt("UNSUPPORTED_EVENTS",`${e}, events should be an array of strings or empty array for no events`)):t=bt("UNSUPPORTED_METHODS",`${e}, methods should be an array of strings or empty array for no methods`),t}function jp(n,e){let t=null;return Object.values(n).forEach(i=>{if(t)return;const o=tD(i,`${e}, namespace`);o&&(t=o)}),t}function rD(n,e,t){let i=null;if(n&&Os(n)){const o=jp(n,e);o&&(i=o);const c=X3(n,e,t);c&&(i=c)}else i=ce("MISSING_OR_INVALID",`${e}, ${t} should be an object with data`);return i}function Qc(n,e){let t=null;if(n&&Os(n)){const i=jp(n,e);i&&(t=i);const o=eD(n,e);o&&(t=o)}else t=ce("MISSING_OR_INVALID",`${e}, namespaces should be an object with data`);return t}function Up(n){return Gt(n.protocol,!0)}function nD(n,e){let t=!1;return n?n&&on(n)&&n.length&&n.forEach(i=>{t=Up(i)}):t=!0,t}function iD(n){return typeof n=="number"}function mr(n){return typeof n<"u"&&typeof n!==null}function sD(n){return!(!n||typeof n!="object"||!n.code||!ih(n.code)||!n.message||!Gt(n.message,!1))}function oD(n){return!(br(n)||!Gt(n.method,!1))}function aD(n){return!(br(n)||br(n.result)&&br(n.error)||!ih(n.id)||!Gt(n.jsonrpc,!1))}function cD(n){return!(br(n)||!Gt(n.name,!1))}function Kf(n,e){return!(!ra(e)||!F3(n).includes(e))}function uD(n,e,t){return Gt(t,!1)?z3(n,e).includes(t):!1}function hD(n,e,t){return Gt(t,!1)?B3(n,e).includes(t):!1}function Vf(n,e,t){let i=null;const o=lD(n),c=fD(e),u=Object.keys(o),f=Object.keys(c),g=Wf(Object.keys(n)),p=Wf(Object.keys(e)),_=g.filter(D=>!p.includes(D));return _.length&&(i=ce("NON_CONFORMING_NAMESPACES",`${t} namespaces keys don't satisfy requiredNamespaces.
      Required: ${_.toString()}
      Received: ${Object.keys(e).toString()}`)),ai(u,f)||(i=ce("NON_CONFORMING_NAMESPACES",`${t} namespaces chains don't satisfy required namespaces.
      Required: ${u.toString()}
      Approved: ${f.toString()}`)),Object.keys(e).forEach(D=>{if(!D.includes(":")||i)return;const S=Vi(e[D].accounts);S.includes(D)||(i=ce("NON_CONFORMING_NAMESPACES",`${t} namespaces accounts don't satisfy namespace accounts for ${D}
        Required: ${D}
        Approved: ${S.toString()}`))}),u.forEach(D=>{i||(ai(o[D].methods,c[D].methods)?ai(o[D].events,c[D].events)||(i=ce("NON_CONFORMING_NAMESPACES",`${t} namespaces events don't satisfy namespace events for ${D}`)):i=ce("NON_CONFORMING_NAMESPACES",`${t} namespaces methods don't satisfy namespace methods for ${D}`))}),i}function lD(n){const e={};return Object.keys(n).forEach(t=>{var i;t.includes(":")?e[t]=n[t]:(i=n[t].chains)==null||i.forEach(o=>{e[o]={methods:n[t].methods,events:n[t].events}})}),e}function Wf(n){return[...new Set(n.map(e=>e.includes(":")?e.split(":")[0]:e))]}function fD(n){const e={};return Object.keys(n).forEach(t=>{if(t.includes(":"))e[t]=n[t];else{const i=Vi(n[t].accounts);i==null||i.forEach(o=>{e[o]={accounts:n[t].accounts.filter(c=>c.includes(`${o}:`)),methods:n[t].methods,events:n[t].events}})}}),e}function dD(n,e){return ih(n)&&n<=e.max&&n>=e.min}function Gf(){const n=Ls();return new Promise(e=>{switch(n){case Cr.browser:e(pD());break;case Cr.reactNative:e(gD());break;case Cr.node:e(yD());break;default:e(!0)}})}function pD(){return Ki()&&(navigator==null?void 0:navigator.onLine)}async function gD(){if(ki()&&typeof global<"u"&&global!=null&&global.NetInfo){const n=await(global==null?void 0:global.NetInfo.fetch());return n==null?void 0:n.isConnected}return!0}function yD(){return!0}function _D(n){switch(Ls()){case Cr.browser:vD(n);break;case Cr.reactNative:mD(n);break}}function vD(n){!ki()&&Ki()&&(window.addEventListener("online",()=>n(!0)),window.addEventListener("offline",()=>n(!1)))}function mD(n){ki()&&typeof global<"u"&&global!=null&&global.NetInfo&&(global==null||global.NetInfo.addEventListener(e=>n(e==null?void 0:e.isConnected)))}const Xc={};let Ho=class{static get(e){return Xc[e]}static set(e,t){Xc[e]=t}static delete(e){delete Xc[e]}};const bD=/"(?:_|\\u0{2}5[Ff]){2}(?:p|\\u0{2}70)(?:r|\\u0{2}72)(?:o|\\u0{2}6[Ff])(?:t|\\u0{2}74)(?:o|\\u0{2}6[Ff])(?:_|\\u0{2}5[Ff]){2}"\s*:/,wD=/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/,ED=/^\s*["[{]|^\s*-?\d{1,16}(\.\d{1,17})?([Ee][+-]?\d+)?\s*$/;function DD(n,e){if(n==="__proto__"||n==="constructor"&&e&&typeof e=="object"&&"prototype"in e){SD(n);return}return e}function SD(n){console.warn(`[destr] Dropping "${n}" key to prevent prototype pollution.`)}function ko(n,e={}){if(typeof n!="string")return n;const t=n.trim();if(n[0]==='"'&&n.endsWith('"')&&!n.includes("\\"))return t.slice(1,-1);if(t.length<=9){const i=t.toLowerCase();if(i==="true")return!0;if(i==="false")return!1;if(i==="undefined")return;if(i==="null")return null;if(i==="nan")return Number.NaN;if(i==="infinity")return Number.POSITIVE_INFINITY;if(i==="-infinity")return Number.NEGATIVE_INFINITY}if(!ED.test(n)){if(e.strict)throw new SyntaxError("[destr] Invalid JSON");return n}try{if(bD.test(n)||wD.test(n)){if(e.strict)throw new Error("[destr] Possible prototype pollution");return JSON.parse(n,DD)}return JSON.parse(n)}catch(i){if(e.strict)throw i;return n}}function ID(n){return!n||typeof n.then!="function"?Promise.resolve(n):n}function Wt(n,...e){try{return ID(n(...e))}catch(t){return Promise.reject(t)}}function xD(n){const e=typeof n;return n===null||e!=="object"&&e!=="function"}function OD(n){const e=Object.getPrototypeOf(n);return!e||e.isPrototypeOf(Object)}function Qo(n){if(xD(n))return String(n);if(OD(n)||Array.isArray(n))return JSON.stringify(n);if(typeof n.toJSON=="function")return Qo(n.toJSON());throw new Error("[unstorage] Cannot stringify value!")}function Mp(){if(typeof Buffer===void 0)throw new TypeError("[unstorage] Buffer is not supported!")}const Pu="base64:";function PD(n){if(typeof n=="string")return n;Mp();const e=Buffer.from(n).toString("base64");return Pu+e}function CD(n){return typeof n!="string"||!n.startsWith(Pu)?n:(Mp(),Buffer.from(n.slice(Pu.length),"base64"))}function vr(n){return n?n.split("?")[0].replace(/[/\\]/g,":").replace(/:+/g,":").replace(/^:|:$/g,""):""}function AD(...n){return vr(n.join(":"))}function Ko(n){return n=vr(n),n?n+":":""}const TD="memory",RD=()=>{const n=new Map;return{name:TD,options:{},hasItem(e){return n.has(e)},getItem(e){return n.get(e)??null},getItemRaw(e){return n.get(e)??null},setItem(e,t){n.set(e,t)},setItemRaw(e,t){n.set(e,t)},removeItem(e){n.delete(e)},getKeys(){return Array.from(n.keys())},clear(){n.clear()},dispose(){n.clear()}}};function ND(n={}){const e={mounts:{"":n.driver||RD()},mountpoints:[""],watching:!1,watchListeners:[],unwatch:{}},t=p=>{for(const _ of e.mountpoints)if(p.startsWith(_))return{base:_,relativeKey:p.slice(_.length),driver:e.mounts[_]};return{base:"",relativeKey:p,driver:e.mounts[""]}},i=(p,_)=>e.mountpoints.filter(D=>D.startsWith(p)||_&&p.startsWith(D)).map(D=>({relativeBase:p.length>D.length?p.slice(D.length):void 0,mountpoint:D,driver:e.mounts[D]})),o=(p,_)=>{if(e.watching){_=vr(_);for(const D of e.watchListeners)D(p,_)}},c=async()=>{if(!e.watching){e.watching=!0;for(const p in e.mounts)e.unwatch[p]=await Yf(e.mounts[p],o,p)}},u=async()=>{if(e.watching){for(const p in e.unwatch)await e.unwatch[p]();e.unwatch={},e.watching=!1}},f=(p,_,D)=>{const S=new Map,x=O=>{let F=S.get(O.base);return F||(F={driver:O.driver,base:O.base,items:[]},S.set(O.base,F)),F};for(const O of p){const F=typeof O=="string",H=vr(F?O:O.key),ne=F?void 0:O.value,L=F||!O.options?_:{..._,...O.options},M=t(H);x(M).items.push({key:H,value:ne,relativeKey:M.relativeKey,options:L})}return Promise.all([...S.values()].map(O=>D(O))).then(O=>O.flat())},g={hasItem(p,_={}){p=vr(p);const{relativeKey:D,driver:S}=t(p);return Wt(S.hasItem,D,_)},getItem(p,_={}){p=vr(p);const{relativeKey:D,driver:S}=t(p);return Wt(S.getItem,D,_).then(x=>ko(x))},getItems(p,_){return f(p,_,D=>D.driver.getItems?Wt(D.driver.getItems,D.items.map(S=>({key:S.relativeKey,options:S.options})),_).then(S=>S.map(x=>({key:AD(D.base,x.key),value:ko(x.value)}))):Promise.all(D.items.map(S=>Wt(D.driver.getItem,S.relativeKey,S.options).then(x=>({key:S.key,value:ko(x)})))))},getItemRaw(p,_={}){p=vr(p);const{relativeKey:D,driver:S}=t(p);return S.getItemRaw?Wt(S.getItemRaw,D,_):Wt(S.getItem,D,_).then(x=>CD(x))},async setItem(p,_,D={}){if(_===void 0)return g.removeItem(p);p=vr(p);const{relativeKey:S,driver:x}=t(p);x.setItem&&(await Wt(x.setItem,S,Qo(_),D),x.watch||o("update",p))},async setItems(p,_){await f(p,_,async D=>{if(D.driver.setItems)return Wt(D.driver.setItems,D.items.map(S=>({key:S.relativeKey,value:Qo(S.value),options:S.options})),_);D.driver.setItem&&await Promise.all(D.items.map(S=>Wt(D.driver.setItem,S.relativeKey,Qo(S.value),S.options)))})},async setItemRaw(p,_,D={}){if(_===void 0)return g.removeItem(p,D);p=vr(p);const{relativeKey:S,driver:x}=t(p);if(x.setItemRaw)await Wt(x.setItemRaw,S,_,D);else if(x.setItem)await Wt(x.setItem,S,PD(_),D);else return;x.watch||o("update",p)},async removeItem(p,_={}){typeof _=="boolean"&&(_={removeMeta:_}),p=vr(p);const{relativeKey:D,driver:S}=t(p);S.removeItem&&(await Wt(S.removeItem,D,_),(_.removeMeta||_.removeMata)&&await Wt(S.removeItem,D+"$",_),S.watch||o("remove",p))},async getMeta(p,_={}){typeof _=="boolean"&&(_={nativeOnly:_}),p=vr(p);const{relativeKey:D,driver:S}=t(p),x=Object.create(null);if(S.getMeta&&Object.assign(x,await Wt(S.getMeta,D,_)),!_.nativeOnly){const O=await Wt(S.getItem,D+"$",_).then(F=>ko(F));O&&typeof O=="object"&&(typeof O.atime=="string"&&(O.atime=new Date(O.atime)),typeof O.mtime=="string"&&(O.mtime=new Date(O.mtime)),Object.assign(x,O))}return x},setMeta(p,_,D={}){return this.setItem(p+"$",_,D)},removeMeta(p,_={}){return this.removeItem(p+"$",_)},async getKeys(p,_={}){p=Ko(p);const D=i(p,!0);let S=[];const x=[];for(const O of D){const H=(await Wt(O.driver.getKeys,O.relativeBase,_)).map(ne=>O.mountpoint+vr(ne)).filter(ne=>!S.some(L=>ne.startsWith(L)));x.push(...H),S=[O.mountpoint,...S.filter(ne=>!ne.startsWith(O.mountpoint))]}return p?x.filter(O=>O.startsWith(p)&&!O.endsWith("$")):x.filter(O=>!O.endsWith("$"))},async clear(p,_={}){p=Ko(p),await Promise.all(i(p,!1).map(async D=>{if(D.driver.clear)return Wt(D.driver.clear,D.relativeBase,_);if(D.driver.removeItem){const S=await D.driver.getKeys(D.relativeBase||"",_);return Promise.all(S.map(x=>D.driver.removeItem(x,_)))}}))},async dispose(){await Promise.all(Object.values(e.mounts).map(p=>Jf(p)))},async watch(p){return await c(),e.watchListeners.push(p),async()=>{e.watchListeners=e.watchListeners.filter(_=>_!==p),e.watchListeners.length===0&&await u()}},async unwatch(){e.watchListeners=[],await u()},mount(p,_){if(p=Ko(p),p&&e.mounts[p])throw new Error(`already mounted at ${p}`);return p&&(e.mountpoints.push(p),e.mountpoints.sort((D,S)=>S.length-D.length)),e.mounts[p]=_,e.watching&&Promise.resolve(Yf(_,o,p)).then(D=>{e.unwatch[p]=D}).catch(console.error),g},async unmount(p,_=!0){p=Ko(p),!(!p||!e.mounts[p])&&(e.watching&&p in e.unwatch&&(e.unwatch[p](),delete e.unwatch[p]),_&&await Jf(e.mounts[p]),e.mountpoints=e.mountpoints.filter(D=>D!==p),delete e.mounts[p])},getMount(p=""){p=vr(p)+":";const _=t(p);return{driver:_.driver,base:_.base}},getMounts(p="",_={}){return p=vr(p),i(p,_.parents).map(S=>({driver:S.driver,base:S.mountpoint}))}};return g}function Yf(n,e,t){return n.watch?n.watch((i,o)=>e(i,t+o)):()=>{}}async function Jf(n){typeof n.dispose=="function"&&await Wt(n.dispose)}function fi(n){return new Promise((e,t)=>{n.oncomplete=n.onsuccess=()=>e(n.result),n.onabort=n.onerror=()=>t(n.error)})}function qp(n,e){const t=indexedDB.open(n);t.onupgradeneeded=()=>t.result.createObjectStore(e);const i=fi(t);return(o,c)=>i.then(u=>c(u.transaction(e,o).objectStore(e)))}let Zc;function $s(){return Zc||(Zc=qp("keyval-store","keyval")),Zc}function Qf(n,e=$s()){return e("readonly",t=>fi(t.get(n)))}function LD(n,e,t=$s()){return t("readwrite",i=>(i.put(e,n),fi(i.transaction)))}function $D(n,e=$s()){return e("readwrite",t=>(t.delete(n),fi(t.transaction)))}function jD(n=$s()){return n("readwrite",e=>(e.clear(),fi(e.transaction)))}function UD(n,e){return n.openCursor().onsuccess=function(){this.result&&(e(this.result),this.result.continue())},fi(n.transaction)}function MD(n=$s()){return n("readonly",e=>{if(e.getAllKeys)return fi(e.getAllKeys());const t=[];return UD(e,i=>t.push(i.key)).then(()=>t)})}const qD=n=>JSON.stringify(n,(e,t)=>typeof t=="bigint"?t.toString()+"n":t),FD=n=>{const e=/([\[:])?(\d{17,}|(?:[9](?:[1-9]07199254740991|0[1-9]7199254740991|00[8-9]199254740991|007[2-9]99254740991|007199[3-9]54740991|0071992[6-9]4740991|00719925[5-9]740991|007199254[8-9]40991|0071992547[5-9]0991|00719925474[1-9]991|00719925474099[2-9])))([,\}\]])/g,t=n.replace(e,'$1"$2n"$3');return JSON.parse(t,(i,o)=>typeof o=="string"&&o.match(/^\d+n$/)?BigInt(o.substring(0,o.length-1)):o)};function js(n){if(typeof n!="string")throw new Error(`Cannot safe json parse value of type ${typeof n}`);try{return FD(n)}catch{return n}}function ci(n){return typeof n=="string"?n:qD(n)||""}const zD="idb-keyval";var BD=(n={})=>{const e=n.base&&n.base.length>0?`${n.base}:`:"",t=o=>e+o;let i;return n.dbName&&n.storeName&&(i=qp(n.dbName,n.storeName)),{name:zD,options:n,async hasItem(o){return!(typeof await Qf(t(o),i)>"u")},async getItem(o){return await Qf(t(o),i)??null},setItem(o,c){return LD(t(o),c,i)},removeItem(o){return $D(t(o),i)},getKeys(){return MD(i)},clear(){return jD(i)}}};const HD="WALLET_CONNECT_V2_INDEXED_DB",kD="keyvaluestorage";let KD=class{constructor(){this.indexedDb=ND({driver:BD({dbName:HD,storeName:kD})})}async getKeys(){return this.indexedDb.getKeys()}async getEntries(){return(await this.indexedDb.getItems(await this.indexedDb.getKeys())).map(e=>[e.key,e.value])}async getItem(e){const t=await this.indexedDb.getItem(e);if(t!==null)return t}async setItem(e,t){await this.indexedDb.setItem(e,ci(t))}async removeItem(e){await this.indexedDb.removeItem(e)}};var eu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Xo={exports:{}};(function(){let n;function e(){}n=e,n.prototype.getItem=function(t){return this.hasOwnProperty(t)?String(this[t]):null},n.prototype.setItem=function(t,i){this[t]=String(i)},n.prototype.removeItem=function(t){delete this[t]},n.prototype.clear=function(){const t=this;Object.keys(t).forEach(function(i){t[i]=void 0,delete t[i]})},n.prototype.key=function(t){return t=t||0,Object.keys(this)[t]},n.prototype.__defineGetter__("length",function(){return Object.keys(this).length}),typeof eu<"u"&&eu.localStorage?Xo.exports=eu.localStorage:typeof window<"u"&&window.localStorage?Xo.exports=window.localStorage:Xo.exports=new e})();function VD(n){var e;return[n[0],js((e=n[1])!=null?e:"")]}class WD{constructor(){this.localStorage=Xo.exports}async getKeys(){return Object.keys(this.localStorage)}async getEntries(){return Object.entries(this.localStorage).map(VD)}async getItem(e){const t=this.localStorage.getItem(e);if(t!==null)return js(t)}async setItem(e,t){this.localStorage.setItem(e,ci(t))}async removeItem(e){this.localStorage.removeItem(e)}}const GD="wc_storage_version",Xf=1,YD=async(n,e,t)=>{const i=GD,o=await e.getItem(i);if(o&&o>=Xf){t(e);return}const c=await n.getKeys();if(!c.length){t(e);return}const u=[];for(;c.length;){const f=c.shift();if(!f)continue;const g=f.toLowerCase();if(g.includes("wc@")||g.includes("walletconnect")||g.includes("wc_")||g.includes("wallet_connect")){const p=await n.getItem(f);await e.setItem(f,p),u.push(f)}}await e.setItem(i,Xf),t(e),JD(n,u)},JD=async(n,e)=>{e.length&&e.forEach(async t=>{await n.removeItem(t)})};let QD=class{constructor(){this.initialized=!1,this.setInitialized=t=>{this.storage=t,this.initialized=!0};const e=new WD;this.storage=e;try{const t=new KD;YD(e,t,this.setInitialized)}catch{this.initialized=!0}}async getKeys(){return await this.initialize(),this.storage.getKeys()}async getEntries(){return await this.initialize(),this.storage.getEntries()}async getItem(e){return await this.initialize(),this.storage.getItem(e)}async setItem(e,t){return await this.initialize(),this.storage.setItem(e,t)}async removeItem(e){return await this.initialize(),this.storage.removeItem(e)}async initialize(){this.initialized||await new Promise(e=>{const t=setInterval(()=>{this.initialized&&(clearInterval(t),e())},20)})}};var Wi={};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Cu=function(n,e){return Cu=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var o in i)i.hasOwnProperty(o)&&(t[o]=i[o])},Cu(n,e)};function XD(n,e){Cu(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var Au=function(){return Au=Object.assign||function(e){for(var t,i=1,o=arguments.length;i<o;i++){t=arguments[i];for(var c in t)Object.prototype.hasOwnProperty.call(t,c)&&(e[c]=t[c])}return e},Au.apply(this,arguments)};function ZD(n,e){var t={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(n);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(n,i[o])&&(t[i[o]]=n[i[o]]);return t}function eS(n,e,t,i){var o=arguments.length,c=o<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,u;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")c=Reflect.decorate(n,e,t,i);else for(var f=n.length-1;f>=0;f--)(u=n[f])&&(c=(o<3?u(c):o>3?u(e,t,c):u(e,t))||c);return o>3&&c&&Object.defineProperty(e,t,c),c}function tS(n,e){return function(t,i){e(t,i,n)}}function rS(n,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(n,e)}function nS(n,e,t,i){function o(c){return c instanceof t?c:new t(function(u){u(c)})}return new(t||(t=Promise))(function(c,u){function f(_){try{p(i.next(_))}catch(D){u(D)}}function g(_){try{p(i.throw(_))}catch(D){u(D)}}function p(_){_.done?c(_.value):o(_.value).then(f,g)}p((i=i.apply(n,e||[])).next())})}function iS(n,e){var t={label:0,sent:function(){if(c[0]&1)throw c[1];return c[1]},trys:[],ops:[]},i,o,c,u;return u={next:f(0),throw:f(1),return:f(2)},typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function f(p){return function(_){return g([p,_])}}function g(p){if(i)throw new TypeError("Generator is already executing.");for(;t;)try{if(i=1,o&&(c=p[0]&2?o.return:p[0]?o.throw||((c=o.return)&&c.call(o),0):o.next)&&!(c=c.call(o,p[1])).done)return c;switch(o=0,c&&(p=[p[0]&2,c.value]),p[0]){case 0:case 1:c=p;break;case 4:return t.label++,{value:p[1],done:!1};case 5:t.label++,o=p[1],p=[0];continue;case 7:p=t.ops.pop(),t.trys.pop();continue;default:if(c=t.trys,!(c=c.length>0&&c[c.length-1])&&(p[0]===6||p[0]===2)){t=0;continue}if(p[0]===3&&(!c||p[1]>c[0]&&p[1]<c[3])){t.label=p[1];break}if(p[0]===6&&t.label<c[1]){t.label=c[1],c=p;break}if(c&&t.label<c[2]){t.label=c[2],t.ops.push(p);break}c[2]&&t.ops.pop(),t.trys.pop();continue}p=e.call(n,t)}catch(_){p=[6,_],o=0}finally{i=c=0}if(p[0]&5)throw p[1];return{value:p[0]?p[1]:void 0,done:!0}}}function sS(n,e,t,i){i===void 0&&(i=t),n[i]=e[t]}function oS(n,e){for(var t in n)t!=="default"&&!e.hasOwnProperty(t)&&(e[t]=n[t])}function Tu(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],i=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&i>=n.length&&(n=void 0),{value:n&&n[i++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Fp(n,e){var t=typeof Symbol=="function"&&n[Symbol.iterator];if(!t)return n;var i=t.call(n),o,c=[],u;try{for(;(e===void 0||e-- >0)&&!(o=i.next()).done;)c.push(o.value)}catch(f){u={error:f}}finally{try{o&&!o.done&&(t=i.return)&&t.call(i)}finally{if(u)throw u.error}}return c}function aS(){for(var n=[],e=0;e<arguments.length;e++)n=n.concat(Fp(arguments[e]));return n}function cS(){for(var n=0,e=0,t=arguments.length;e<t;e++)n+=arguments[e].length;for(var i=Array(n),o=0,e=0;e<t;e++)for(var c=arguments[e],u=0,f=c.length;u<f;u++,o++)i[o]=c[u];return i}function Ps(n){return this instanceof Ps?(this.v=n,this):new Ps(n)}function uS(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=t.apply(n,e||[]),o,c=[];return o={},u("next"),u("throw"),u("return"),o[Symbol.asyncIterator]=function(){return this},o;function u(S){i[S]&&(o[S]=function(x){return new Promise(function(O,F){c.push([S,x,O,F])>1||f(S,x)})})}function f(S,x){try{g(i[S](x))}catch(O){D(c[0][3],O)}}function g(S){S.value instanceof Ps?Promise.resolve(S.value.v).then(p,_):D(c[0][2],S)}function p(S){f("next",S)}function _(S){f("throw",S)}function D(S,x){S(x),c.shift(),c.length&&f(c[0][0],c[0][1])}}function hS(n){var e,t;return e={},i("next"),i("throw",function(o){throw o}),i("return"),e[Symbol.iterator]=function(){return this},e;function i(o,c){e[o]=n[o]?function(u){return(t=!t)?{value:Ps(n[o](u)),done:o==="return"}:c?c(u):u}:c}}function lS(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof Tu=="function"?Tu(n):n[Symbol.iterator](),t={},i("next"),i("throw"),i("return"),t[Symbol.asyncIterator]=function(){return this},t);function i(c){t[c]=n[c]&&function(u){return new Promise(function(f,g){u=n[c](u),o(f,g,u.done,u.value)})}}function o(c,u,f,g){Promise.resolve(g).then(function(p){c({value:p,done:f})},u)}}function fS(n,e){return Object.defineProperty?Object.defineProperty(n,"raw",{value:e}):n.raw=e,n}function dS(n){if(n&&n.__esModule)return n;var e={};if(n!=null)for(var t in n)Object.hasOwnProperty.call(n,t)&&(e[t]=n[t]);return e.default=n,e}function pS(n){return n&&n.__esModule?n:{default:n}}function gS(n,e){if(!e.has(n))throw new TypeError("attempted to get private field on non-instance");return e.get(n)}function yS(n,e,t){if(!e.has(n))throw new TypeError("attempted to set private field on non-instance");return e.set(n,t),t}const _S=Object.freeze(Object.defineProperty({__proto__:null,get __assign(){return Au},__asyncDelegator:hS,__asyncGenerator:uS,__asyncValues:lS,__await:Ps,__awaiter:nS,__classPrivateFieldGet:gS,__classPrivateFieldSet:yS,__createBinding:sS,__decorate:eS,__exportStar:oS,__extends:XD,__generator:iS,__importDefault:pS,__importStar:dS,__makeTemplateObject:fS,__metadata:rS,__param:tS,__read:Fp,__rest:ZD,__spread:aS,__spreadArrays:cS,__values:Tu},Symbol.toStringTag,{value:"Module"})),ga=ui(_S);var gs={},tu={},ys={};let di=class{};const vS=Object.freeze(Object.defineProperty({__proto__:null,IEvents:di},Symbol.toStringTag,{value:"Module"})),mS=ui(vS);var Zf;function bS(){if(Zf)return ys;Zf=1,Object.defineProperty(ys,"__esModule",{value:!0}),ys.IHeartBeat=void 0;const n=mS;class e extends n.IEvents{constructor(i){super()}}return ys.IHeartBeat=e,ys}var ed;function zp(){return ed||(ed=1,function(n){Object.defineProperty(n,"__esModule",{value:!0}),ga.__exportStar(bS(),n)}(tu)),tu}var ru={},si={},td;function wS(){if(td)return si;td=1,Object.defineProperty(si,"__esModule",{value:!0}),si.HEARTBEAT_EVENTS=si.HEARTBEAT_INTERVAL=void 0;const n=_e;return si.HEARTBEAT_INTERVAL=n.FIVE_SECONDS,si.HEARTBEAT_EVENTS={pulse:"heartbeat_pulse"},si}var rd;function Bp(){return rd||(rd=1,function(n){Object.defineProperty(n,"__esModule",{value:!0}),ga.__exportStar(wS(),n)}(ru)),ru}var nd;function ES(){if(nd)return gs;nd=1,Object.defineProperty(gs,"__esModule",{value:!0}),gs.HeartBeat=void 0;const n=ga,e=Ar,t=_e,i=zp(),o=Bp();class c extends i.IHeartBeat{constructor(f){super(f),this.events=new e.EventEmitter,this.interval=o.HEARTBEAT_INTERVAL,this.interval=(f==null?void 0:f.interval)||o.HEARTBEAT_INTERVAL}static init(f){return n.__awaiter(this,void 0,void 0,function*(){const g=new c(f);return yield g.init(),g})}init(){return n.__awaiter(this,void 0,void 0,function*(){yield this.initialize()})}stop(){clearInterval(this.intervalRef)}on(f,g){this.events.on(f,g)}once(f,g){this.events.once(f,g)}off(f,g){this.events.off(f,g)}removeListener(f,g){this.events.removeListener(f,g)}initialize(){return n.__awaiter(this,void 0,void 0,function*(){this.intervalRef=setInterval(()=>this.pulse(),t.toMiliseconds(this.interval))})}pulse(){this.events.emit(o.HEARTBEAT_EVENTS.pulse)}}return gs.HeartBeat=c,gs}(function(n){Object.defineProperty(n,"__esModule",{value:!0});const e=ga;e.__exportStar(ES(),n),e.__exportStar(zp(),n),e.__exportStar(Bp(),n)})(Wi);var Je={};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Ru=function(n,e){return Ru=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var o in i)i.hasOwnProperty(o)&&(t[o]=i[o])},Ru(n,e)};function DS(n,e){Ru(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var Nu=function(){return Nu=Object.assign||function(e){for(var t,i=1,o=arguments.length;i<o;i++){t=arguments[i];for(var c in t)Object.prototype.hasOwnProperty.call(t,c)&&(e[c]=t[c])}return e},Nu.apply(this,arguments)};function SS(n,e){var t={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(n);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(n,i[o])&&(t[i[o]]=n[i[o]]);return t}function IS(n,e,t,i){var o=arguments.length,c=o<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,u;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")c=Reflect.decorate(n,e,t,i);else for(var f=n.length-1;f>=0;f--)(u=n[f])&&(c=(o<3?u(c):o>3?u(e,t,c):u(e,t))||c);return o>3&&c&&Object.defineProperty(e,t,c),c}function xS(n,e){return function(t,i){e(t,i,n)}}function OS(n,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(n,e)}function PS(n,e,t,i){function o(c){return c instanceof t?c:new t(function(u){u(c)})}return new(t||(t=Promise))(function(c,u){function f(_){try{p(i.next(_))}catch(D){u(D)}}function g(_){try{p(i.throw(_))}catch(D){u(D)}}function p(_){_.done?c(_.value):o(_.value).then(f,g)}p((i=i.apply(n,e||[])).next())})}function CS(n,e){var t={label:0,sent:function(){if(c[0]&1)throw c[1];return c[1]},trys:[],ops:[]},i,o,c,u;return u={next:f(0),throw:f(1),return:f(2)},typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function f(p){return function(_){return g([p,_])}}function g(p){if(i)throw new TypeError("Generator is already executing.");for(;t;)try{if(i=1,o&&(c=p[0]&2?o.return:p[0]?o.throw||((c=o.return)&&c.call(o),0):o.next)&&!(c=c.call(o,p[1])).done)return c;switch(o=0,c&&(p=[p[0]&2,c.value]),p[0]){case 0:case 1:c=p;break;case 4:return t.label++,{value:p[1],done:!1};case 5:t.label++,o=p[1],p=[0];continue;case 7:p=t.ops.pop(),t.trys.pop();continue;default:if(c=t.trys,!(c=c.length>0&&c[c.length-1])&&(p[0]===6||p[0]===2)){t=0;continue}if(p[0]===3&&(!c||p[1]>c[0]&&p[1]<c[3])){t.label=p[1];break}if(p[0]===6&&t.label<c[1]){t.label=c[1],c=p;break}if(c&&t.label<c[2]){t.label=c[2],t.ops.push(p);break}c[2]&&t.ops.pop(),t.trys.pop();continue}p=e.call(n,t)}catch(_){p=[6,_],o=0}finally{i=c=0}if(p[0]&5)throw p[1];return{value:p[0]?p[1]:void 0,done:!0}}}function AS(n,e,t,i){i===void 0&&(i=t),n[i]=e[t]}function TS(n,e){for(var t in n)t!=="default"&&!e.hasOwnProperty(t)&&(e[t]=n[t])}function Lu(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],i=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&i>=n.length&&(n=void 0),{value:n&&n[i++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Hp(n,e){var t=typeof Symbol=="function"&&n[Symbol.iterator];if(!t)return n;var i=t.call(n),o,c=[],u;try{for(;(e===void 0||e-- >0)&&!(o=i.next()).done;)c.push(o.value)}catch(f){u={error:f}}finally{try{o&&!o.done&&(t=i.return)&&t.call(i)}finally{if(u)throw u.error}}return c}function RS(){for(var n=[],e=0;e<arguments.length;e++)n=n.concat(Hp(arguments[e]));return n}function NS(){for(var n=0,e=0,t=arguments.length;e<t;e++)n+=arguments[e].length;for(var i=Array(n),o=0,e=0;e<t;e++)for(var c=arguments[e],u=0,f=c.length;u<f;u++,o++)i[o]=c[u];return i}function Cs(n){return this instanceof Cs?(this.v=n,this):new Cs(n)}function LS(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=t.apply(n,e||[]),o,c=[];return o={},u("next"),u("throw"),u("return"),o[Symbol.asyncIterator]=function(){return this},o;function u(S){i[S]&&(o[S]=function(x){return new Promise(function(O,F){c.push([S,x,O,F])>1||f(S,x)})})}function f(S,x){try{g(i[S](x))}catch(O){D(c[0][3],O)}}function g(S){S.value instanceof Cs?Promise.resolve(S.value.v).then(p,_):D(c[0][2],S)}function p(S){f("next",S)}function _(S){f("throw",S)}function D(S,x){S(x),c.shift(),c.length&&f(c[0][0],c[0][1])}}function $S(n){var e,t;return e={},i("next"),i("throw",function(o){throw o}),i("return"),e[Symbol.iterator]=function(){return this},e;function i(o,c){e[o]=n[o]?function(u){return(t=!t)?{value:Cs(n[o](u)),done:o==="return"}:c?c(u):u}:c}}function jS(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof Lu=="function"?Lu(n):n[Symbol.iterator](),t={},i("next"),i("throw"),i("return"),t[Symbol.asyncIterator]=function(){return this},t);function i(c){t[c]=n[c]&&function(u){return new Promise(function(f,g){u=n[c](u),o(f,g,u.done,u.value)})}}function o(c,u,f,g){Promise.resolve(g).then(function(p){c({value:p,done:f})},u)}}function US(n,e){return Object.defineProperty?Object.defineProperty(n,"raw",{value:e}):n.raw=e,n}function MS(n){if(n&&n.__esModule)return n;var e={};if(n!=null)for(var t in n)Object.hasOwnProperty.call(n,t)&&(e[t]=n[t]);return e.default=n,e}function qS(n){return n&&n.__esModule?n:{default:n}}function FS(n,e){if(!e.has(n))throw new TypeError("attempted to get private field on non-instance");return e.get(n)}function zS(n,e,t){if(!e.has(n))throw new TypeError("attempted to set private field on non-instance");return e.set(n,t),t}const BS=Object.freeze(Object.defineProperty({__proto__:null,get __assign(){return Nu},__asyncDelegator:$S,__asyncGenerator:LS,__asyncValues:jS,__await:Cs,__awaiter:PS,__classPrivateFieldGet:FS,__classPrivateFieldSet:zS,__createBinding:AS,__decorate:IS,__exportStar:TS,__extends:DS,__generator:CS,__importDefault:qS,__importStar:MS,__makeTemplateObject:US,__metadata:OS,__param:xS,__read:Hp,__rest:SS,__spread:RS,__spreadArrays:NS,__values:Lu},Symbol.toStringTag,{value:"Module"})),HS=ui(BS);var nu,id;function kS(){if(id)return nu;id=1;function n(t){try{return JSON.stringify(t)}catch{return'"[Circular]"'}}nu=e;function e(t,i,o){var c=o&&o.stringify||n,u=1;if(typeof t=="object"&&t!==null){var f=i.length+u;if(f===1)return t;var g=new Array(f);g[0]=c(t);for(var p=1;p<f;p++)g[p]=c(i[p]);return g.join(" ")}if(typeof t!="string")return t;var _=i.length;if(_===0)return t;for(var D="",S=1-u,x=-1,O=t&&t.length||0,F=0;F<O;){if(t.charCodeAt(F)===37&&F+1<O){switch(x=x>-1?x:0,t.charCodeAt(F+1)){case 100:case 102:if(S>=_||i[S]==null)break;x<F&&(D+=t.slice(x,F)),D+=Number(i[S]),x=F+2,F++;break;case 105:if(S>=_||i[S]==null)break;x<F&&(D+=t.slice(x,F)),D+=Math.floor(Number(i[S])),x=F+2,F++;break;case 79:case 111:case 106:if(S>=_||i[S]===void 0)break;x<F&&(D+=t.slice(x,F));var H=typeof i[S];if(H==="string"){D+="'"+i[S]+"'",x=F+2,F++;break}if(H==="function"){D+=i[S].name||"<anonymous>",x=F+2,F++;break}D+=c(i[S]),x=F+2,F++;break;case 115:if(S>=_)break;x<F&&(D+=t.slice(x,F)),D+=String(i[S]),x=F+2,F++;break;case 37:x<F&&(D+=t.slice(x,F)),D+="%",x=F+2,F++,S--;break}++S}++F}return x===-1?t:(x<O&&(D+=t.slice(x)),D)}return nu}var iu,sd;function KS(){if(sd)return iu;sd=1;const n=kS();iu=o;const e=T().console||{},t={mapHttpRequest:O,mapHttpResponse:O,wrapRequestSerializer:F,wrapResponseSerializer:F,wrapErrorSerializer:F,req:O,res:O,err:S};function i(E,h){return Array.isArray(E)?E.filter(function(W){return W!=="!stdSerializers.err"}):E===!0?Object.keys(h):!1}function o(E){E=E||{},E.browser=E.browser||{};const h=E.browser.transmit;if(h&&typeof h.send!="function")throw Error("pino: transmit option must have a send function");const b=E.browser.write||e;E.browser.write&&(E.browser.asObject=!0);const W=E.serializers||{},G=i(E.browser.serialize,W);let se=E.browser.serialize;Array.isArray(E.browser.serialize)&&E.browser.serialize.indexOf("!stdSerializers.err")>-1&&(se=!1);const ue=["error","fatal","warn","info","debug","trace"];typeof b=="function"&&(b.error=b.fatal=b.warn=b.info=b.debug=b.trace=b),E.enabled===!1&&(E.level="silent");const de=E.level||"info",w=Object.create(b);w.log||(w.log=H),Object.defineProperty(w,"levelVal",{get:ee}),Object.defineProperty(w,"level",{get:Q,set:K});const A={transmit:h,serialize:G,asObject:E.browser.asObject,levels:ue,timestamp:x(E)};w.levels=o.levels,w.level=de,w.setMaxListeners=w.getMaxListeners=w.emit=w.addListener=w.on=w.prependListener=w.once=w.prependOnceListener=w.removeListener=w.removeAllListeners=w.listeners=w.listenerCount=w.eventNames=w.write=w.flush=H,w.serializers=W,w._serialize=G,w._stdErrSerialize=se,w.child=V,h&&(w._logEvent=D());function ee(){return this.level==="silent"?1/0:this.levels.values[this.level]}function Q(){return this._level}function K(J){if(J!=="silent"&&!this.levels.values[J])throw Error("unknown level "+J);this._level=J,c(A,w,"error","log"),c(A,w,"fatal","error"),c(A,w,"warn","error"),c(A,w,"info","log"),c(A,w,"debug","log"),c(A,w,"trace","log")}function V(J,re){if(!J)throw new Error("missing bindings for child Pino");re=re||{},G&&J.serializers&&(re.serializers=J.serializers);const be=re.serializers;if(G&&be){var oe=Object.assign({},W,be),we=E.browser.serialize===!0?Object.keys(oe):G;delete J.serializers,g([J],we,oe,this._stdErrSerialize)}function le(ve){this._childLevel=(ve._childLevel|0)+1,this.error=p(ve,J,"error"),this.fatal=p(ve,J,"fatal"),this.warn=p(ve,J,"warn"),this.info=p(ve,J,"info"),this.debug=p(ve,J,"debug"),this.trace=p(ve,J,"trace"),oe&&(this.serializers=oe,this._serialize=we),h&&(this._logEvent=D([].concat(ve._logEvent.bindings,J)))}return le.prototype=this,new le(this)}return w}o.levels={values:{fatal:60,error:50,warn:40,info:30,debug:20,trace:10},labels:{10:"trace",20:"debug",30:"info",40:"warn",50:"error",60:"fatal"}},o.stdSerializers=t,o.stdTimeFunctions=Object.assign({},{nullTime:ne,epochTime:L,unixTime:M,isoTime:C});function c(E,h,b,W){const G=Object.getPrototypeOf(h);h[b]=h.levelVal>h.levels.values[b]?H:G[b]?G[b]:e[b]||e[W]||H,u(E,h,b)}function u(E,h,b){!E.transmit&&h[b]===H||(h[b]=function(W){return function(){const se=E.timestamp(),ue=new Array(arguments.length),de=Object.getPrototypeOf&&Object.getPrototypeOf(this)===e?e:this;for(var w=0;w<ue.length;w++)ue[w]=arguments[w];if(E.serialize&&!E.asObject&&g(ue,this._serialize,this.serializers,this._stdErrSerialize),E.asObject?W.call(de,f(this,b,ue,se)):W.apply(de,ue),E.transmit){const A=E.transmit.level||h.level,ee=o.levels.values[A],Q=o.levels.values[b];if(Q<ee)return;_(this,{ts:se,methodLevel:b,methodValue:Q,transmitLevel:A,transmitValue:o.levels.values[E.transmit.level||h.level],send:E.transmit.send,val:h.levelVal},ue)}}}(h[b]))}function f(E,h,b,W){E._serialize&&g(b,E._serialize,E.serializers,E._stdErrSerialize);const G=b.slice();let se=G[0];const ue={};W&&(ue.time=W),ue.level=o.levels.values[h];let de=(E._childLevel|0)+1;if(de<1&&(de=1),se!==null&&typeof se=="object"){for(;de--&&typeof G[0]=="object";)Object.assign(ue,G.shift());se=G.length?n(G.shift(),G):void 0}else typeof se=="string"&&(se=n(G.shift(),G));return se!==void 0&&(ue.msg=se),ue}function g(E,h,b,W){for(const G in E)if(W&&E[G]instanceof Error)E[G]=o.stdSerializers.err(E[G]);else if(typeof E[G]=="object"&&!Array.isArray(E[G]))for(const se in E[G])h&&h.indexOf(se)>-1&&se in b&&(E[G][se]=b[se](E[G][se]))}function p(E,h,b){return function(){const W=new Array(1+arguments.length);W[0]=h;for(var G=1;G<W.length;G++)W[G]=arguments[G-1];return E[b].apply(this,W)}}function _(E,h,b){const W=h.send,G=h.ts,se=h.methodLevel,ue=h.methodValue,de=h.val,w=E._logEvent.bindings;g(b,E._serialize||Object.keys(E.serializers),E.serializers,E._stdErrSerialize===void 0?!0:E._stdErrSerialize),E._logEvent.ts=G,E._logEvent.messages=b.filter(function(A){return w.indexOf(A)===-1}),E._logEvent.level.label=se,E._logEvent.level.value=ue,W(se,E._logEvent,de),E._logEvent=D(w)}function D(E){return{ts:0,messages:[],bindings:E||[],level:{label:"",value:0}}}function S(E){const h={type:E.constructor.name,msg:E.message,stack:E.stack};for(const b in E)h[b]===void 0&&(h[b]=E[b]);return h}function x(E){return typeof E.timestamp=="function"?E.timestamp:E.timestamp===!1?ne:L}function O(){return{}}function F(E){return E}function H(){}function ne(){return!1}function L(){return Date.now()}function M(){return Math.round(Date.now()/1e3)}function C(){return new Date(Date.now()).toISOString()}function T(){function E(h){return typeof h<"u"&&h}try{return typeof globalThis<"u"||Object.defineProperty(Object.prototype,"globalThis",{get:function(){return delete Object.prototype.globalThis,this.globalThis=this},configurable:!0}),globalThis}catch{return E(self)||E(window)||E(this)||{}}}return iu}var oi={},od;function kp(){return od||(od=1,Object.defineProperty(oi,"__esModule",{value:!0}),oi.PINO_CUSTOM_CONTEXT_KEY=oi.PINO_LOGGER_DEFAULTS=void 0,oi.PINO_LOGGER_DEFAULTS={level:"info"},oi.PINO_CUSTOM_CONTEXT_KEY="custom_context"),oi}var cr={},ad;function VS(){if(ad)return cr;ad=1,Object.defineProperty(cr,"__esModule",{value:!0}),cr.generateChildLogger=cr.formatChildLoggerContext=cr.getLoggerContext=cr.setBrowserLoggerContext=cr.getBrowserLoggerContext=cr.getDefaultLoggerOptions=void 0;const n=kp();function e(f){return Object.assign(Object.assign({},f),{level:(f==null?void 0:f.level)||n.PINO_LOGGER_DEFAULTS.level})}cr.getDefaultLoggerOptions=e;function t(f,g=n.PINO_CUSTOM_CONTEXT_KEY){return f[g]||""}cr.getBrowserLoggerContext=t;function i(f,g,p=n.PINO_CUSTOM_CONTEXT_KEY){return f[p]=g,f}cr.setBrowserLoggerContext=i;function o(f,g=n.PINO_CUSTOM_CONTEXT_KEY){let p="";return typeof f.bindings>"u"?p=t(f,g):p=f.bindings().context||"",p}cr.getLoggerContext=o;function c(f,g,p=n.PINO_CUSTOM_CONTEXT_KEY){const _=o(f,p);return _.trim()?`${_}/${g}`:g}cr.formatChildLoggerContext=c;function u(f,g,p=n.PINO_CUSTOM_CONTEXT_KEY){const _=c(f,g,p),D=f.child({context:_});return i(D,_,p)}return cr.generateChildLogger=u,cr}(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.pino=void 0;const e=HS,t=e.__importDefault(KS());Object.defineProperty(n,"pino",{enumerable:!0,get:function(){return t.default}}),e.__exportStar(kp(),n),e.__exportStar(VS(),n)})(Je);class WS extends di{constructor(e){super(),this.opts=e,this.protocol="wc",this.version=2}}let GS=class extends di{constructor(e,t){super(),this.core=e,this.logger=t,this.records=new Map}},YS=class{constructor(e,t){this.logger=e,this.core=t}},JS=class extends di{constructor(e,t){super(),this.relayer=e,this.logger=t}},QS=class extends di{constructor(e){super()}},XS=class{constructor(e,t,i,o){this.core=e,this.logger=t,this.name=i}};class ZS extends di{constructor(e,t){super(),this.relayer=e,this.logger=t}}let e2=class extends di{constructor(e,t){super(),this.core=e,this.logger=t}},t2=class{constructor(e,t){this.projectId=e,this.logger=t}},r2=class{constructor(e,t){this.projectId=e,this.logger=t}},n2=class{constructor(e){this.opts=e,this.protocol="wc",this.version=2}},i2=class{constructor(e){this.client=e}};var sh={},Kp={};(function(n){Object.defineProperty(n,"__esModule",{value:!0});var e=je,t=Tr;n.DIGEST_LENGTH=64,n.BLOCK_SIZE=128;var i=function(){function f(){this.digestLength=n.DIGEST_LENGTH,this.blockSize=n.BLOCK_SIZE,this._stateHi=new Int32Array(8),this._stateLo=new Int32Array(8),this._tempHi=new Int32Array(16),this._tempLo=new Int32Array(16),this._buffer=new Uint8Array(256),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this.reset()}return f.prototype._initState=function(){this._stateHi[0]=1779033703,this._stateHi[1]=3144134277,this._stateHi[2]=1013904242,this._stateHi[3]=2773480762,this._stateHi[4]=1359893119,this._stateHi[5]=2600822924,this._stateHi[6]=528734635,this._stateHi[7]=1541459225,this._stateLo[0]=4089235720,this._stateLo[1]=2227873595,this._stateLo[2]=4271175723,this._stateLo[3]=1595750129,this._stateLo[4]=2917565137,this._stateLo[5]=725511199,this._stateLo[6]=4215389547,this._stateLo[7]=327033209},f.prototype.reset=function(){return this._initState(),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this},f.prototype.clean=function(){t.wipe(this._buffer),t.wipe(this._tempHi),t.wipe(this._tempLo),this.reset()},f.prototype.update=function(g,p){if(p===void 0&&(p=g.length),this._finished)throw new Error("SHA512: can't update because hash was finished.");var _=0;if(this._bytesHashed+=p,this._bufferLength>0){for(;this._bufferLength<n.BLOCK_SIZE&&p>0;)this._buffer[this._bufferLength++]=g[_++],p--;this._bufferLength===this.blockSize&&(c(this._tempHi,this._tempLo,this._stateHi,this._stateLo,this._buffer,0,this.blockSize),this._bufferLength=0)}for(p>=this.blockSize&&(_=c(this._tempHi,this._tempLo,this._stateHi,this._stateLo,g,_,p),p%=this.blockSize);p>0;)this._buffer[this._bufferLength++]=g[_++],p--;return this},f.prototype.finish=function(g){if(!this._finished){var p=this._bytesHashed,_=this._bufferLength,D=p/536870912|0,S=p<<3,x=p%128<112?128:256;this._buffer[_]=128;for(var O=_+1;O<x-8;O++)this._buffer[O]=0;e.writeUint32BE(D,this._buffer,x-8),e.writeUint32BE(S,this._buffer,x-4),c(this._tempHi,this._tempLo,this._stateHi,this._stateLo,this._buffer,0,x),this._finished=!0}for(var O=0;O<this.digestLength/8;O++)e.writeUint32BE(this._stateHi[O],g,O*8),e.writeUint32BE(this._stateLo[O],g,O*8+4);return this},f.prototype.digest=function(){var g=new Uint8Array(this.digestLength);return this.finish(g),g},f.prototype.saveState=function(){if(this._finished)throw new Error("SHA256: cannot save finished state");return{stateHi:new Int32Array(this._stateHi),stateLo:new Int32Array(this._stateLo),buffer:this._bufferLength>0?new Uint8Array(this._buffer):void 0,bufferLength:this._bufferLength,bytesHashed:this._bytesHashed}},f.prototype.restoreState=function(g){return this._stateHi.set(g.stateHi),this._stateLo.set(g.stateLo),this._bufferLength=g.bufferLength,g.buffer&&this._buffer.set(g.buffer),this._bytesHashed=g.bytesHashed,this._finished=!1,this},f.prototype.cleanSavedState=function(g){t.wipe(g.stateHi),t.wipe(g.stateLo),g.buffer&&t.wipe(g.buffer),g.bufferLength=0,g.bytesHashed=0},f}();n.SHA512=i;var o=new Int32Array([1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591]);function c(f,g,p,_,D,S,x){for(var O=p[0],F=p[1],H=p[2],ne=p[3],L=p[4],M=p[5],C=p[6],T=p[7],E=_[0],h=_[1],b=_[2],W=_[3],G=_[4],se=_[5],ue=_[6],de=_[7],w,A,ee,Q,K,V,J,re;x>=128;){for(var be=0;be<16;be++){var oe=8*be+S;f[be]=e.readUint32BE(D,oe),g[be]=e.readUint32BE(D,oe+4)}for(var be=0;be<80;be++){var we=O,le=F,ve=H,B=ne,z=L,$=M,d=C,R=T,ae=E,fe=h,Ie=b,Be=W,Ke=G,Ue=se,gt=ue,yt=de;if(w=T,A=de,K=A&65535,V=A>>>16,J=w&65535,re=w>>>16,w=(L>>>14|G<<18)^(L>>>18|G<<14)^(G>>>9|L<<23),A=(G>>>14|L<<18)^(G>>>18|L<<14)^(L>>>9|G<<23),K+=A&65535,V+=A>>>16,J+=w&65535,re+=w>>>16,w=L&M^~L&C,A=G&se^~G&ue,K+=A&65535,V+=A>>>16,J+=w&65535,re+=w>>>16,w=o[be*2],A=o[be*2+1],K+=A&65535,V+=A>>>16,J+=w&65535,re+=w>>>16,w=f[be%16],A=g[be%16],K+=A&65535,V+=A>>>16,J+=w&65535,re+=w>>>16,V+=K>>>16,J+=V>>>16,re+=J>>>16,ee=J&65535|re<<16,Q=K&65535|V<<16,w=ee,A=Q,K=A&65535,V=A>>>16,J=w&65535,re=w>>>16,w=(O>>>28|E<<4)^(E>>>2|O<<30)^(E>>>7|O<<25),A=(E>>>28|O<<4)^(O>>>2|E<<30)^(O>>>7|E<<25),K+=A&65535,V+=A>>>16,J+=w&65535,re+=w>>>16,w=O&F^O&H^F&H,A=E&h^E&b^h&b,K+=A&65535,V+=A>>>16,J+=w&65535,re+=w>>>16,V+=K>>>16,J+=V>>>16,re+=J>>>16,R=J&65535|re<<16,yt=K&65535|V<<16,w=B,A=Be,K=A&65535,V=A>>>16,J=w&65535,re=w>>>16,w=ee,A=Q,K+=A&65535,V+=A>>>16,J+=w&65535,re+=w>>>16,V+=K>>>16,J+=V>>>16,re+=J>>>16,B=J&65535|re<<16,Be=K&65535|V<<16,F=we,H=le,ne=ve,L=B,M=z,C=$,T=d,O=R,h=ae,b=fe,W=Ie,G=Be,se=Ke,ue=Ue,de=gt,E=yt,be%16===15)for(var oe=0;oe<16;oe++)w=f[oe],A=g[oe],K=A&65535,V=A>>>16,J=w&65535,re=w>>>16,w=f[(oe+9)%16],A=g[(oe+9)%16],K+=A&65535,V+=A>>>16,J+=w&65535,re+=w>>>16,ee=f[(oe+1)%16],Q=g[(oe+1)%16],w=(ee>>>1|Q<<31)^(ee>>>8|Q<<24)^ee>>>7,A=(Q>>>1|ee<<31)^(Q>>>8|ee<<24)^(Q>>>7|ee<<25),K+=A&65535,V+=A>>>16,J+=w&65535,re+=w>>>16,ee=f[(oe+14)%16],Q=g[(oe+14)%16],w=(ee>>>19|Q<<13)^(Q>>>29|ee<<3)^ee>>>6,A=(Q>>>19|ee<<13)^(ee>>>29|Q<<3)^(Q>>>6|ee<<26),K+=A&65535,V+=A>>>16,J+=w&65535,re+=w>>>16,V+=K>>>16,J+=V>>>16,re+=J>>>16,f[oe]=J&65535|re<<16,g[oe]=K&65535|V<<16}w=O,A=E,K=A&65535,V=A>>>16,J=w&65535,re=w>>>16,w=p[0],A=_[0],K+=A&65535,V+=A>>>16,J+=w&65535,re+=w>>>16,V+=K>>>16,J+=V>>>16,re+=J>>>16,p[0]=O=J&65535|re<<16,_[0]=E=K&65535|V<<16,w=F,A=h,K=A&65535,V=A>>>16,J=w&65535,re=w>>>16,w=p[1],A=_[1],K+=A&65535,V+=A>>>16,J+=w&65535,re+=w>>>16,V+=K>>>16,J+=V>>>16,re+=J>>>16,p[1]=F=J&65535|re<<16,_[1]=h=K&65535|V<<16,w=H,A=b,K=A&65535,V=A>>>16,J=w&65535,re=w>>>16,w=p[2],A=_[2],K+=A&65535,V+=A>>>16,J+=w&65535,re+=w>>>16,V+=K>>>16,J+=V>>>16,re+=J>>>16,p[2]=H=J&65535|re<<16,_[2]=b=K&65535|V<<16,w=ne,A=W,K=A&65535,V=A>>>16,J=w&65535,re=w>>>16,w=p[3],A=_[3],K+=A&65535,V+=A>>>16,J+=w&65535,re+=w>>>16,V+=K>>>16,J+=V>>>16,re+=J>>>16,p[3]=ne=J&65535|re<<16,_[3]=W=K&65535|V<<16,w=L,A=G,K=A&65535,V=A>>>16,J=w&65535,re=w>>>16,w=p[4],A=_[4],K+=A&65535,V+=A>>>16,J+=w&65535,re+=w>>>16,V+=K>>>16,J+=V>>>16,re+=J>>>16,p[4]=L=J&65535|re<<16,_[4]=G=K&65535|V<<16,w=M,A=se,K=A&65535,V=A>>>16,J=w&65535,re=w>>>16,w=p[5],A=_[5],K+=A&65535,V+=A>>>16,J+=w&65535,re+=w>>>16,V+=K>>>16,J+=V>>>16,re+=J>>>16,p[5]=M=J&65535|re<<16,_[5]=se=K&65535|V<<16,w=C,A=ue,K=A&65535,V=A>>>16,J=w&65535,re=w>>>16,w=p[6],A=_[6],K+=A&65535,V+=A>>>16,J+=w&65535,re+=w>>>16,V+=K>>>16,J+=V>>>16,re+=J>>>16,p[6]=C=J&65535|re<<16,_[6]=ue=K&65535|V<<16,w=T,A=de,K=A&65535,V=A>>>16,J=w&65535,re=w>>>16,w=p[7],A=_[7],K+=A&65535,V+=A>>>16,J+=w&65535,re+=w>>>16,V+=K>>>16,J+=V>>>16,re+=J>>>16,p[7]=T=J&65535|re<<16,_[7]=de=K&65535|V<<16,S+=128,x-=128}return S}function u(f){var g=new i;g.update(f);var p=g.digest();return g.clean(),p}n.hash=u})(Kp);(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.convertSecretKeyToX25519=n.convertPublicKeyToX25519=n.verify=n.sign=n.extractPublicKeyFromSecretKey=n.generateKeyPair=n.generateKeyPairFromSeed=n.SEED_LENGTH=n.SECRET_KEY_LENGTH=n.PUBLIC_KEY_LENGTH=n.SIGNATURE_LENGTH=void 0;const e=Bi,t=Kp,i=Tr;n.SIGNATURE_LENGTH=64,n.PUBLIC_KEY_LENGTH=32,n.SECRET_KEY_LENGTH=64,n.SEED_LENGTH=32;function o(B){const z=new Float64Array(16);if(B)for(let $=0;$<B.length;$++)z[$]=B[$];return z}const c=new Uint8Array(32);c[0]=9;const u=o(),f=o([1]),g=o([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),p=o([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222]),_=o([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),D=o([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]),S=o([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function x(B,z){for(let $=0;$<16;$++)B[$]=z[$]|0}function O(B){let z=1;for(let $=0;$<16;$++){let d=B[$]+z+65535;z=Math.floor(d/65536),B[$]=d-z*65536}B[0]+=z-1+37*(z-1)}function F(B,z,$){const d=~($-1);for(let R=0;R<16;R++){const ae=d&(B[R]^z[R]);B[R]^=ae,z[R]^=ae}}function H(B,z){const $=o(),d=o();for(let R=0;R<16;R++)d[R]=z[R];O(d),O(d),O(d);for(let R=0;R<2;R++){$[0]=d[0]-65517;for(let fe=1;fe<15;fe++)$[fe]=d[fe]-65535-($[fe-1]>>16&1),$[fe-1]&=65535;$[15]=d[15]-32767-($[14]>>16&1);const ae=$[15]>>16&1;$[14]&=65535,F(d,$,1-ae)}for(let R=0;R<16;R++)B[2*R]=d[R]&255,B[2*R+1]=d[R]>>8}function ne(B,z){let $=0;for(let d=0;d<32;d++)$|=B[d]^z[d];return(1&$-1>>>8)-1}function L(B,z){const $=new Uint8Array(32),d=new Uint8Array(32);return H($,B),H(d,z),ne($,d)}function M(B){const z=new Uint8Array(32);return H(z,B),z[0]&1}function C(B,z){for(let $=0;$<16;$++)B[$]=z[2*$]+(z[2*$+1]<<8);B[15]&=32767}function T(B,z,$){for(let d=0;d<16;d++)B[d]=z[d]+$[d]}function E(B,z,$){for(let d=0;d<16;d++)B[d]=z[d]-$[d]}function h(B,z,$){let d,R,ae=0,fe=0,Ie=0,Be=0,Ke=0,Ue=0,gt=0,yt=0,qe=0,xe=0,Ne=0,Le=0,Fe=0,Pe=0,$e=0,Se=0,Ce=0,He=0,Oe=0,Ve=0,Ge=0,et=0,tt=0,Qe=0,rr=0,fr=0,Qr=0,nr=0,an=0,On=0,Hn=0,St=$[0],_t=$[1],It=$[2],xt=$[3],Et=$[4],vt=$[5],jt=$[6],Ut=$[7],Ot=$[8],Mt=$[9],Pt=$[10],Tt=$[11],Ct=$[12],lt=$[13],qt=$[14],Ft=$[15];d=z[0],ae+=d*St,fe+=d*_t,Ie+=d*It,Be+=d*xt,Ke+=d*Et,Ue+=d*vt,gt+=d*jt,yt+=d*Ut,qe+=d*Ot,xe+=d*Mt,Ne+=d*Pt,Le+=d*Tt,Fe+=d*Ct,Pe+=d*lt,$e+=d*qt,Se+=d*Ft,d=z[1],fe+=d*St,Ie+=d*_t,Be+=d*It,Ke+=d*xt,Ue+=d*Et,gt+=d*vt,yt+=d*jt,qe+=d*Ut,xe+=d*Ot,Ne+=d*Mt,Le+=d*Pt,Fe+=d*Tt,Pe+=d*Ct,$e+=d*lt,Se+=d*qt,Ce+=d*Ft,d=z[2],Ie+=d*St,Be+=d*_t,Ke+=d*It,Ue+=d*xt,gt+=d*Et,yt+=d*vt,qe+=d*jt,xe+=d*Ut,Ne+=d*Ot,Le+=d*Mt,Fe+=d*Pt,Pe+=d*Tt,$e+=d*Ct,Se+=d*lt,Ce+=d*qt,He+=d*Ft,d=z[3],Be+=d*St,Ke+=d*_t,Ue+=d*It,gt+=d*xt,yt+=d*Et,qe+=d*vt,xe+=d*jt,Ne+=d*Ut,Le+=d*Ot,Fe+=d*Mt,Pe+=d*Pt,$e+=d*Tt,Se+=d*Ct,Ce+=d*lt,He+=d*qt,Oe+=d*Ft,d=z[4],Ke+=d*St,Ue+=d*_t,gt+=d*It,yt+=d*xt,qe+=d*Et,xe+=d*vt,Ne+=d*jt,Le+=d*Ut,Fe+=d*Ot,Pe+=d*Mt,$e+=d*Pt,Se+=d*Tt,Ce+=d*Ct,He+=d*lt,Oe+=d*qt,Ve+=d*Ft,d=z[5],Ue+=d*St,gt+=d*_t,yt+=d*It,qe+=d*xt,xe+=d*Et,Ne+=d*vt,Le+=d*jt,Fe+=d*Ut,Pe+=d*Ot,$e+=d*Mt,Se+=d*Pt,Ce+=d*Tt,He+=d*Ct,Oe+=d*lt,Ve+=d*qt,Ge+=d*Ft,d=z[6],gt+=d*St,yt+=d*_t,qe+=d*It,xe+=d*xt,Ne+=d*Et,Le+=d*vt,Fe+=d*jt,Pe+=d*Ut,$e+=d*Ot,Se+=d*Mt,Ce+=d*Pt,He+=d*Tt,Oe+=d*Ct,Ve+=d*lt,Ge+=d*qt,et+=d*Ft,d=z[7],yt+=d*St,qe+=d*_t,xe+=d*It,Ne+=d*xt,Le+=d*Et,Fe+=d*vt,Pe+=d*jt,$e+=d*Ut,Se+=d*Ot,Ce+=d*Mt,He+=d*Pt,Oe+=d*Tt,Ve+=d*Ct,Ge+=d*lt,et+=d*qt,tt+=d*Ft,d=z[8],qe+=d*St,xe+=d*_t,Ne+=d*It,Le+=d*xt,Fe+=d*Et,Pe+=d*vt,$e+=d*jt,Se+=d*Ut,Ce+=d*Ot,He+=d*Mt,Oe+=d*Pt,Ve+=d*Tt,Ge+=d*Ct,et+=d*lt,tt+=d*qt,Qe+=d*Ft,d=z[9],xe+=d*St,Ne+=d*_t,Le+=d*It,Fe+=d*xt,Pe+=d*Et,$e+=d*vt,Se+=d*jt,Ce+=d*Ut,He+=d*Ot,Oe+=d*Mt,Ve+=d*Pt,Ge+=d*Tt,et+=d*Ct,tt+=d*lt,Qe+=d*qt,rr+=d*Ft,d=z[10],Ne+=d*St,Le+=d*_t,Fe+=d*It,Pe+=d*xt,$e+=d*Et,Se+=d*vt,Ce+=d*jt,He+=d*Ut,Oe+=d*Ot,Ve+=d*Mt,Ge+=d*Pt,et+=d*Tt,tt+=d*Ct,Qe+=d*lt,rr+=d*qt,fr+=d*Ft,d=z[11],Le+=d*St,Fe+=d*_t,Pe+=d*It,$e+=d*xt,Se+=d*Et,Ce+=d*vt,He+=d*jt,Oe+=d*Ut,Ve+=d*Ot,Ge+=d*Mt,et+=d*Pt,tt+=d*Tt,Qe+=d*Ct,rr+=d*lt,fr+=d*qt,Qr+=d*Ft,d=z[12],Fe+=d*St,Pe+=d*_t,$e+=d*It,Se+=d*xt,Ce+=d*Et,He+=d*vt,Oe+=d*jt,Ve+=d*Ut,Ge+=d*Ot,et+=d*Mt,tt+=d*Pt,Qe+=d*Tt,rr+=d*Ct,fr+=d*lt,Qr+=d*qt,nr+=d*Ft,d=z[13],Pe+=d*St,$e+=d*_t,Se+=d*It,Ce+=d*xt,He+=d*Et,Oe+=d*vt,Ve+=d*jt,Ge+=d*Ut,et+=d*Ot,tt+=d*Mt,Qe+=d*Pt,rr+=d*Tt,fr+=d*Ct,Qr+=d*lt,nr+=d*qt,an+=d*Ft,d=z[14],$e+=d*St,Se+=d*_t,Ce+=d*It,He+=d*xt,Oe+=d*Et,Ve+=d*vt,Ge+=d*jt,et+=d*Ut,tt+=d*Ot,Qe+=d*Mt,rr+=d*Pt,fr+=d*Tt,Qr+=d*Ct,nr+=d*lt,an+=d*qt,On+=d*Ft,d=z[15],Se+=d*St,Ce+=d*_t,He+=d*It,Oe+=d*xt,Ve+=d*Et,Ge+=d*vt,et+=d*jt,tt+=d*Ut,Qe+=d*Ot,rr+=d*Mt,fr+=d*Pt,Qr+=d*Tt,nr+=d*Ct,an+=d*lt,On+=d*qt,Hn+=d*Ft,ae+=38*Ce,fe+=38*He,Ie+=38*Oe,Be+=38*Ve,Ke+=38*Ge,Ue+=38*et,gt+=38*tt,yt+=38*Qe,qe+=38*rr,xe+=38*fr,Ne+=38*Qr,Le+=38*nr,Fe+=38*an,Pe+=38*On,$e+=38*Hn,R=1,d=ae+R+65535,R=Math.floor(d/65536),ae=d-R*65536,d=fe+R+65535,R=Math.floor(d/65536),fe=d-R*65536,d=Ie+R+65535,R=Math.floor(d/65536),Ie=d-R*65536,d=Be+R+65535,R=Math.floor(d/65536),Be=d-R*65536,d=Ke+R+65535,R=Math.floor(d/65536),Ke=d-R*65536,d=Ue+R+65535,R=Math.floor(d/65536),Ue=d-R*65536,d=gt+R+65535,R=Math.floor(d/65536),gt=d-R*65536,d=yt+R+65535,R=Math.floor(d/65536),yt=d-R*65536,d=qe+R+65535,R=Math.floor(d/65536),qe=d-R*65536,d=xe+R+65535,R=Math.floor(d/65536),xe=d-R*65536,d=Ne+R+65535,R=Math.floor(d/65536),Ne=d-R*65536,d=Le+R+65535,R=Math.floor(d/65536),Le=d-R*65536,d=Fe+R+65535,R=Math.floor(d/65536),Fe=d-R*65536,d=Pe+R+65535,R=Math.floor(d/65536),Pe=d-R*65536,d=$e+R+65535,R=Math.floor(d/65536),$e=d-R*65536,d=Se+R+65535,R=Math.floor(d/65536),Se=d-R*65536,ae+=R-1+37*(R-1),R=1,d=ae+R+65535,R=Math.floor(d/65536),ae=d-R*65536,d=fe+R+65535,R=Math.floor(d/65536),fe=d-R*65536,d=Ie+R+65535,R=Math.floor(d/65536),Ie=d-R*65536,d=Be+R+65535,R=Math.floor(d/65536),Be=d-R*65536,d=Ke+R+65535,R=Math.floor(d/65536),Ke=d-R*65536,d=Ue+R+65535,R=Math.floor(d/65536),Ue=d-R*65536,d=gt+R+65535,R=Math.floor(d/65536),gt=d-R*65536,d=yt+R+65535,R=Math.floor(d/65536),yt=d-R*65536,d=qe+R+65535,R=Math.floor(d/65536),qe=d-R*65536,d=xe+R+65535,R=Math.floor(d/65536),xe=d-R*65536,d=Ne+R+65535,R=Math.floor(d/65536),Ne=d-R*65536,d=Le+R+65535,R=Math.floor(d/65536),Le=d-R*65536,d=Fe+R+65535,R=Math.floor(d/65536),Fe=d-R*65536,d=Pe+R+65535,R=Math.floor(d/65536),Pe=d-R*65536,d=$e+R+65535,R=Math.floor(d/65536),$e=d-R*65536,d=Se+R+65535,R=Math.floor(d/65536),Se=d-R*65536,ae+=R-1+37*(R-1),B[0]=ae,B[1]=fe,B[2]=Ie,B[3]=Be,B[4]=Ke,B[5]=Ue,B[6]=gt,B[7]=yt,B[8]=qe,B[9]=xe,B[10]=Ne,B[11]=Le,B[12]=Fe,B[13]=Pe,B[14]=$e,B[15]=Se}function b(B,z){h(B,z,z)}function W(B,z){const $=o();let d;for(d=0;d<16;d++)$[d]=z[d];for(d=253;d>=0;d--)b($,$),d!==2&&d!==4&&h($,$,z);for(d=0;d<16;d++)B[d]=$[d]}function G(B,z){const $=o();let d;for(d=0;d<16;d++)$[d]=z[d];for(d=250;d>=0;d--)b($,$),d!==1&&h($,$,z);for(d=0;d<16;d++)B[d]=$[d]}function se(B,z){const $=o(),d=o(),R=o(),ae=o(),fe=o(),Ie=o(),Be=o(),Ke=o(),Ue=o();E($,B[1],B[0]),E(Ue,z[1],z[0]),h($,$,Ue),T(d,B[0],B[1]),T(Ue,z[0],z[1]),h(d,d,Ue),h(R,B[3],z[3]),h(R,R,p),h(ae,B[2],z[2]),T(ae,ae,ae),E(fe,d,$),E(Ie,ae,R),T(Be,ae,R),T(Ke,d,$),h(B[0],fe,Ie),h(B[1],Ke,Be),h(B[2],Be,Ie),h(B[3],fe,Ke)}function ue(B,z,$){for(let d=0;d<4;d++)F(B[d],z[d],$)}function de(B,z){const $=o(),d=o(),R=o();W(R,z[2]),h($,z[0],R),h(d,z[1],R),H(B,d),B[31]^=M($)<<7}function w(B,z,$){x(B[0],u),x(B[1],f),x(B[2],f),x(B[3],u);for(let d=255;d>=0;--d){const R=$[d/8|0]>>(d&7)&1;ue(B,z,R),se(z,B),se(B,B),ue(B,z,R)}}function A(B,z){const $=[o(),o(),o(),o()];x($[0],_),x($[1],D),x($[2],f),h($[3],_,D),w(B,$,z)}function ee(B){if(B.length!==n.SEED_LENGTH)throw new Error(`ed25519: seed must be ${n.SEED_LENGTH} bytes`);const z=(0,t.hash)(B);z[0]&=248,z[31]&=127,z[31]|=64;const $=new Uint8Array(32),d=[o(),o(),o(),o()];A(d,z),de($,d);const R=new Uint8Array(64);return R.set(B),R.set($,32),{publicKey:$,secretKey:R}}n.generateKeyPairFromSeed=ee;function Q(B){const z=(0,e.randomBytes)(32,B),$=ee(z);return(0,i.wipe)(z),$}n.generateKeyPair=Q;function K(B){if(B.length!==n.SECRET_KEY_LENGTH)throw new Error(`ed25519: secret key must be ${n.SECRET_KEY_LENGTH} bytes`);return new Uint8Array(B.subarray(32))}n.extractPublicKeyFromSecretKey=K;const V=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]);function J(B,z){let $,d,R,ae;for(d=63;d>=32;--d){for($=0,R=d-32,ae=d-12;R<ae;++R)z[R]+=$-16*z[d]*V[R-(d-32)],$=Math.floor((z[R]+128)/256),z[R]-=$*256;z[R]+=$,z[d]=0}for($=0,R=0;R<32;R++)z[R]+=$-(z[31]>>4)*V[R],$=z[R]>>8,z[R]&=255;for(R=0;R<32;R++)z[R]-=$*V[R];for(d=0;d<32;d++)z[d+1]+=z[d]>>8,B[d]=z[d]&255}function re(B){const z=new Float64Array(64);for(let $=0;$<64;$++)z[$]=B[$];for(let $=0;$<64;$++)B[$]=0;J(B,z)}function be(B,z){const $=new Float64Array(64),d=[o(),o(),o(),o()],R=(0,t.hash)(B.subarray(0,32));R[0]&=248,R[31]&=127,R[31]|=64;const ae=new Uint8Array(64);ae.set(R.subarray(32),32);const fe=new t.SHA512;fe.update(ae.subarray(32)),fe.update(z);const Ie=fe.digest();fe.clean(),re(Ie),A(d,Ie),de(ae,d),fe.reset(),fe.update(ae.subarray(0,32)),fe.update(B.subarray(32)),fe.update(z);const Be=fe.digest();re(Be);for(let Ke=0;Ke<32;Ke++)$[Ke]=Ie[Ke];for(let Ke=0;Ke<32;Ke++)for(let Ue=0;Ue<32;Ue++)$[Ke+Ue]+=Be[Ke]*R[Ue];return J(ae.subarray(32),$),ae}n.sign=be;function oe(B,z){const $=o(),d=o(),R=o(),ae=o(),fe=o(),Ie=o(),Be=o();return x(B[2],f),C(B[1],z),b(R,B[1]),h(ae,R,g),E(R,R,B[2]),T(ae,B[2],ae),b(fe,ae),b(Ie,fe),h(Be,Ie,fe),h($,Be,R),h($,$,ae),G($,$),h($,$,R),h($,$,ae),h($,$,ae),h(B[0],$,ae),b(d,B[0]),h(d,d,ae),L(d,R)&&h(B[0],B[0],S),b(d,B[0]),h(d,d,ae),L(d,R)?-1:(M(B[0])===z[31]>>7&&E(B[0],u,B[0]),h(B[3],B[0],B[1]),0)}function we(B,z,$){const d=new Uint8Array(32),R=[o(),o(),o(),o()],ae=[o(),o(),o(),o()];if($.length!==n.SIGNATURE_LENGTH)throw new Error(`ed25519: signature must be ${n.SIGNATURE_LENGTH} bytes`);if(oe(ae,B))return!1;const fe=new t.SHA512;fe.update($.subarray(0,32)),fe.update(B),fe.update(z);const Ie=fe.digest();return re(Ie),w(R,ae,Ie),A(ae,$.subarray(32)),se(R,ae),de(d,R),!ne($,d)}n.verify=we;function le(B){let z=[o(),o(),o(),o()];if(oe(z,B))throw new Error("Ed25519: invalid public key");let $=o(),d=o(),R=z[1];T($,f,R),E(d,f,R),W(d,d),h($,$,d);let ae=new Uint8Array(32);return H(ae,$),ae}n.convertPublicKeyToX25519=le;function ve(B){const z=(0,t.hash)(B.subarray(0,32));z[0]&=248,z[31]&=127,z[31]|=64;const $=new Uint8Array(z.subarray(0,32));return(0,i.wipe)(z),$}n.convertSecretKeyToX25519=ve})(sh);const s2="EdDSA",o2="JWT",Vp=".",Wp="base64url",a2="utf8",c2="utf8",u2=":",h2="did",l2="key",cd="base58btc",f2="z",d2="K36",p2=32;function na(n){return lr(wr(ci(n),a2),Wp)}function Gp(n){const e=wr(d2,cd),t=f2+lr(mu([e,n]),cd);return[h2,l2,t].join(u2)}function g2(n){return lr(n,Wp)}function y2(n){return wr([na(n.header),na(n.payload)].join(Vp),c2)}function _2(n){return[na(n.header),na(n.payload),g2(n.signature)].join(Vp)}function ud(n=Bi.randomBytes(p2)){return sh.generateKeyPairFromSeed(n)}async function v2(n,e,t,i,o=_e.fromMiliseconds(Date.now())){const c={alg:s2,typ:o2},u=Gp(i.publicKey),f=o+t,g={iss:u,sub:n,aud:e,iat:o,exp:f},p=y2({header:c,payload:g}),_=sh.sign(i.secretKey,p);return _2({header:c,payload:g,signature:_})}const m2="PARSE_ERROR",b2="INVALID_REQUEST",w2="METHOD_NOT_FOUND",E2="INVALID_PARAMS",Yp="INTERNAL_ERROR",oh="SERVER_ERROR",D2=[-32700,-32600,-32601,-32602,-32603],Ds={[m2]:{code:-32700,message:"Parse error"},[b2]:{code:-32600,message:"Invalid Request"},[w2]:{code:-32601,message:"Method not found"},[E2]:{code:-32602,message:"Invalid params"},[Yp]:{code:-32603,message:"Internal error"},[oh]:{code:-32e3,message:"Server error"}},Jp=oh;function S2(n){return D2.includes(n)}function hd(n){return Object.keys(Ds).includes(n)?Ds[n]:Ds[Jp]}function I2(n){const e=Object.values(Ds).find(t=>t.code===n);return e||Ds[Jp]}function Qp(n,e,t){return n.message.includes("getaddrinfo ENOTFOUND")||n.message.includes("connect ECONNREFUSED")?new Error(`Unavailable ${t} RPC url at ${e}`):n}var Xp={};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var $u=function(n,e){return $u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var o in i)i.hasOwnProperty(o)&&(t[o]=i[o])},$u(n,e)};function x2(n,e){$u(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var ju=function(){return ju=Object.assign||function(e){for(var t,i=1,o=arguments.length;i<o;i++){t=arguments[i];for(var c in t)Object.prototype.hasOwnProperty.call(t,c)&&(e[c]=t[c])}return e},ju.apply(this,arguments)};function O2(n,e){var t={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(n);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(n,i[o])&&(t[i[o]]=n[i[o]]);return t}function P2(n,e,t,i){var o=arguments.length,c=o<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,u;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")c=Reflect.decorate(n,e,t,i);else for(var f=n.length-1;f>=0;f--)(u=n[f])&&(c=(o<3?u(c):o>3?u(e,t,c):u(e,t))||c);return o>3&&c&&Object.defineProperty(e,t,c),c}function C2(n,e){return function(t,i){e(t,i,n)}}function A2(n,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(n,e)}function T2(n,e,t,i){function o(c){return c instanceof t?c:new t(function(u){u(c)})}return new(t||(t=Promise))(function(c,u){function f(_){try{p(i.next(_))}catch(D){u(D)}}function g(_){try{p(i.throw(_))}catch(D){u(D)}}function p(_){_.done?c(_.value):o(_.value).then(f,g)}p((i=i.apply(n,e||[])).next())})}function R2(n,e){var t={label:0,sent:function(){if(c[0]&1)throw c[1];return c[1]},trys:[],ops:[]},i,o,c,u;return u={next:f(0),throw:f(1),return:f(2)},typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function f(p){return function(_){return g([p,_])}}function g(p){if(i)throw new TypeError("Generator is already executing.");for(;t;)try{if(i=1,o&&(c=p[0]&2?o.return:p[0]?o.throw||((c=o.return)&&c.call(o),0):o.next)&&!(c=c.call(o,p[1])).done)return c;switch(o=0,c&&(p=[p[0]&2,c.value]),p[0]){case 0:case 1:c=p;break;case 4:return t.label++,{value:p[1],done:!1};case 5:t.label++,o=p[1],p=[0];continue;case 7:p=t.ops.pop(),t.trys.pop();continue;default:if(c=t.trys,!(c=c.length>0&&c[c.length-1])&&(p[0]===6||p[0]===2)){t=0;continue}if(p[0]===3&&(!c||p[1]>c[0]&&p[1]<c[3])){t.label=p[1];break}if(p[0]===6&&t.label<c[1]){t.label=c[1],c=p;break}if(c&&t.label<c[2]){t.label=c[2],t.ops.push(p);break}c[2]&&t.ops.pop(),t.trys.pop();continue}p=e.call(n,t)}catch(_){p=[6,_],o=0}finally{i=c=0}if(p[0]&5)throw p[1];return{value:p[0]?p[1]:void 0,done:!0}}}function N2(n,e,t,i){i===void 0&&(i=t),n[i]=e[t]}function L2(n,e){for(var t in n)t!=="default"&&!e.hasOwnProperty(t)&&(e[t]=n[t])}function Uu(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],i=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&i>=n.length&&(n=void 0),{value:n&&n[i++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Zp(n,e){var t=typeof Symbol=="function"&&n[Symbol.iterator];if(!t)return n;var i=t.call(n),o,c=[],u;try{for(;(e===void 0||e-- >0)&&!(o=i.next()).done;)c.push(o.value)}catch(f){u={error:f}}finally{try{o&&!o.done&&(t=i.return)&&t.call(i)}finally{if(u)throw u.error}}return c}function $2(){for(var n=[],e=0;e<arguments.length;e++)n=n.concat(Zp(arguments[e]));return n}function j2(){for(var n=0,e=0,t=arguments.length;e<t;e++)n+=arguments[e].length;for(var i=Array(n),o=0,e=0;e<t;e++)for(var c=arguments[e],u=0,f=c.length;u<f;u++,o++)i[o]=c[u];return i}function As(n){return this instanceof As?(this.v=n,this):new As(n)}function U2(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=t.apply(n,e||[]),o,c=[];return o={},u("next"),u("throw"),u("return"),o[Symbol.asyncIterator]=function(){return this},o;function u(S){i[S]&&(o[S]=function(x){return new Promise(function(O,F){c.push([S,x,O,F])>1||f(S,x)})})}function f(S,x){try{g(i[S](x))}catch(O){D(c[0][3],O)}}function g(S){S.value instanceof As?Promise.resolve(S.value.v).then(p,_):D(c[0][2],S)}function p(S){f("next",S)}function _(S){f("throw",S)}function D(S,x){S(x),c.shift(),c.length&&f(c[0][0],c[0][1])}}function M2(n){var e,t;return e={},i("next"),i("throw",function(o){throw o}),i("return"),e[Symbol.iterator]=function(){return this},e;function i(o,c){e[o]=n[o]?function(u){return(t=!t)?{value:As(n[o](u)),done:o==="return"}:c?c(u):u}:c}}function q2(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof Uu=="function"?Uu(n):n[Symbol.iterator](),t={},i("next"),i("throw"),i("return"),t[Symbol.asyncIterator]=function(){return this},t);function i(c){t[c]=n[c]&&function(u){return new Promise(function(f,g){u=n[c](u),o(f,g,u.done,u.value)})}}function o(c,u,f,g){Promise.resolve(g).then(function(p){c({value:p,done:f})},u)}}function F2(n,e){return Object.defineProperty?Object.defineProperty(n,"raw",{value:e}):n.raw=e,n}function z2(n){if(n&&n.__esModule)return n;var e={};if(n!=null)for(var t in n)Object.hasOwnProperty.call(n,t)&&(e[t]=n[t]);return e.default=n,e}function B2(n){return n&&n.__esModule?n:{default:n}}function H2(n,e){if(!e.has(n))throw new TypeError("attempted to get private field on non-instance");return e.get(n)}function k2(n,e,t){if(!e.has(n))throw new TypeError("attempted to set private field on non-instance");return e.set(n,t),t}const K2=Object.freeze(Object.defineProperty({__proto__:null,get __assign(){return ju},__asyncDelegator:M2,__asyncGenerator:U2,__asyncValues:q2,__await:As,__awaiter:T2,__classPrivateFieldGet:H2,__classPrivateFieldSet:k2,__createBinding:N2,__decorate:P2,__exportStar:L2,__extends:x2,__generator:R2,__importDefault:B2,__importStar:z2,__makeTemplateObject:F2,__metadata:A2,__param:C2,__read:Zp,__rest:O2,__spread:$2,__spreadArrays:j2,__values:Uu},Symbol.toStringTag,{value:"Module"})),V2=ui(K2);var mn={},ld;function W2(){if(ld)return mn;ld=1,Object.defineProperty(mn,"__esModule",{value:!0}),mn.isBrowserCryptoAvailable=mn.getSubtleCrypto=mn.getBrowerCrypto=void 0;function n(){return(Jr===null||Jr===void 0?void 0:Jr.crypto)||(Jr===null||Jr===void 0?void 0:Jr.msCrypto)||{}}mn.getBrowerCrypto=n;function e(){const i=n();return i.subtle||i.webkitSubtle}mn.getSubtleCrypto=e;function t(){return!!n()&&!!e()}return mn.isBrowserCryptoAvailable=t,mn}var bn={},fd;function G2(){if(fd)return bn;fd=1,Object.defineProperty(bn,"__esModule",{value:!0}),bn.isBrowser=bn.isNode=bn.isReactNative=void 0;function n(){return typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"}bn.isReactNative=n;function e(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}bn.isNode=e;function t(){return!n()&&!e()}return bn.isBrowser=t,bn}(function(n){Object.defineProperty(n,"__esModule",{value:!0});const e=V2;e.__exportStar(W2(),n),e.__exportStar(G2(),n)})(Xp);function ah(n=3){const e=Date.now()*Math.pow(10,n),t=Math.floor(Math.random()*Math.pow(10,n));return e+t}function eg(n=6){return BigInt(ah(n))}function zi(n,e,t){return{id:t||ah(),jsonrpc:"2.0",method:n,params:e}}function ya(n,e){return{id:n,jsonrpc:"2.0",result:e}}function _a(n,e,t){return{id:n,jsonrpc:"2.0",error:Y2(e)}}function Y2(n,e){return typeof n>"u"?hd(Yp):(typeof n=="string"&&(n=Object.assign(Object.assign({},hd(oh)),{message:n})),S2(n.code)&&(n=I2(n.code)),n)}class J2{}class Q2 extends J2{constructor(){super()}}class X2 extends Q2{constructor(e){super()}}const Z2="^https?:",e6="^wss?:";function t6(n){const e=n.match(new RegExp(/^\w+:/,"gi"));if(!(!e||!e.length))return e[0]}function tg(n,e){const t=t6(n);return typeof t>"u"?!1:new RegExp(e).test(t)}function dd(n){return tg(n,Z2)}function pd(n){return tg(n,e6)}function r6(n){return new RegExp("wss?://localhost(:d{2,5})?").test(n)}function rg(n){return typeof n=="object"&&"id"in n&&"jsonrpc"in n&&n.jsonrpc==="2.0"}function ch(n){return rg(n)&&"method"in n}function va(n){return rg(n)&&(Sn(n)||Yr(n))}function Sn(n){return"result"in n}function Yr(n){return"error"in n}class In extends X2{constructor(e){super(e),this.events=new Ar.EventEmitter,this.hasRegisteredEventListeners=!1,this.connection=this.setConnection(e),this.connection.connected&&this.registerEventListeners()}async connect(e=this.connection){await this.open(e)}async disconnect(){await this.close()}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}off(e,t){this.events.off(e,t)}removeListener(e,t){this.events.removeListener(e,t)}async request(e,t){return this.requestStrict(zi(e.method,e.params||[],e.id||eg().toString()),t)}async requestStrict(e,t){return new Promise(async(i,o)=>{if(!this.connection.connected)try{await this.open()}catch(c){o(c)}this.events.on(`${e.id}`,c=>{Yr(c)?o(c.error):i(c.result)});try{await this.connection.send(e,t)}catch(c){o(c)}})}setConnection(e=this.connection){return e}onPayload(e){this.events.emit("payload",e),va(e)?this.events.emit(`${e.id}`,e):this.events.emit("message",{type:e.method,data:e.params})}onClose(e){e&&e.code===3e3&&this.events.emit("error",new Error(`WebSocket connection closed abnormally with code: ${e.code} ${e.reason?`(${e.reason})`:""}`)),this.events.emit("disconnect")}async open(e=this.connection){this.connection===e&&this.connection.connected||(this.connection.connected&&this.close(),typeof e=="string"&&(await this.connection.open(e),e=this.connection),this.connection=this.setConnection(e),await this.connection.open(),this.registerEventListeners(),this.events.emit("connect"))}async close(){await this.connection.close()}registerEventListeners(){this.hasRegisteredEventListeners||(this.connection.on("payload",e=>this.onPayload(e)),this.connection.on("close",e=>this.onClose(e)),this.connection.on("error",e=>this.events.emit("error",e)),this.connection.on("register_error",e=>this.onClose()),this.hasRegisteredEventListeners=!0)}}const n6=()=>typeof WebSocket<"u"?WebSocket:typeof global<"u"&&typeof global.WebSocket<"u"?global.WebSocket:typeof window<"u"&&typeof window.WebSocket<"u"?window.WebSocket:typeof self<"u"&&typeof self.WebSocket<"u"?self.WebSocket:require("ws"),i6=()=>typeof WebSocket<"u"||typeof global<"u"&&typeof global.WebSocket<"u"||typeof window<"u"&&typeof window.WebSocket<"u"||typeof self<"u"&&typeof self.WebSocket<"u",gd=n=>n.split("?")[0],yd=10,s6=n6();let o6=class{constructor(e){if(this.url=e,this.events=new Ar.EventEmitter,this.registering=!1,!pd(e))throw new Error(`Provided URL is not compatible with WebSocket connection: ${e}`);this.url=e}get connected(){return typeof this.socket<"u"}get connecting(){return this.registering}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}off(e,t){this.events.off(e,t)}removeListener(e,t){this.events.removeListener(e,t)}async open(e=this.url){await this.register(e)}async close(){return new Promise((e,t)=>{if(typeof this.socket>"u"){t(new Error("Connection already closed"));return}this.socket.onclose=i=>{this.onClose(i),e()},this.socket.close()})}async send(e){typeof this.socket>"u"&&(this.socket=await this.register());try{this.socket.send(ci(e))}catch(t){this.onError(e.id,t)}}register(e=this.url){if(!pd(e))throw new Error(`Provided URL is not compatible with WebSocket connection: ${e}`);if(this.registering){const t=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=t||this.events.listenerCount("open")>=t)&&this.events.setMaxListeners(t+1),new Promise((i,o)=>{this.events.once("register_error",c=>{this.resetMaxListeners(),o(c)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.socket>"u")return o(new Error("WebSocket connection is missing or invalid"));i(this.socket)})})}return this.url=e,this.registering=!0,new Promise((t,i)=>{const o=new URLSearchParams(e).get("origin"),c=Xp.isReactNative()?{headers:{origin:o}}:{rejectUnauthorized:!r6(e)},u=new s6(e,[],c);i6()?u.onerror=f=>{const g=f;i(this.emitError(g.error))}:u.on("error",f=>{i(this.emitError(f))}),u.onopen=()=>{this.onOpen(u),t(u)}})}onOpen(e){e.onmessage=t=>this.onPayload(t),e.onclose=t=>this.onClose(t),this.socket=e,this.registering=!1,this.events.emit("open")}onClose(e){this.socket=void 0,this.registering=!1,this.events.emit("close",e)}onPayload(e){if(typeof e.data>"u")return;const t=typeof e.data=="string"?js(e.data):e.data;this.events.emit("payload",t)}onError(e,t){const i=this.parseError(t),o=i.message||i.toString(),c=_a(e,o);this.events.emit("payload",c)}parseError(e,t=this.url){return Qp(e,gd(t),"WS")}resetMaxListeners(){this.events.getMaxListeners()>yd&&this.events.setMaxListeners(yd)}emitError(e){const t=this.parseError(new Error((e==null?void 0:e.message)||`WebSocket connection failed for host: ${gd(this.url)}`));return this.events.emit("register_error",t),t}};var ia={exports:{}};ia.exports;(function(n,e){var t=200,i="__lodash_hash_undefined__",o=1,c=2,u=9007199254740991,f="[object Arguments]",g="[object Array]",p="[object AsyncFunction]",_="[object Boolean]",D="[object Date]",S="[object Error]",x="[object Function]",O="[object GeneratorFunction]",F="[object Map]",H="[object Number]",ne="[object Null]",L="[object Object]",M="[object Promise]",C="[object Proxy]",T="[object RegExp]",E="[object Set]",h="[object String]",b="[object Symbol]",W="[object Undefined]",G="[object WeakMap]",se="[object ArrayBuffer]",ue="[object DataView]",de="[object Float32Array]",w="[object Float64Array]",A="[object Int8Array]",ee="[object Int16Array]",Q="[object Int32Array]",K="[object Uint8Array]",V="[object Uint8ClampedArray]",J="[object Uint16Array]",re="[object Uint32Array]",be=/[\\^$.*+?()[\]{}|]/g,oe=/^\[object .+?Constructor\]$/,we=/^(?:0|[1-9]\d*)$/,le={};le[de]=le[w]=le[A]=le[ee]=le[Q]=le[K]=le[V]=le[J]=le[re]=!0,le[f]=le[g]=le[se]=le[_]=le[ue]=le[D]=le[S]=le[x]=le[F]=le[H]=le[L]=le[T]=le[E]=le[h]=le[G]=!1;var ve=typeof Jr=="object"&&Jr&&Jr.Object===Object&&Jr,B=typeof self=="object"&&self&&self.Object===Object&&self,z=ve||B||Function("return this")(),$=e&&!e.nodeType&&e,d=$&&!0&&n&&!n.nodeType&&n,R=d&&d.exports===$,ae=R&&ve.process,fe=function(){try{return ae&&ae.binding&&ae.binding("util")}catch{}}(),Ie=fe&&fe.isTypedArray;function Be(I,j){for(var te=-1,pe=I==null?0:I.length,ct=0,Te=[];++te<pe;){var dt=I[te];j(dt,te,I)&&(Te[ct++]=dt)}return Te}function Ke(I,j){for(var te=-1,pe=j.length,ct=I.length;++te<pe;)I[ct+te]=j[te];return I}function Ue(I,j){for(var te=-1,pe=I==null?0:I.length;++te<pe;)if(j(I[te],te,I))return!0;return!1}function gt(I,j){for(var te=-1,pe=Array(I);++te<I;)pe[te]=j(te);return pe}function yt(I){return function(j){return I(j)}}function qe(I,j){return I.has(j)}function xe(I,j){return I==null?void 0:I[j]}function Ne(I){var j=-1,te=Array(I.size);return I.forEach(function(pe,ct){te[++j]=[ct,pe]}),te}function Le(I,j){return function(te){return I(j(te))}}function Fe(I){var j=-1,te=Array(I.size);return I.forEach(function(pe){te[++j]=pe}),te}var Pe=Array.prototype,$e=Function.prototype,Se=Object.prototype,Ce=z["__core-js_shared__"],He=$e.toString,Oe=Se.hasOwnProperty,Ve=function(){var I=/[^.]+$/.exec(Ce&&Ce.keys&&Ce.keys.IE_PROTO||"");return I?"Symbol(src)_1."+I:""}(),Ge=Se.toString,et=RegExp("^"+He.call(Oe).replace(be,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),tt=R?z.Buffer:void 0,Qe=z.Symbol,rr=z.Uint8Array,fr=Se.propertyIsEnumerable,Qr=Pe.splice,nr=Qe?Qe.toStringTag:void 0,an=Object.getOwnPropertySymbols,On=tt?tt.isBuffer:void 0,Hn=Le(Object.keys,Object),St=Er(z,"DataView"),_t=Er(z,"Map"),It=Er(z,"Promise"),xt=Er(z,"Set"),Et=Er(z,"WeakMap"),vt=Er(Object,"create"),jt=un(St),Ut=un(_t),Ot=un(It),Mt=un(xt),Pt=un(Et),Tt=Qe?Qe.prototype:void 0,Ct=Tt?Tt.valueOf:void 0;function lt(I){var j=-1,te=I==null?0:I.length;for(this.clear();++j<te;){var pe=I[j];this.set(pe[0],pe[1])}}function qt(){this.__data__=vt?vt(null):{},this.size=0}function Ft(I){var j=this.has(I)&&delete this.__data__[I];return this.size-=j?1:0,j}function wa(I){var j=this.__data__;if(vt){var te=j[I];return te===i?void 0:te}return Oe.call(j,I)?j[I]:void 0}function Ea(I){var j=this.__data__;return vt?j[I]!==void 0:Oe.call(j,I)}function Da(I,j){var te=this.__data__;return this.size+=this.has(I)?0:1,te[I]=vt&&j===void 0?i:j,this}lt.prototype.clear=qt,lt.prototype.delete=Ft,lt.prototype.get=wa,lt.prototype.has=Ea,lt.prototype.set=Da;function Rr(I){var j=-1,te=I==null?0:I.length;for(this.clear();++j<te;){var pe=I[j];this.set(pe[0],pe[1])}}function Sa(){this.__data__=[],this.size=0}function Ia(I){var j=this.__data__,te=kn(j,I);if(te<0)return!1;var pe=j.length-1;return te==pe?j.pop():Qr.call(j,te,1),--this.size,!0}function xa(I){var j=this.__data__,te=kn(j,I);return te<0?void 0:j[te][1]}function Oa(I){return kn(this.__data__,I)>-1}function Pa(I,j){var te=this.__data__,pe=kn(te,I);return pe<0?(++this.size,te.push([I,j])):te[pe][1]=j,this}Rr.prototype.clear=Sa,Rr.prototype.delete=Ia,Rr.prototype.get=xa,Rr.prototype.has=Oa,Rr.prototype.set=Pa;function cn(I){var j=-1,te=I==null?0:I.length;for(this.clear();++j<te;){var pe=I[j];this.set(pe[0],pe[1])}}function gi(){this.size=0,this.__data__={hash:new lt,map:new(_t||Rr),string:new lt}}function Ca(I){var j=Pn(this,I).delete(I);return this.size-=j?1:0,j}function yi(I){return Pn(this,I).get(I)}function Aa(I){return Pn(this,I).has(I)}function Ta(I,j){var te=Pn(this,I),pe=te.size;return te.set(I,j),this.size+=te.size==pe?0:1,this}cn.prototype.clear=gi,cn.prototype.delete=Ca,cn.prototype.get=yi,cn.prototype.has=Aa,cn.prototype.set=Ta;function _i(I){var j=-1,te=I==null?0:I.length;for(this.__data__=new cn;++j<te;)this.add(I[j])}function Ms(I){return this.__data__.set(I,i),this}function qs(I){return this.__data__.has(I)}_i.prototype.add=_i.prototype.push=Ms,_i.prototype.has=qs;function Br(I){var j=this.__data__=new Rr(I);this.size=j.size}function Ra(){this.__data__=new Rr,this.size=0}function Na(I){var j=this.__data__,te=j.delete(I);return this.size=j.size,te}function La(I){return this.__data__.get(I)}function $a(I){return this.__data__.has(I)}function Fs(I,j){var te=this.__data__;if(te instanceof Rr){var pe=te.__data__;if(!_t||pe.length<t-1)return pe.push([I,j]),this.size=++te.size,this;te=this.__data__=new cn(pe)}return te.set(I,j),this.size=te.size,this}Br.prototype.clear=Ra,Br.prototype.delete=Na,Br.prototype.get=La,Br.prototype.has=$a,Br.prototype.set=Fs;function zs(I,j){var te=bi(I),pe=!te&&Zs(I),ct=!te&&!pe&&Ji(I),Te=!te&&!pe&&!ct&&ro(I),dt=te||pe||ct||Te,zt=dt?gt(I.length,String):[],Xe=zt.length;for(var ut in I)Oe.call(I,ut)&&!(dt&&(ut=="length"||ct&&(ut=="offset"||ut=="parent")||Te&&(ut=="buffer"||ut=="byteLength"||ut=="byteOffset")||Gs(ut,Xe)))&&zt.push(ut);return zt}function kn(I,j){for(var te=I.length;te--;)if(Xs(I[te][0],j))return te;return-1}function Gi(I,j,te){var pe=j(I);return bi(I)?pe:Ke(pe,te(I))}function Kn(I){return I==null?I===void 0?W:ne:nr&&nr in Object(I)?Vs(I):Ma(I)}function Yi(I){return Wn(I)&&Kn(I)==f}function Vn(I,j,te,pe,ct){return I===j?!0:I==null||j==null||!Wn(I)&&!Wn(j)?I!==I&&j!==j:Bs(I,j,te,pe,Vn,ct)}function Bs(I,j,te,pe,ct,Te){var dt=bi(I),zt=bi(j),Xe=dt?g:Xr(I),ut=zt?g:Xr(j);Xe=Xe==f?L:Xe,ut=ut==f?L:ut;var Rt=Xe==L,dr=ut==L,Bt=Xe==ut;if(Bt&&Ji(I)){if(!Ji(j))return!1;dt=!0,Rt=!1}if(Bt&&!Rt)return Te||(Te=new Br),dt||ro(I)?vi(I,j,te,pe,ct,Te):Ua(I,j,Xe,te,pe,ct,Te);if(!(te&o)){var pt=Rt&&Oe.call(I,"__wrapped__"),ir=dr&&Oe.call(j,"__wrapped__");if(pt||ir){var Hr=pt?I.value():I,Nr=ir?j.value():j;return Te||(Te=new Br),ct(Hr,Nr,te,pe,Te)}}return Bt?(Te||(Te=new Br),Ks(I,j,te,pe,ct,Te)):!1}function ja(I){if(!to(I)||Js(I))return!1;var j=wi(I)?et:oe;return j.test(un(I))}function Hs(I){return Wn(I)&&eo(I.length)&&!!le[Kn(I)]}function ks(I){if(!Qs(I))return Hn(I);var j=[];for(var te in Object(I))Oe.call(I,te)&&te!="constructor"&&j.push(te);return j}function vi(I,j,te,pe,ct,Te){var dt=te&o,zt=I.length,Xe=j.length;if(zt!=Xe&&!(dt&&Xe>zt))return!1;var ut=Te.get(I);if(ut&&Te.get(j))return ut==j;var Rt=-1,dr=!0,Bt=te&c?new _i:void 0;for(Te.set(I,j),Te.set(j,I);++Rt<zt;){var pt=I[Rt],ir=j[Rt];if(pe)var Hr=dt?pe(ir,pt,Rt,j,I,Te):pe(pt,ir,Rt,I,j,Te);if(Hr!==void 0){if(Hr)continue;dr=!1;break}if(Bt){if(!Ue(j,function(Nr,Zr){if(!qe(Bt,Zr)&&(pt===Nr||ct(pt,Nr,te,pe,Te)))return Bt.push(Zr)})){dr=!1;break}}else if(!(pt===ir||ct(pt,ir,te,pe,Te))){dr=!1;break}}return Te.delete(I),Te.delete(j),dr}function Ua(I,j,te,pe,ct,Te,dt){switch(te){case ue:if(I.byteLength!=j.byteLength||I.byteOffset!=j.byteOffset)return!1;I=I.buffer,j=j.buffer;case se:return!(I.byteLength!=j.byteLength||!Te(new rr(I),new rr(j)));case _:case D:case H:return Xs(+I,+j);case S:return I.name==j.name&&I.message==j.message;case T:case h:return I==j+"";case F:var zt=Ne;case E:var Xe=pe&o;if(zt||(zt=Fe),I.size!=j.size&&!Xe)return!1;var ut=dt.get(I);if(ut)return ut==j;pe|=c,dt.set(I,j);var Rt=vi(zt(I),zt(j),pe,ct,Te,dt);return dt.delete(I),Rt;case b:if(Ct)return Ct.call(I)==Ct.call(j)}return!1}function Ks(I,j,te,pe,ct,Te){var dt=te&o,zt=mi(I),Xe=zt.length,ut=mi(j),Rt=ut.length;if(Xe!=Rt&&!dt)return!1;for(var dr=Xe;dr--;){var Bt=zt[dr];if(!(dt?Bt in j:Oe.call(j,Bt)))return!1}var pt=Te.get(I);if(pt&&Te.get(j))return pt==j;var ir=!0;Te.set(I,j),Te.set(j,I);for(var Hr=dt;++dr<Xe;){Bt=zt[dr];var Nr=I[Bt],Zr=j[Bt];if(pe)var Qi=dt?pe(Zr,Nr,Bt,j,I,Te):pe(Nr,Zr,Bt,I,j,Te);if(!(Qi===void 0?Nr===Zr||ct(Nr,Zr,te,pe,Te):Qi)){ir=!1;break}Hr||(Hr=Bt=="constructor")}if(ir&&!Hr){var Gn=I.constructor,Kt=j.constructor;Gn!=Kt&&"constructor"in I&&"constructor"in j&&!(typeof Gn=="function"&&Gn instanceof Gn&&typeof Kt=="function"&&Kt instanceof Kt)&&(ir=!1)}return Te.delete(I),Te.delete(j),ir}function mi(I){return Gi(I,za,Ws)}function Pn(I,j){var te=I.__data__;return Ys(j)?te[typeof j=="string"?"string":"hash"]:te.map}function Er(I,j){var te=xe(I,j);return ja(te)?te:void 0}function Vs(I){var j=Oe.call(I,nr),te=I[nr];try{I[nr]=void 0;var pe=!0}catch{}var ct=Ge.call(I);return pe&&(j?I[nr]=te:delete I[nr]),ct}var Ws=an?function(I){return I==null?[]:(I=Object(I),Be(an(I),function(j){return fr.call(I,j)}))}:at,Xr=Kn;(St&&Xr(new St(new ArrayBuffer(1)))!=ue||_t&&Xr(new _t)!=F||It&&Xr(It.resolve())!=M||xt&&Xr(new xt)!=E||Et&&Xr(new Et)!=G)&&(Xr=function(I){var j=Kn(I),te=j==L?I.constructor:void 0,pe=te?un(te):"";if(pe)switch(pe){case jt:return ue;case Ut:return F;case Ot:return M;case Mt:return E;case Pt:return G}return j});function Gs(I,j){return j=j??u,!!j&&(typeof I=="number"||we.test(I))&&I>-1&&I%1==0&&I<j}function Ys(I){var j=typeof I;return j=="string"||j=="number"||j=="symbol"||j=="boolean"?I!=="__proto__":I===null}function Js(I){return!!Ve&&Ve in I}function Qs(I){var j=I&&I.constructor,te=typeof j=="function"&&j.prototype||Se;return I===te}function Ma(I){return Ge.call(I)}function un(I){if(I!=null){try{return He.call(I)}catch{}try{return I+""}catch{}}return""}function Xs(I,j){return I===j||I!==I&&j!==j}var Zs=Yi(function(){return arguments}())?Yi:function(I){return Wn(I)&&Oe.call(I,"callee")&&!fr.call(I,"callee")},bi=Array.isArray;function qa(I){return I!=null&&eo(I.length)&&!wi(I)}var Ji=On||st;function Fa(I,j){return Vn(I,j)}function wi(I){if(!to(I))return!1;var j=Kn(I);return j==x||j==O||j==p||j==C}function eo(I){return typeof I=="number"&&I>-1&&I%1==0&&I<=u}function to(I){var j=typeof I;return I!=null&&(j=="object"||j=="function")}function Wn(I){return I!=null&&typeof I=="object"}var ro=Ie?yt(Ie):Hs;function za(I){return qa(I)?zs(I):ks(I)}function at(){return[]}function st(){return!1}n.exports=Fa})(ia,ia.exports);var a6=ia.exports;const c6=oa(a6);function u6(n,e){return e=e||{},new Promise(function(t,i){var o=new XMLHttpRequest,c=[],u=[],f={},g=function(){return{ok:(o.status/100|0)==2,statusText:o.statusText,status:o.status,url:o.responseURL,text:function(){return Promise.resolve(o.responseText)},json:function(){return Promise.resolve(o.responseText).then(JSON.parse)},blob:function(){return Promise.resolve(new Blob([o.response]))},clone:g,headers:{keys:function(){return c},entries:function(){return u},get:function(_){return f[_.toLowerCase()]},has:function(_){return _.toLowerCase()in f}}}};for(var p in o.open(e.method||"get",n,!0),o.onload=function(){o.getAllResponseHeaders().replace(/^(.*?):[^\S\n]*([\s\S]*?)$/gm,function(_,D,S){c.push(D=D.toLowerCase()),u.push([D,S]),f[D]=f[D]?f[D]+","+S:S}),t(g())},o.onerror=i,o.withCredentials=e.credentials=="include",e.headers)o.setRequestHeader(p,e.headers[p]);o.send(e.body||null)})}const h6=Object.freeze(Object.defineProperty({__proto__:null,default:u6},Symbol.toStringTag,{value:"Module"})),_d=ui(h6);var l6=self.fetch||(self.fetch=_d.default||_d);const f6=oa(l6);var d6={LESSOPEN:"| /usr/bin/lesspipe %s",npm_package_devDependencies__types_node:"^18.19.3",npm_package_dependencies__wagmi_cli:"^2.1.4",npm_package_dependencies__vitejs_plugin_react:"^4.2.1",USER:"anstak",npm_package_dependencies_react_toastify:"^10.0.5",npm_config_version_commit_hooks:"true",npm_config_user_agent:"yarn/1.22.19 npm/? node/v18.20.2 linux x64",COMP_WORDBREAKS:` 	
"'><;|&(:`,npm_package_scripts_vite_dev:"vite",npm_config_bin_links:"true",GIT_ASKPASS:"/home/anstak/.vscode-server/bin/b58957e67ee1e712cebf466b995adf4c5307b2bd/extensions/git/dist/askpass.sh",BUN_INSTALL:"/home/anstak/.bun",npm_node_execpath:"/home/anstak/.nvm/versions/node/v18.20.2/bin/node",npm_package_devDependencies_eslint_config_next:"^14.1.3",npm_config_init_version:"1.0.0",SHLVL:"1",npm_package_packageManager:"yarn@1.22.19",npm_package_dependencies_wagmi:"^2.5.11",npm_package_dependencies_react_babylonjs:"^3.1.30",npm_package_dependencies_babylonjs_gltf2interface:"^6.49.0",HOME:"/home/anstak",OLDPWD:"/home/anstak/erc20/jet-app/gh",TERM_PROGRAM_VERSION:"1.89.0",NVM_BIN:"/home/anstak/.nvm/versions/node/v18.20.2/bin",VSCODE_IPC_HOOK_CLI:"/mnt/wslg/runtime-dir/vscode-ipc-49be2629-a269-4e54-94ac-38d097da73f9.sock",npm_package_dependencies__babylonjs_loaders:"^6.49.0",NVM_INC:"/home/anstak/.nvm/versions/node/v18.20.2/include/node",COREPACK_ROOT:"/usr/lib/node_modules/corepack",npm_package_dependencies_framer_motion:"^11.1.7",npm_config_init_license:"MIT",VSCODE_GIT_ASKPASS_MAIN:"/home/anstak/.vscode-server/bin/b58957e67ee1e712cebf466b995adf4c5307b2bd/extensions/git/dist/askpass-main.js",YARN_WRAP_OUTPUT:"false",npm_package_dependencies__rainbow_me_rainbowkit:"^2.0.5",npm_config_version_tag_prefix:"v",VSCODE_GIT_ASKPASS_NODE:"/home/anstak/.vscode-server/bin/b58957e67ee1e712cebf466b995adf4c5307b2bd/node",npm_package_dependencies__babylonjs_inspector:"^6.49.0",npm_package_dependencies_dotenv:"^16.4.5",COLORTERM:"truecolor",WSL_DISTRO_NAME:"Ubuntu-20.04",npm_package_description:"First, run the development server:",npm_package_devDependencies_typescript:"5.4.2",NVM_DIR:"/home/anstak/.nvm",npm_package_readmeFilename:"README.md",npm_package_devDependencies__types_react_dom:"^18.2.22",WAYLAND_DISPLAY:"wayland-0",npm_package_scripts_dev:"next dev",LOGNAME:"anstak",npm_package_dependencies_zustand:"^4.5.2",npm_package_dependencies__babylonjs_gui:"^6.49.0",NAME:"DESKTOP-6EULP0M",WSL_INTEROP:"/run/WSL/18337_interop",PULSE_SERVER:"/mnt/wslg/PulseServer",_:"/usr/bin/yarn",npm_package_dependencies__babylonjs_gui_editor:"^6.49.0",npm_package_private:"true",npm_package_scripts_vite_build:"tsc && vite build",npm_package_scripts_lint:"next lint",npm_config_registry:"https://registry.yarnpkg.com",TERM:"xterm-256color",npm_package_scripts_start:"next start",npm_config_ignore_scripts:"",PATH:"/tmp/yarn--1715788523553-0.6000000124763312:/home/anstak/erc20/jet-app/node_modules/.bin:/home/anstak/.config/yarn/link/node_modules/.bin:/home/anstak/.yarn/bin:/home/anstak/.nvm/versions/node/v18.20.2/libexec/lib/node_modules/npm/bin/node-gyp-bin:/home/anstak/.nvm/versions/node/v18.20.2/lib/node_modules/npm/bin/node-gyp-bin:/home/anstak/.nvm/versions/node/v18.20.2/bin/node_modules/npm/bin/node-gyp-bin:/home/anstak/.bun/bin:/home/anstak/.turso:/home/anstak/.nvm/versions/node/v18.20.2/bin:/home/anstak/.cargo/bin:/home/anstak/.vscode-server/bin/b58957e67ee1e712cebf466b995adf4c5307b2bd/bin/remote-cli:/usr/local/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/local/games:/usr/lib/wsl/lib:/mnt/c/Python310/Scripts/:/mnt/c/Python310/:/mnt/c/WINDOWS/system32:/mnt/c/WINDOWS:/mnt/c/WINDOWS/System32/Wbem:/mnt/c/WINDOWS/System32/WindowsPowerShell/v1.0/:/mnt/c/WINDOWS/System32/OpenSSH/:/mnt/c/Program Files/Git/cmd:/mnt/c/Program Files/nodejs/:/mnt/c/ProgramData/chocolatey/bin:/mnt/c/Program Files (x86)/NVIDIA Corporation/PhysX/Common:/Docker/host/bin:/mnt/c/Program Files/dotnet/:/mnt/c/Users/user/AppData/Local/Microsoft/WindowsApps:/mnt/c/Users/user/AppData/Local/Programs/Microsoft VS Code/bin:/mnt/c/Users/user/AppData/Roaming/npm:/snap/bin",NODE:"/home/anstak/.nvm/versions/node/v18.20.2/bin/node",npm_package_name:"jet-app",XDG_RUNTIME_DIR:"/mnt/wslg/runtime-dir",npm_package_dependencies_viem:"^2.8.12",DISPLAY:":0",npm_package_devDependencies__types_react_modal:"^3.16.3",LANG:"C.UTF-8",npm_package_devDependencies_eslint:"^8.15.0",npm_package_dependencies_react_dom:"^18.2.0",LS_COLORS:"rs=0:di=01;34:ln=01;36:mh=00:pi=40;33:so=01;35:do=01;35:bd=40;33;01:cd=40;33;01:or=40;31;01:mi=00:su=37;41:sg=30;43:ca=30;41:tw=30;42:ow=34;42:st=37;44:ex=01;32:*.tar=01;31:*.tgz=01;31:*.arc=01;31:*.arj=01;31:*.taz=01;31:*.lha=01;31:*.lz4=01;31:*.lzh=01;31:*.lzma=01;31:*.tlz=01;31:*.txz=01;31:*.tzo=01;31:*.t7z=01;31:*.zip=01;31:*.z=01;31:*.dz=01;31:*.gz=01;31:*.lrz=01;31:*.lz=01;31:*.lzo=01;31:*.xz=01;31:*.zst=01;31:*.tzst=01;31:*.bz2=01;31:*.bz=01;31:*.tbz=01;31:*.tbz2=01;31:*.tz=01;31:*.deb=01;31:*.rpm=01;31:*.jar=01;31:*.war=01;31:*.ear=01;31:*.sar=01;31:*.rar=01;31:*.alz=01;31:*.ace=01;31:*.zoo=01;31:*.cpio=01;31:*.7z=01;31:*.rz=01;31:*.cab=01;31:*.wim=01;31:*.swm=01;31:*.dwm=01;31:*.esd=01;31:*.jpg=01;35:*.jpeg=01;35:*.mjpg=01;35:*.mjpeg=01;35:*.gif=01;35:*.bmp=01;35:*.pbm=01;35:*.pgm=01;35:*.ppm=01;35:*.tga=01;35:*.xbm=01;35:*.xpm=01;35:*.tif=01;35:*.tiff=01;35:*.png=01;35:*.svg=01;35:*.svgz=01;35:*.mng=01;35:*.pcx=01;35:*.mov=01;35:*.mpg=01;35:*.mpeg=01;35:*.m2v=01;35:*.mkv=01;35:*.webm=01;35:*.ogm=01;35:*.mp4=01;35:*.m4v=01;35:*.mp4v=01;35:*.vob=01;35:*.qt=01;35:*.nuv=01;35:*.wmv=01;35:*.asf=01;35:*.rm=01;35:*.rmvb=01;35:*.flc=01;35:*.avi=01;35:*.fli=01;35:*.flv=01;35:*.gl=01;35:*.dl=01;35:*.xcf=01;35:*.xwd=01;35:*.yuv=01;35:*.cgm=01;35:*.emf=01;35:*.ogv=01;35:*.ogx=01;35:*.aac=00;36:*.au=00;36:*.flac=00;36:*.m4a=00;36:*.mid=00;36:*.midi=00;36:*.mka=00;36:*.mp3=00;36:*.mpc=00;36:*.ogg=00;36:*.ra=00;36:*.wav=00;36:*.oga=00;36:*.opus=00;36:*.spx=00;36:*.xspf=00;36:",VSCODE_GIT_IPC_HANDLE:"/mnt/wslg/runtime-dir/vscode-git-e4010be119.sock",TERM_PROGRAM:"vscode",npm_lifecycle_script:"tsc && vite build",npm_package_dependencies_react_cookie:"^7.1.4",npm_config_version_git_message:"v%s",SHELL:"/bin/bash",npm_lifecycle_event:"vite:build",npm_package_devDependencies__types_react:"^18.2.64",npm_package_version:"0.1.0",npm_config_argv:'{"remain":[],"cooked":["run","vite:build"],"original":["vite:build"]}',npm_package_dependencies__twa_dev_sdk:"^7.0.0",npm_package_dependencies__babylonjs_materials:"^6.49.0",npm_package_scripts_build:"next build",npm_config_strict_peer_dependencies:"",LESSCLOSE:"/usr/bin/lesspipe %s %s",npm_package_dependencies_vite:"^5.2.11",npm_package_dependencies__babylonjs_serializers:"^6.49.0",npm_package_dependencies__tanstack_react_query:"^5.28.4",npm_config_version_git_tag:"true",npm_config_version_git_sign:"",npm_package_dependencies_classnames:"^2.5.1",npm_package_dependencies__vitejs_plugin_basic_ssl:"^1.1.0",npm_package_scripts_generate:"wagmi generate",npm_config_strict_ssl:"true",VSCODE_GIT_ASKPASS_EXTRA_ARGS:"",PWD:"/home/anstak/erc20/jet-app",npm_execpath:"/home/anstak/.node/corepack/yarn/1.22.19/bin/yarn.js",npm_package_dependencies_bootstrap:"^5.3.3",NVM_CD_FLAGS:"",XDG_DATA_DIRS:"/usr/local/share:/usr/share:/var/lib/snapd/desktop",npm_package_dependencies_react_modal:"^3.16.1",npm_config_save_prefix:"^",npm_config_ignore_optional:"",npm_package_dependencies_next:"^14.1.3",HOSTTYPE:"x86_64",npm_package_dependencies__babylonjs_core:"^6.49.0",INIT_CWD:"/home/anstak/erc20/jet-app",WSLENV:"VSCODE_WSL_EXT_LOCATION/up",npm_package_dependencies_react:"^18.2.0",NODE_ENV:"production",NEXT_PUBLIC_ENABLE_TESTNETS:"true",NEXT_PUBLIC_WALLETCONNECT_PROJECT_ID:"04e7ef46cd7587fd99b538800fa59a9c",NODE_VERSION:"18",NEXT_PUBLIC_ALCHEMY_API_KEY:"RFt6h2Qn1ZTLDvqr_PZ94HNZ7OEJfW_h",NEXT_PUBLIC_CONTRACT_ARBITRUM_BETS:"0x13020CbCB419C075Fae4C04E469F905b31Bde0B9",NEXT_PUBLIC_CONTRACT_ARBITRUM_LJT:"0x8d6DBb3C052b6ab8c95B722bAacB2f07d82Ea9D1"};function p6(n,e){if(n.length>=255)throw new TypeError("Alphabet too long");for(var t=new Uint8Array(256),i=0;i<t.length;i++)t[i]=255;for(var o=0;o<n.length;o++){var c=n.charAt(o),u=c.charCodeAt(0);if(t[u]!==255)throw new TypeError(c+" is ambiguous");t[u]=o}var f=n.length,g=n.charAt(0),p=Math.log(f)/Math.log(256),_=Math.log(256)/Math.log(f);function D(O){if(O instanceof Uint8Array||(ArrayBuffer.isView(O)?O=new Uint8Array(O.buffer,O.byteOffset,O.byteLength):Array.isArray(O)&&(O=Uint8Array.from(O))),!(O instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(O.length===0)return"";for(var F=0,H=0,ne=0,L=O.length;ne!==L&&O[ne]===0;)ne++,F++;for(var M=(L-ne)*_+1>>>0,C=new Uint8Array(M);ne!==L;){for(var T=O[ne],E=0,h=M-1;(T!==0||E<H)&&h!==-1;h--,E++)T+=256*C[h]>>>0,C[h]=T%f>>>0,T=T/f>>>0;if(T!==0)throw new Error("Non-zero carry");H=E,ne++}for(var b=M-H;b!==M&&C[b]===0;)b++;for(var W=g.repeat(F);b<M;++b)W+=n.charAt(C[b]);return W}function S(O){if(typeof O!="string")throw new TypeError("Expected String");if(O.length===0)return new Uint8Array;var F=0;if(O[F]!==" "){for(var H=0,ne=0;O[F]===g;)H++,F++;for(var L=(O.length-F)*p+1>>>0,M=new Uint8Array(L);O[F];){var C=t[O.charCodeAt(F)];if(C===255)return;for(var T=0,E=L-1;(C!==0||T<ne)&&E!==-1;E--,T++)C+=f*M[E]>>>0,M[E]=C%256>>>0,C=C/256>>>0;if(C!==0)throw new Error("Non-zero carry");ne=T,F++}if(O[F]!==" "){for(var h=L-ne;h!==L&&M[h]===0;)h++;for(var b=new Uint8Array(H+(L-h)),W=H;h!==L;)b[W++]=M[h++];return b}}}function x(O){var F=S(O);if(F)return F;throw new Error(`Non-${e} character`)}return{encode:D,decodeUnsafe:S,decode:x}}var g6=p6,y6=g6;const ng=n=>{if(n instanceof Uint8Array&&n.constructor.name==="Uint8Array")return n;if(n instanceof ArrayBuffer)return new Uint8Array(n);if(ArrayBuffer.isView(n))return new Uint8Array(n.buffer,n.byteOffset,n.byteLength);throw new Error("Unknown type, must be binary type")},_6=n=>new TextEncoder().encode(n),v6=n=>new TextDecoder().decode(n);class m6{constructor(e,t,i){this.name=e,this.prefix=t,this.baseEncode=i}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class b6{constructor(e,t,i){if(this.name=e,this.prefix=t,t.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=t.codePointAt(0),this.baseDecode=i}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return ig(this,e)}}class w6{constructor(e){this.decoders=e}or(e){return ig(this,e)}decode(e){const t=e[0],i=this.decoders[t];if(i)return i.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const ig=(n,e)=>new w6({...n.decoders||{[n.prefix]:n},...e.decoders||{[e.prefix]:e}});class E6{constructor(e,t,i,o){this.name=e,this.prefix=t,this.baseEncode=i,this.baseDecode=o,this.encoder=new m6(e,t,i),this.decoder=new b6(e,t,o)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const ma=({name:n,prefix:e,encode:t,decode:i})=>new E6(n,e,t,i),Us=({prefix:n,name:e,alphabet:t})=>{const{encode:i,decode:o}=y6(t,e);return ma({prefix:n,name:e,encode:i,decode:c=>ng(o(c))})},D6=(n,e,t,i)=>{const o={};for(let _=0;_<e.length;++_)o[e[_]]=_;let c=n.length;for(;n[c-1]==="=";)--c;const u=new Uint8Array(c*t/8|0);let f=0,g=0,p=0;for(let _=0;_<c;++_){const D=o[n[_]];if(D===void 0)throw new SyntaxError(`Non-${i} character`);g=g<<t|D,f+=t,f>=8&&(f-=8,u[p++]=255&g>>f)}if(f>=t||255&g<<8-f)throw new SyntaxError("Unexpected end of data");return u},S6=(n,e,t)=>{const i=e[e.length-1]==="=",o=(1<<t)-1;let c="",u=0,f=0;for(let g=0;g<n.length;++g)for(f=f<<8|n[g],u+=8;u>t;)u-=t,c+=e[o&f>>u];if(u&&(c+=e[o&f<<t-u]),i)for(;c.length*t&7;)c+="=";return c},Qt=({name:n,prefix:e,bitsPerChar:t,alphabet:i})=>ma({prefix:e,name:n,encode(o){return S6(o,i,t)},decode(o){return D6(o,i,t,n)}}),I6=ma({prefix:"\0",name:"identity",encode:n=>v6(n),decode:n=>_6(n)});var x6=Object.freeze({__proto__:null,identity:I6});const O6=Qt({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var P6=Object.freeze({__proto__:null,base2:O6});const C6=Qt({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var A6=Object.freeze({__proto__:null,base8:C6});const T6=Us({prefix:"9",name:"base10",alphabet:"0123456789"});var R6=Object.freeze({__proto__:null,base10:T6});const N6=Qt({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),L6=Qt({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var $6=Object.freeze({__proto__:null,base16:N6,base16upper:L6});const j6=Qt({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),U6=Qt({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),M6=Qt({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),q6=Qt({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),F6=Qt({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),z6=Qt({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),B6=Qt({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),H6=Qt({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),k6=Qt({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var K6=Object.freeze({__proto__:null,base32:j6,base32upper:U6,base32pad:M6,base32padupper:q6,base32hex:F6,base32hexupper:z6,base32hexpad:B6,base32hexpadupper:H6,base32z:k6});const V6=Us({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),W6=Us({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var G6=Object.freeze({__proto__:null,base36:V6,base36upper:W6});const Y6=Us({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),J6=Us({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var Q6=Object.freeze({__proto__:null,base58btc:Y6,base58flickr:J6});const X6=Qt({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),Z6=Qt({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),eI=Qt({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),tI=Qt({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var rI=Object.freeze({__proto__:null,base64:X6,base64pad:Z6,base64url:eI,base64urlpad:tI});const sg=Array.from("🚀🪐☄🛰🌌🌑🌒🌓🌔🌕🌖🌗🌘🌍🌏🌎🐉☀💻🖥💾💿😂❤😍🤣😊🙏💕😭😘👍😅👏😁🔥🥰💔💖💙😢🤔😆🙄💪😉☺👌🤗💜😔😎😇🌹🤦🎉💞✌✨🤷😱😌🌸🙌😋💗💚😏💛🙂💓🤩😄😀🖤😃💯🙈👇🎶😒🤭❣😜💋👀😪😑💥🙋😞😩😡🤪👊🥳😥🤤👉💃😳✋😚😝😴🌟😬🙃🍀🌷😻😓⭐✅🥺🌈😈🤘💦✔😣🏃💐☹🎊💘😠☝😕🌺🎂🌻😐🖕💝🙊😹🗣💫💀👑🎵🤞😛🔴😤🌼😫⚽🤙☕🏆🤫👈😮🙆🍻🍃🐶💁😲🌿🧡🎁⚡🌞🎈❌✊👋😰🤨😶🤝🚶💰🍓💢🤟🙁🚨💨🤬✈🎀🍺🤓😙💟🌱😖👶🥴▶➡❓💎💸⬇😨🌚🦋😷🕺⚠🙅😟😵👎🤲🤠🤧📌🔵💅🧐🐾🍒😗🤑🌊🤯🐷☎💧😯💆👆🎤🙇🍑❄🌴💣🐸💌📍🥀🤢👅💡💩👐📸👻🤐🤮🎼🥵🚩🍎🍊👼💍📣🥂"),nI=sg.reduce((n,e,t)=>(n[t]=e,n),[]),iI=sg.reduce((n,e,t)=>(n[e.codePointAt(0)]=t,n),[]);function sI(n){return n.reduce((e,t)=>(e+=nI[t],e),"")}function oI(n){const e=[];for(const t of n){const i=iI[t.codePointAt(0)];if(i===void 0)throw new Error(`Non-base256emoji character: ${t}`);e.push(i)}return new Uint8Array(e)}const aI=ma({prefix:"🚀",name:"base256emoji",encode:sI,decode:oI});var cI=Object.freeze({__proto__:null,base256emoji:aI}),uI=og,vd=128,hI=127,lI=~hI,fI=Math.pow(2,31);function og(n,e,t){e=e||[],t=t||0;for(var i=t;n>=fI;)e[t++]=n&255|vd,n/=128;for(;n&lI;)e[t++]=n&255|vd,n>>>=7;return e[t]=n|0,og.bytes=t-i+1,e}var dI=Mu,pI=128,md=127;function Mu(n,i){var t=0,i=i||0,o=0,c=i,u,f=n.length;do{if(c>=f)throw Mu.bytes=0,new RangeError("Could not decode varint");u=n[c++],t+=o<28?(u&md)<<o:(u&md)*Math.pow(2,o),o+=7}while(u>=pI);return Mu.bytes=c-i,t}var gI=Math.pow(2,7),yI=Math.pow(2,14),_I=Math.pow(2,21),vI=Math.pow(2,28),mI=Math.pow(2,35),bI=Math.pow(2,42),wI=Math.pow(2,49),EI=Math.pow(2,56),DI=Math.pow(2,63),SI=function(n){return n<gI?1:n<yI?2:n<_I?3:n<vI?4:n<mI?5:n<bI?6:n<wI?7:n<EI?8:n<DI?9:10},II={encode:uI,decode:dI,encodingLength:SI},ag=II;const bd=(n,e,t=0)=>(ag.encode(n,e,t),e),wd=n=>ag.encodingLength(n),qu=(n,e)=>{const t=e.byteLength,i=wd(n),o=i+wd(t),c=new Uint8Array(o+t);return bd(n,c,0),bd(t,c,i),c.set(e,o),new xI(n,t,e,c)};class xI{constructor(e,t,i,o){this.code=e,this.size=t,this.digest=i,this.bytes=o}}const cg=({name:n,code:e,encode:t})=>new OI(n,e,t);class OI{constructor(e,t,i){this.name=e,this.code=t,this.encode=i}digest(e){if(e instanceof Uint8Array){const t=this.encode(e);return t instanceof Uint8Array?qu(this.code,t):t.then(i=>qu(this.code,i))}else throw Error("Unknown type, must be binary type")}}const ug=n=>async e=>new Uint8Array(await crypto.subtle.digest(n,e)),PI=cg({name:"sha2-256",code:18,encode:ug("SHA-256")}),CI=cg({name:"sha2-512",code:19,encode:ug("SHA-512")});var AI=Object.freeze({__proto__:null,sha256:PI,sha512:CI});const hg=0,TI="identity",lg=ng,RI=n=>qu(hg,lg(n)),NI={code:hg,name:TI,encode:lg,digest:RI};var LI=Object.freeze({__proto__:null,identity:NI});new TextEncoder,new TextDecoder;const Ed={...x6,...P6,...A6,...R6,...$6,...K6,...G6,...Q6,...rI,...cI};({...AI,...LI});function fg(n){return globalThis.Buffer!=null?new Uint8Array(n.buffer,n.byteOffset,n.byteLength):n}function $I(n=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?fg(globalThis.Buffer.allocUnsafe(n)):new Uint8Array(n)}function dg(n,e,t,i){return{name:n,prefix:e,encoder:{name:n,prefix:e,encode:t},decoder:{decode:i}}}const Dd=dg("utf8","u",n=>"u"+new TextDecoder("utf8").decode(n),n=>new TextEncoder().encode(n.substring(1))),su=dg("ascii","a",n=>{let e="a";for(let t=0;t<n.length;t++)e+=String.fromCharCode(n[t]);return e},n=>{n=n.substring(1);const e=$I(n.length);for(let t=0;t<n.length;t++)e[t]=n.charCodeAt(t);return e}),jI={utf8:Dd,"utf-8":Dd,hex:Ed.base16,latin1:su,ascii:su,binary:su,...Ed};function UI(n,e="utf8"){const t=jI[e];if(!t)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?fg(globalThis.Buffer.from(n,"utf-8")):t.decoder.decode(`${t.prefix}${n}`)}const pg="wc",MI=2,uh="core",qn=`${pg}@2:${uh}:`,qI={name:uh,logger:"error"},FI={database:":memory:"},zI="crypto",Sd="client_ed25519_seed",BI=_e.ONE_DAY,HI="keychain",kI="0.3",KI="messages",VI="0.3",WI=_e.SIX_HOURS,GI="publisher",gg="irn",YI="error",yg="wss://relay.walletconnect.com",Id="wss://relay.walletconnect.org",JI="relayer",tr={message:"relayer_message",message_ack:"relayer_message_ack",connect:"relayer_connect",disconnect:"relayer_disconnect",error:"relayer_error",connection_stalled:"relayer_connection_stalled",transport_closed:"relayer_transport_closed",publish:"relayer_publish"},QI="_subscription",wn={payload:"payload",connect:"connect",disconnect:"disconnect",error:"error"},XI=_e.ONE_SECOND,ZI="2.11.2",e5=1e4,t5="0.3",r5="WALLETCONNECT_CLIENT_ID",Gr={created:"subscription_created",deleted:"subscription_deleted",expired:"subscription_expired",disabled:"subscription_disabled",sync:"subscription_sync",resubscribed:"subscription_resubscribed"},n5="subscription",i5="0.3",s5=_e.FIVE_SECONDS*1e3,o5="pairing",a5="0.3",_s={wc_pairingDelete:{req:{ttl:_e.ONE_DAY,prompt:!1,tag:1e3},res:{ttl:_e.ONE_DAY,prompt:!1,tag:1001}},wc_pairingPing:{req:{ttl:_e.THIRTY_SECONDS,prompt:!1,tag:1002},res:{ttl:_e.THIRTY_SECONDS,prompt:!1,tag:1003}},unregistered_method:{req:{ttl:_e.ONE_DAY,prompt:!1,tag:0},res:{ttl:_e.ONE_DAY,prompt:!1,tag:0}}},ws={create:"pairing_create",expire:"pairing_expire",delete:"pairing_delete",ping:"pairing_ping"},sn={created:"history_created",updated:"history_updated",deleted:"history_deleted",sync:"history_sync"},c5="history",u5="0.3",h5="expirer",zr={created:"expirer_created",deleted:"expirer_deleted",expired:"expirer_expired",sync:"expirer_sync"},l5="0.3",ou="verify-api",Mi="https://verify.walletconnect.com",Fu="https://verify.walletconnect.org",f5=[Mi,Fu],d5="echo",p5="https://echo.walletconnect.com";class g5{constructor(e,t){this.core=e,this.logger=t,this.keychain=new Map,this.name=HI,this.version=kI,this.initialized=!1,this.storagePrefix=qn,this.init=async()=>{if(!this.initialized){const i=await this.getKeyChain();typeof i<"u"&&(this.keychain=i),this.initialized=!0}},this.has=i=>(this.isInitialized(),this.keychain.has(i)),this.set=async(i,o)=>{this.isInitialized(),this.keychain.set(i,o),await this.persist()},this.get=i=>{this.isInitialized();const o=this.keychain.get(i);if(typeof o>"u"){const{message:c}=ce("NO_MATCHING_KEY",`${this.name}: ${i}`);throw new Error(c)}return o},this.del=async i=>{this.isInitialized(),this.keychain.delete(i),await this.persist()},this.core=e,this.logger=Je.generateChildLogger(t,this.name)}get context(){return Je.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}async setKeyChain(e){await this.core.storage.setItem(this.storageKey,Rp(e))}async getKeyChain(){const e=await this.core.storage.getItem(this.storageKey);return typeof e<"u"?Np(e):void 0}async persist(){await this.setKeyChain(this.keychain)}isInitialized(){if(!this.initialized){const{message:e}=ce("NOT_INITIALIZED",this.name);throw new Error(e)}}}class y5{constructor(e,t,i){this.core=e,this.logger=t,this.name=zI,this.initialized=!1,this.init=async()=>{this.initialized||(await this.keychain.init(),this.initialized=!0)},this.hasKeys=o=>(this.isInitialized(),this.keychain.has(o)),this.getClientId=async()=>{this.isInitialized();const o=await this.getClientSeed(),c=ud(o);return Gp(c.publicKey)},this.generateKeyPair=()=>{this.isInitialized();const o=i3();return this.setPrivateKey(o.publicKey,o.privateKey)},this.signJWT=async o=>{this.isInitialized();const c=await this.getClientSeed(),u=ud(c),f=xu();return await v2(f,o,BI,u)},this.generateSharedKey=(o,c,u)=>{this.isInitialized();const f=this.getPrivateKey(o),g=s3(f,c);return this.setSymKey(g,u)},this.setSymKey=async(o,c)=>{this.isInitialized();const u=c||o3(o);return await this.keychain.set(u,o),u},this.deleteKeyPair=async o=>{this.isInitialized(),await this.keychain.del(o)},this.deleteSymKey=async o=>{this.isInitialized(),await this.keychain.del(o)},this.encode=async(o,c,u)=>{this.isInitialized();const f=Tp(u),g=ci(c);if(Uf(f)){const S=f.senderPublicKey,x=f.receiverPublicKey;o=await this.generateSharedKey(S,x)}const p=this.getSymKey(o),{type:_,senderPublicKey:D}=f;return c3({type:_,symKey:p,message:g,senderPublicKey:D})},this.decode=async(o,c,u)=>{this.isInitialized();const f=l3(c,u);if(Uf(f)){const g=f.receiverPublicKey,p=f.senderPublicKey;o=await this.generateSharedKey(g,p)}try{const g=this.getSymKey(o),p=u3({symKey:g,encoded:c});return js(p)}catch(g){this.logger.error(`Failed to decode message from topic: '${o}', clientId: '${await this.getClientId()}'`),this.logger.error(g)}},this.getPayloadType=o=>{const c=ta(o);return Ns(c.type)},this.getPayloadSenderPublicKey=o=>{const c=ta(o);return c.senderPublicKey?lr(c.senderPublicKey,hr):void 0},this.core=e,this.logger=Je.generateChildLogger(t,this.name),this.keychain=i||new g5(this.core,this.logger)}get context(){return Je.getLoggerContext(this.logger)}async setPrivateKey(e,t){return await this.keychain.set(e,t),e}getPrivateKey(e){return this.keychain.get(e)}async getClientSeed(){let e="";try{e=this.keychain.get(Sd)}catch{e=xu(),await this.keychain.set(Sd,e)}return UI(e,"base16")}getSymKey(e){return this.keychain.get(e)}isInitialized(){if(!this.initialized){const{message:e}=ce("NOT_INITIALIZED",this.name);throw new Error(e)}}}class _5 extends YS{constructor(e,t){super(e,t),this.logger=e,this.core=t,this.messages=new Map,this.name=KI,this.version=VI,this.initialized=!1,this.storagePrefix=qn,this.init=async()=>{if(!this.initialized){this.logger.trace("Initialized");try{const i=await this.getRelayerMessages();typeof i<"u"&&(this.messages=i),this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",size:this.messages.size})}catch(i){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(i)}finally{this.initialized=!0}}},this.set=async(i,o)=>{this.isInitialized();const c=Fi(o);let u=this.messages.get(i);return typeof u>"u"&&(u={}),typeof u[c]<"u"||(u[c]=o,this.messages.set(i,u),await this.persist()),c},this.get=i=>{this.isInitialized();let o=this.messages.get(i);return typeof o>"u"&&(o={}),o},this.has=(i,o)=>{this.isInitialized();const c=this.get(i),u=Fi(o);return typeof c[u]<"u"},this.del=async i=>{this.isInitialized(),this.messages.delete(i),await this.persist()},this.logger=Je.generateChildLogger(e,this.name),this.core=t}get context(){return Je.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}async setRelayerMessages(e){await this.core.storage.setItem(this.storageKey,Rp(e))}async getRelayerMessages(){const e=await this.core.storage.getItem(this.storageKey);return typeof e<"u"?Np(e):void 0}async persist(){await this.setRelayerMessages(this.messages)}isInitialized(){if(!this.initialized){const{message:e}=ce("NOT_INITIALIZED",this.name);throw new Error(e)}}}class v5 extends JS{constructor(e,t){super(e,t),this.relayer=e,this.logger=t,this.events=new Ar.EventEmitter,this.name=GI,this.queue=new Map,this.publishTimeout=_e.toMiliseconds(_e.TEN_SECONDS*2),this.needsTransportRestart=!1,this.publish=async(i,o,c)=>{var u;this.logger.debug("Publishing Payload"),this.logger.trace({type:"method",method:"publish",params:{topic:i,message:o,opts:c}});try{const f=(c==null?void 0:c.ttl)||WI,g=Ou(c),p=(c==null?void 0:c.prompt)||!1,_=(c==null?void 0:c.tag)||0,D=(c==null?void 0:c.id)||eg().toString(),S={topic:i,message:o,opts:{ttl:f,relay:g,prompt:p,tag:_,id:D}},x=setTimeout(()=>this.queue.set(D,S),this.publishTimeout);try{await await xs(this.rpcPublish(i,o,f,g,p,_,D),this.publishTimeout,`Failed to publish payload, please try again. id:${D} tag:${_}`),this.removeRequestFromQueue(D),this.relayer.events.emit(tr.publish,S)}catch(O){if(this.logger.debug("Publishing Payload stalled"),this.needsTransportRestart=!0,(u=c==null?void 0:c.internal)!=null&&u.throwOnFailedPublish)throw this.removeRequestFromQueue(D),O;return}finally{clearTimeout(x)}this.logger.debug("Successfully Published Payload"),this.logger.trace({type:"method",method:"publish",params:{topic:i,message:o,opts:c}})}catch(f){throw this.logger.debug("Failed to Publish Payload"),this.logger.error(f),f}},this.on=(i,o)=>{this.events.on(i,o)},this.once=(i,o)=>{this.events.once(i,o)},this.off=(i,o)=>{this.events.off(i,o)},this.removeListener=(i,o)=>{this.events.removeListener(i,o)},this.relayer=e,this.logger=Je.generateChildLogger(t,this.name),this.registerEventListeners()}get context(){return Je.getLoggerContext(this.logger)}rpcPublish(e,t,i,o,c,u,f){var g,p,_,D;const S={method:Jo(o.protocol).publish,params:{topic:e,message:t,ttl:i,prompt:c,tag:u},id:f};return br((g=S.params)==null?void 0:g.prompt)&&((p=S.params)==null||delete p.prompt),br((_=S.params)==null?void 0:_.tag)&&((D=S.params)==null||delete D.tag),this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"message",direction:"outgoing",request:S}),this.relayer.request(S)}removeRequestFromQueue(e){this.queue.delete(e)}checkQueue(){this.queue.forEach(async e=>{const{topic:t,message:i,opts:o}=e;await this.publish(t,i,o)})}registerEventListeners(){this.relayer.core.heartbeat.on(Wi.HEARTBEAT_EVENTS.pulse,()=>{if(this.needsTransportRestart){this.needsTransportRestart=!1,this.relayer.events.emit(tr.connection_stalled);return}this.checkQueue()}),this.relayer.on(tr.message_ack,e=>{this.removeRequestFromQueue(e.id.toString())})}}class m5{constructor(){this.map=new Map,this.set=(e,t)=>{const i=this.get(e);this.exists(e,t)||this.map.set(e,[...i,t])},this.get=e=>this.map.get(e)||[],this.exists=(e,t)=>this.get(e).includes(t),this.delete=(e,t)=>{if(typeof t>"u"){this.map.delete(e);return}if(!this.map.has(e))return;const i=this.get(e);if(!this.exists(e,t))return;const o=i.filter(c=>c!==t);if(!o.length){this.map.delete(e);return}this.map.set(e,o)},this.clear=()=>{this.map.clear()}}get topics(){return Array.from(this.map.keys())}}var b5=Object.defineProperty,w5=Object.defineProperties,E5=Object.getOwnPropertyDescriptors,xd=Object.getOwnPropertySymbols,D5=Object.prototype.hasOwnProperty,S5=Object.prototype.propertyIsEnumerable,Od=(n,e,t)=>e in n?b5(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,vs=(n,e)=>{for(var t in e||(e={}))D5.call(e,t)&&Od(n,t,e[t]);if(xd)for(var t of xd(e))S5.call(e,t)&&Od(n,t,e[t]);return n},au=(n,e)=>w5(n,E5(e));class I5 extends ZS{constructor(e,t){super(e,t),this.relayer=e,this.logger=t,this.subscriptions=new Map,this.topicMap=new m5,this.events=new Ar.EventEmitter,this.name=n5,this.version=i5,this.pending=new Map,this.cached=[],this.initialized=!1,this.pendingSubscriptionWatchLabel="pending_sub_watch_label",this.pollingInterval=20,this.storagePrefix=qn,this.subscribeTimeout=1e4,this.restartInProgress=!1,this.batchSubscribeTopicsLimit=500,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),this.registerEventListeners(),this.clientId=await this.relayer.core.crypto.getClientId())},this.subscribe=async(i,o)=>{await this.restartToComplete(),this.isInitialized(),this.logger.debug("Subscribing Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:i,opts:o}});try{const c=Ou(o),u={topic:i,relay:c};this.pending.set(i,u);const f=await this.rpcSubscribe(i,c);return this.onSubscribe(f,u),this.logger.debug("Successfully Subscribed Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:i,opts:o}}),f}catch(c){throw this.logger.debug("Failed to Subscribe Topic"),this.logger.error(c),c}},this.unsubscribe=async(i,o)=>{await this.restartToComplete(),this.isInitialized(),typeof(o==null?void 0:o.id)<"u"?await this.unsubscribeById(i,o.id,o):await this.unsubscribeByTopic(i,o)},this.isSubscribed=async i=>{if(this.topics.includes(i))return!0;const o=`${this.pendingSubscriptionWatchLabel}_${i}`;return await new Promise((c,u)=>{const f=new _e.Watch;f.start(o);const g=setInterval(()=>{!this.pending.has(i)&&this.topics.includes(i)&&(clearInterval(g),f.stop(o),c(!0)),f.elapsed(o)>=s5&&(clearInterval(g),f.stop(o),u(new Error("Subscription resolution timeout")))},this.pollingInterval)}).catch(()=>!1)},this.on=(i,o)=>{this.events.on(i,o)},this.once=(i,o)=>{this.events.once(i,o)},this.off=(i,o)=>{this.events.off(i,o)},this.removeListener=(i,o)=>{this.events.removeListener(i,o)},this.restart=async()=>{this.restartInProgress=!0,await this.restore(),await this.reset(),this.restartInProgress=!1},this.relayer=e,this.logger=Je.generateChildLogger(t,this.name),this.clientId=""}get context(){return Je.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.relayer.core.customStoragePrefix+"//"+this.name}get length(){return this.subscriptions.size}get ids(){return Array.from(this.subscriptions.keys())}get values(){return Array.from(this.subscriptions.values())}get topics(){return this.topicMap.topics}hasSubscription(e,t){let i=!1;try{i=this.getSubscription(e).topic===t}catch{}return i}onEnable(){this.cached=[],this.initialized=!0}onDisable(){this.cached=this.values,this.subscriptions.clear(),this.topicMap.clear()}async unsubscribeByTopic(e,t){const i=this.topicMap.get(e);await Promise.all(i.map(async o=>await this.unsubscribeById(e,o,t)))}async unsubscribeById(e,t,i){this.logger.debug("Unsubscribing Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:t,opts:i}});try{const o=Ou(i);await this.rpcUnsubscribe(e,t,o);const c=bt("USER_DISCONNECTED",`${this.name}, ${e}`);await this.onUnsubscribe(e,t,c),this.logger.debug("Successfully Unsubscribed Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:t,opts:i}})}catch(o){throw this.logger.debug("Failed to Unsubscribe Topic"),this.logger.error(o),o}}async rpcSubscribe(e,t){const i={method:Jo(t.protocol).subscribe,params:{topic:e}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:i});try{await await xs(this.relayer.request(i),this.subscribeTimeout)}catch{this.logger.debug("Outgoing Relay Subscribe Payload stalled"),this.relayer.events.emit(tr.connection_stalled)}return Fi(e+this.clientId)}async rpcBatchSubscribe(e){if(!e.length)return;const t=e[0].relay,i={method:Jo(t.protocol).batchSubscribe,params:{topics:e.map(o=>o.topic)}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:i});try{return await await xs(this.relayer.request(i),this.subscribeTimeout)}catch{this.logger.debug("Outgoing Relay Payload stalled"),this.relayer.events.emit(tr.connection_stalled)}}rpcUnsubscribe(e,t,i){const o={method:Jo(i.protocol).unsubscribe,params:{topic:e,id:t}};return this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:o}),this.relayer.request(o)}onSubscribe(e,t){this.setSubscription(e,au(vs({},t),{id:e})),this.pending.delete(t.topic)}onBatchSubscribe(e){e.length&&e.forEach(t=>{this.setSubscription(t.id,vs({},t)),this.pending.delete(t.topic)})}async onUnsubscribe(e,t,i){this.events.removeAllListeners(t),this.hasSubscription(t,e)&&this.deleteSubscription(t,i),await this.relayer.messages.del(e)}async setRelayerSubscriptions(e){await this.relayer.core.storage.setItem(this.storageKey,e)}async getRelayerSubscriptions(){return await this.relayer.core.storage.getItem(this.storageKey)}setSubscription(e,t){this.subscriptions.has(e)||(this.logger.debug("Setting subscription"),this.logger.trace({type:"method",method:"setSubscription",id:e,subscription:t}),this.addSubscription(e,t))}addSubscription(e,t){this.subscriptions.set(e,vs({},t)),this.topicMap.set(t.topic,e),this.events.emit(Gr.created,t)}getSubscription(e){this.logger.debug("Getting subscription"),this.logger.trace({type:"method",method:"getSubscription",id:e});const t=this.subscriptions.get(e);if(!t){const{message:i}=ce("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(i)}return t}deleteSubscription(e,t){this.logger.debug("Deleting subscription"),this.logger.trace({type:"method",method:"deleteSubscription",id:e,reason:t});const i=this.getSubscription(e);this.subscriptions.delete(e),this.topicMap.delete(i.topic,e),this.events.emit(Gr.deleted,au(vs({},i),{reason:t}))}async persist(){await this.setRelayerSubscriptions(this.values),this.events.emit(Gr.sync)}async reset(){if(this.cached.length){const e=Math.ceil(this.cached.length/this.batchSubscribeTopicsLimit);for(let t=0;t<e;t++){const i=this.cached.splice(0,this.batchSubscribeTopicsLimit);await this.batchSubscribe(i)}}this.events.emit(Gr.resubscribed)}async restore(){try{const e=await this.getRelayerSubscriptions();if(typeof e>"u"||!e.length)return;if(this.subscriptions.size){const{message:t}=ce("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(t),this.logger.error(`${this.name}: ${JSON.stringify(this.values)}`),new Error(t)}this.cached=e,this.logger.debug(`Successfully Restored subscriptions for ${this.name}`),this.logger.trace({type:"method",method:"restore",subscriptions:this.values})}catch(e){this.logger.debug(`Failed to Restore subscriptions for ${this.name}`),this.logger.error(e)}}async batchSubscribe(e){if(!e.length)return;const t=await this.rpcBatchSubscribe(e);on(t)&&this.onBatchSubscribe(t.map((i,o)=>au(vs({},e[o]),{id:i})))}async onConnect(){this.restartInProgress||(await this.restart(),this.onEnable())}onDisconnect(){this.onDisable()}async checkPending(){if(!this.initialized||this.relayer.transportExplicitlyClosed)return;const e=[];this.pending.forEach(t=>{e.push(t)}),await this.batchSubscribe(e)}registerEventListeners(){this.relayer.core.heartbeat.on(Wi.HEARTBEAT_EVENTS.pulse,async()=>{await this.checkPending()}),this.relayer.on(tr.connect,async()=>{await this.onConnect()}),this.relayer.on(tr.disconnect,()=>{this.onDisconnect()}),this.events.on(Gr.created,async e=>{const t=Gr.created;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,data:e}),await this.persist()}),this.events.on(Gr.deleted,async e=>{const t=Gr.deleted;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,data:e}),await this.persist()})}isInitialized(){if(!this.initialized){const{message:e}=ce("NOT_INITIALIZED",this.name);throw new Error(e)}}async restartToComplete(){this.restartInProgress&&await new Promise(e=>{const t=setInterval(()=>{this.restartInProgress||(clearInterval(t),e())},this.pollingInterval)})}}var x5=Object.defineProperty,Pd=Object.getOwnPropertySymbols,O5=Object.prototype.hasOwnProperty,P5=Object.prototype.propertyIsEnumerable,Cd=(n,e,t)=>e in n?x5(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,C5=(n,e)=>{for(var t in e||(e={}))O5.call(e,t)&&Cd(n,t,e[t]);if(Pd)for(var t of Pd(e))P5.call(e,t)&&Cd(n,t,e[t]);return n};class A5 extends QS{constructor(e){super(e),this.protocol="wc",this.version=2,this.events=new Ar.EventEmitter,this.name=JI,this.transportExplicitlyClosed=!1,this.initialized=!1,this.connectionAttemptInProgress=!1,this.connectionStatusPollingInterval=20,this.staleConnectionErrors=["socket hang up","socket stalled"],this.hasExperiencedNetworkDisruption=!1,this.requestsInFlight=new Map,this.request=async t=>{this.logger.debug("Publishing Request Payload");const i=t.id;try{await this.toEstablishConnection();const o=this.provider.request(t);return this.requestsInFlight.set(i,{promise:o,request:t}),await o}catch(o){throw this.logger.debug("Failed to Publish Request"),this.logger.error(o),o}finally{this.requestsInFlight.delete(i)}},this.onPayloadHandler=t=>{this.onProviderPayload(t)},this.onConnectHandler=()=>{this.events.emit(tr.connect)},this.onDisconnectHandler=()=>{this.onProviderDisconnect()},this.onProviderErrorHandler=t=>{this.logger.error(t),this.events.emit(tr.error,t),this.logger.info("Fatal socket error received, closing transport"),this.transportClose()},this.registerProviderListeners=()=>{this.provider.on(wn.payload,this.onPayloadHandler),this.provider.on(wn.connect,this.onConnectHandler),this.provider.on(wn.disconnect,this.onDisconnectHandler),this.provider.on(wn.error,this.onProviderErrorHandler)},this.core=e.core,this.logger=typeof e.logger<"u"&&typeof e.logger!="string"?Je.generateChildLogger(e.logger,this.name):Je.pino(Je.getDefaultLoggerOptions({level:e.logger||YI})),this.messages=new _5(this.logger,e.core),this.subscriber=new I5(this,this.logger),this.publisher=new v5(this,this.logger),this.relayUrl=(e==null?void 0:e.relayUrl)||yg,this.projectId=e.projectId,this.bundleId=_3(),this.provider={}}async init(){this.logger.trace("Initialized"),this.registerEventListeners(),await this.createProvider(),await Promise.all([this.messages.init(),this.subscriber.init()]);try{await this.transportOpen()}catch{this.logger.warn(`Connection via ${this.relayUrl} failed, attempting to connect via failover domain ${Id}...`),await this.restartTransport(Id)}this.initialized=!0,setTimeout(async()=>{this.subscriber.topics.length===0&&(this.logger.info("No topics subscribed to after init, closing transport"),await this.transportClose(),this.transportExplicitlyClosed=!1)},e5)}get context(){return Je.getLoggerContext(this.logger)}get connected(){return this.provider.connection.connected}get connecting(){return this.provider.connection.connecting}async publish(e,t,i){this.isInitialized(),await this.publisher.publish(e,t,i),await this.recordMessageEvent({topic:e,message:t,publishedAt:Date.now()})}async subscribe(e,t){var i;this.isInitialized();let o=((i=this.subscriber.topicMap.get(e))==null?void 0:i[0])||"";if(o)return o;let c;const u=f=>{f.topic===e&&(this.subscriber.off(Gr.created,u),c())};return await Promise.all([new Promise(f=>{c=f,this.subscriber.on(Gr.created,u)}),new Promise(async f=>{o=await this.subscriber.subscribe(e,t),f()})]),o}async unsubscribe(e,t){this.isInitialized(),await this.subscriber.unsubscribe(e,t)}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}off(e,t){this.events.off(e,t)}removeListener(e,t){this.events.removeListener(e,t)}async transportClose(){this.requestsInFlight.size>0&&(this.logger.debug("Waiting for all in-flight requests to finish before closing transport..."),this.requestsInFlight.forEach(async e=>{await e.promise})),this.transportExplicitlyClosed=!0,this.hasExperiencedNetworkDisruption&&this.connected?await xs(this.provider.disconnect(),1e3,"provider.disconnect()").catch(()=>this.onProviderDisconnect()):this.connected&&await this.provider.disconnect()}async transportOpen(e){if(this.transportExplicitlyClosed=!1,await this.confirmOnlineStateOrThrow(),!this.connectionAttemptInProgress){e&&e!==this.relayUrl&&(this.relayUrl=e,await this.transportClose(),await this.createProvider()),this.connectionAttemptInProgress=!0;try{await Promise.all([new Promise(t=>{if(!this.initialized)return t();this.subscriber.once(Gr.resubscribed,()=>{t()})}),new Promise(async(t,i)=>{try{await xs(this.provider.connect(),1e4,`Socket stalled when trying to connect to ${this.relayUrl}`)}catch(o){i(o);return}t()})])}catch(t){this.logger.error(t);const i=t;if(!this.isConnectionStalled(i.message))throw t;this.provider.events.emit(wn.disconnect)}finally{this.connectionAttemptInProgress=!1,this.hasExperiencedNetworkDisruption=!1}}}async restartTransport(e){await this.confirmOnlineStateOrThrow(),!this.connectionAttemptInProgress&&(this.relayUrl=e||this.relayUrl,await this.transportClose(),await this.createProvider(),await this.transportOpen())}async confirmOnlineStateOrThrow(){if(!await Gf())throw new Error("No internet connection detected. Please restart your network and try again.")}isConnectionStalled(e){return this.staleConnectionErrors.some(t=>e.includes(t))}async createProvider(){this.provider.connection&&this.unregisterProviderListeners();const e=await this.core.crypto.signJWT(this.relayUrl);this.provider=new In(new o6(D3({sdkVersion:ZI,protocol:this.protocol,version:this.version,relayUrl:this.relayUrl,projectId:this.projectId,auth:e,useOnCloseEvent:!0,bundleId:this.bundleId}))),this.registerProviderListeners()}async recordMessageEvent(e){const{topic:t,message:i}=e;await this.messages.set(t,i)}async shouldIgnoreMessageEvent(e){const{topic:t,message:i}=e;if(!i||i.length===0)return this.logger.debug(`Ignoring invalid/empty message: ${i}`),!0;if(!await this.subscriber.isSubscribed(t))return this.logger.debug(`Ignoring message for non-subscribed topic ${t}`),!0;const o=this.messages.has(t,i);return o&&this.logger.debug(`Ignoring duplicate message: ${i}`),o}async onProviderPayload(e){if(this.logger.debug("Incoming Relay Payload"),this.logger.trace({type:"payload",direction:"incoming",payload:e}),ch(e)){if(!e.method.endsWith(QI))return;const t=e.params,{topic:i,message:o,publishedAt:c}=t.data,u={topic:i,message:o,publishedAt:c};this.logger.debug("Emitting Relayer Payload"),this.logger.trace(C5({type:"event",event:t.id},u)),this.events.emit(t.id,u),await this.acknowledgePayload(e),await this.onMessageEvent(u)}else va(e)&&this.events.emit(tr.message_ack,e)}async onMessageEvent(e){await this.shouldIgnoreMessageEvent(e)||(this.events.emit(tr.message,e),await this.recordMessageEvent(e))}async acknowledgePayload(e){const t=ya(e.id,!0);await this.provider.connection.send(t)}unregisterProviderListeners(){this.provider.off(wn.payload,this.onPayloadHandler),this.provider.off(wn.connect,this.onConnectHandler),this.provider.off(wn.disconnect,this.onDisconnectHandler),this.provider.off(wn.error,this.onProviderErrorHandler)}async registerEventListeners(){this.events.on(tr.connection_stalled,()=>{this.restartTransport().catch(t=>this.logger.error(t))});let e=await Gf();_D(async t=>{this.initialized&&e!==t&&(e=t,t?await this.restartTransport().catch(i=>this.logger.error(i)):(this.hasExperiencedNetworkDisruption=!0,await this.transportClose().catch(i=>this.logger.error(i))))})}onProviderDisconnect(){this.events.emit(tr.disconnect),this.attemptToReconnect()}attemptToReconnect(){this.transportExplicitlyClosed||(this.logger.info("attemptToReconnect called. Connecting..."),setTimeout(async()=>{await this.restartTransport().catch(e=>this.logger.error(e))},_e.toMiliseconds(XI)))}isInitialized(){if(!this.initialized){const{message:e}=ce("NOT_INITIALIZED",this.name);throw new Error(e)}}async toEstablishConnection(){if(await this.confirmOnlineStateOrThrow(),!this.connected){if(this.connectionAttemptInProgress)return await new Promise(e=>{const t=setInterval(()=>{this.connected&&(clearInterval(t),e())},this.connectionStatusPollingInterval)});await this.restartTransport()}}}var T5=Object.defineProperty,Ad=Object.getOwnPropertySymbols,R5=Object.prototype.hasOwnProperty,N5=Object.prototype.propertyIsEnumerable,Td=(n,e,t)=>e in n?T5(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,Rd=(n,e)=>{for(var t in e||(e={}))R5.call(e,t)&&Td(n,t,e[t]);if(Ad)for(var t of Ad(e))N5.call(e,t)&&Td(n,t,e[t]);return n};class ba extends XS{constructor(e,t,i,o=qn,c=void 0){super(e,t,i,o),this.core=e,this.logger=t,this.name=i,this.map=new Map,this.version=t5,this.cached=[],this.initialized=!1,this.storagePrefix=qn,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(u=>{this.getKey&&u!==null&&!br(u)?this.map.set(this.getKey(u),u):G3(u)?this.map.set(u.id,u):Y3(u)&&this.map.set(u.topic,u)}),this.cached=[],this.initialized=!0)},this.set=async(u,f)=>{this.isInitialized(),this.map.has(u)?await this.update(u,f):(this.logger.debug("Setting value"),this.logger.trace({type:"method",method:"set",key:u,value:f}),this.map.set(u,f),await this.persist())},this.get=u=>(this.isInitialized(),this.logger.debug("Getting value"),this.logger.trace({type:"method",method:"get",key:u}),this.getData(u)),this.getAll=u=>(this.isInitialized(),u?this.values.filter(f=>Object.keys(u).every(g=>c6(f[g],u[g]))):this.values),this.update=async(u,f)=>{this.isInitialized(),this.logger.debug("Updating value"),this.logger.trace({type:"method",method:"update",key:u,update:f});const g=Rd(Rd({},this.getData(u)),f);this.map.set(u,g),await this.persist()},this.delete=async(u,f)=>{this.isInitialized(),this.map.has(u)&&(this.logger.debug("Deleting value"),this.logger.trace({type:"method",method:"delete",key:u,reason:f}),this.map.delete(u),await this.persist())},this.logger=Je.generateChildLogger(t,this.name),this.storagePrefix=o,this.getKey=c}get context(){return Je.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get length(){return this.map.size}get keys(){return Array.from(this.map.keys())}get values(){return Array.from(this.map.values())}async setDataStore(e){await this.core.storage.setItem(this.storageKey,e)}async getDataStore(){return await this.core.storage.getItem(this.storageKey)}getData(e){const t=this.map.get(e);if(!t){const{message:i}=ce("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.error(i),new Error(i)}return t}async persist(){await this.setDataStore(this.values)}async restore(){try{const e=await this.getDataStore();if(typeof e>"u"||!e.length)return;if(this.map.size){const{message:t}=ce("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(t),new Error(t)}this.cached=e,this.logger.debug(`Successfully Restored value for ${this.name}`),this.logger.trace({type:"method",method:"restore",value:this.values})}catch(e){this.logger.debug(`Failed to Restore value for ${this.name}`),this.logger.error(e)}}isInitialized(){if(!this.initialized){const{message:e}=ce("NOT_INITIALIZED",this.name);throw new Error(e)}}}class L5{constructor(e,t){this.core=e,this.logger=t,this.name=o5,this.version=a5,this.events=new Vu,this.initialized=!1,this.storagePrefix=qn,this.ignoredPayloadTypes=[li],this.registeredMethods=[],this.init=async()=>{this.initialized||(await this.pairings.init(),await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.initialized=!0,this.logger.trace("Initialized"))},this.register=({methods:i})=>{this.isInitialized(),this.registeredMethods=[...new Set([...this.registeredMethods,...i])]},this.create=async()=>{this.isInitialized();const i=xu(),o=await this.core.crypto.setSymKey(i),c=Pr(_e.FIVE_MINUTES),u={protocol:gg},f={topic:o,expiry:c,relay:u,active:!1},g=q3({protocol:this.core.protocol,version:this.core.version,topic:o,symKey:i,relay:u,expiryTimestamp:c});return await this.pairings.set(o,f),await this.core.relayer.subscribe(o),this.core.expirer.set(o,c),{topic:o,uri:g}},this.pair=async i=>{this.isInitialized(),this.isValidPair(i);const{topic:o,symKey:c,relay:u,expiryTimestamp:f}=Hf(i.uri);let g;if(this.pairings.keys.includes(o)&&(g=this.pairings.get(o),g.active))throw new Error(`Pairing already exists: ${o}. Please try again with a new connection URI.`);const p=f||Pr(_e.FIVE_MINUTES),_={topic:o,relay:u,expiry:p,active:!1};return await this.pairings.set(o,_),this.core.expirer.set(o,p),i.activatePairing&&await this.activate({topic:o}),this.events.emit(ws.create,_),this.core.crypto.keychain.has(o)||(await this.core.crypto.setSymKey(c,o),await this.core.relayer.subscribe(o,{relay:u})),_},this.activate=async({topic:i})=>{this.isInitialized();const o=Pr(_e.THIRTY_DAYS);await this.pairings.update(i,{active:!0,expiry:o}),this.core.expirer.set(i,o)},this.ping=async i=>{this.isInitialized(),await this.isValidPing(i);const{topic:o}=i;if(this.pairings.keys.includes(o)){const c=await this.sendRequest(o,"wc_pairingPing",{}),{done:u,resolve:f,reject:g}=Ui();this.events.once($t("pairing_ping",c),({error:p})=>{p?g(p):f()}),await u()}},this.updateExpiry=async({topic:i,expiry:o})=>{this.isInitialized(),await this.pairings.update(i,{expiry:o})},this.updateMetadata=async({topic:i,metadata:o})=>{this.isInitialized(),await this.pairings.update(i,{peerMetadata:o})},this.getPairings=()=>(this.isInitialized(),this.pairings.values),this.disconnect=async i=>{this.isInitialized(),await this.isValidDisconnect(i);const{topic:o}=i;this.pairings.keys.includes(o)&&(await this.sendRequest(o,"wc_pairingDelete",bt("USER_DISCONNECTED")),await this.deletePairing(o))},this.sendRequest=async(i,o,c)=>{const u=zi(o,c),f=await this.core.crypto.encode(i,u),g=_s[o].req;return this.core.history.set(i,u),this.core.relayer.publish(i,f,g),u.id},this.sendResult=async(i,o,c)=>{const u=ya(i,c),f=await this.core.crypto.encode(o,u),g=await this.core.history.get(o,i),p=_s[g.request.method].res;await this.core.relayer.publish(o,f,p),await this.core.history.resolve(u)},this.sendError=async(i,o,c)=>{const u=_a(i,c),f=await this.core.crypto.encode(o,u),g=await this.core.history.get(o,i),p=_s[g.request.method]?_s[g.request.method].res:_s.unregistered_method.res;await this.core.relayer.publish(o,f,p),await this.core.history.resolve(u)},this.deletePairing=async(i,o)=>{await this.core.relayer.unsubscribe(i),await Promise.all([this.pairings.delete(i,bt("USER_DISCONNECTED")),this.core.crypto.deleteSymKey(i),o?Promise.resolve():this.core.expirer.del(i)])},this.cleanup=async()=>{const i=this.pairings.getAll().filter(o=>Mn(o.expiry));await Promise.all(i.map(o=>this.deletePairing(o.topic)))},this.onRelayEventRequest=i=>{const{topic:o,payload:c}=i;switch(c.method){case"wc_pairingPing":return this.onPairingPingRequest(o,c);case"wc_pairingDelete":return this.onPairingDeleteRequest(o,c);default:return this.onUnknownRpcMethodRequest(o,c)}},this.onRelayEventResponse=async i=>{const{topic:o,payload:c}=i,u=(await this.core.history.get(o,c.id)).request.method;switch(u){case"wc_pairingPing":return this.onPairingPingResponse(o,c);default:return this.onUnknownRpcMethodResponse(u)}},this.onPairingPingRequest=async(i,o)=>{const{id:c}=o;try{this.isValidPing({topic:i}),await this.sendResult(c,i,!0),this.events.emit(ws.ping,{id:c,topic:i})}catch(u){await this.sendError(c,i,u),this.logger.error(u)}},this.onPairingPingResponse=(i,o)=>{const{id:c}=o;setTimeout(()=>{Sn(o)?this.events.emit($t("pairing_ping",c),{}):Yr(o)&&this.events.emit($t("pairing_ping",c),{error:o.error})},500)},this.onPairingDeleteRequest=async(i,o)=>{const{id:c}=o;try{this.isValidDisconnect({topic:i}),await this.deletePairing(i),this.events.emit(ws.delete,{id:c,topic:i})}catch(u){await this.sendError(c,i,u),this.logger.error(u)}},this.onUnknownRpcMethodRequest=async(i,o)=>{const{id:c,method:u}=o;try{if(this.registeredMethods.includes(u))return;const f=bt("WC_METHOD_UNSUPPORTED",u);await this.sendError(c,i,f),this.logger.error(f)}catch(f){await this.sendError(c,i,f),this.logger.error(f)}},this.onUnknownRpcMethodResponse=i=>{this.registeredMethods.includes(i)||this.logger.error(bt("WC_METHOD_UNSUPPORTED",i))},this.isValidPair=i=>{var o;if(!mr(i)){const{message:u}=ce("MISSING_OR_INVALID",`pair() params: ${i}`);throw new Error(u)}if(!W3(i.uri)){const{message:u}=ce("MISSING_OR_INVALID",`pair() uri: ${i.uri}`);throw new Error(u)}const c=Hf(i.uri);if(!((o=c==null?void 0:c.relay)!=null&&o.protocol)){const{message:u}=ce("MISSING_OR_INVALID","pair() uri#relay-protocol");throw new Error(u)}if(!(c!=null&&c.symKey)){const{message:u}=ce("MISSING_OR_INVALID","pair() uri#symKey");throw new Error(u)}if(c!=null&&c.expiryTimestamp&&_e.toMiliseconds(c==null?void 0:c.expiryTimestamp)<Date.now()){const{message:u}=ce("EXPIRED","pair() URI has expired. Please try again with a new connection URI.");throw new Error(u)}},this.isValidPing=async i=>{if(!mr(i)){const{message:c}=ce("MISSING_OR_INVALID",`ping() params: ${i}`);throw new Error(c)}const{topic:o}=i;await this.isValidPairingTopic(o)},this.isValidDisconnect=async i=>{if(!mr(i)){const{message:c}=ce("MISSING_OR_INVALID",`disconnect() params: ${i}`);throw new Error(c)}const{topic:o}=i;await this.isValidPairingTopic(o)},this.isValidPairingTopic=async i=>{if(!Gt(i,!1)){const{message:o}=ce("MISSING_OR_INVALID",`pairing topic should be a string: ${i}`);throw new Error(o)}if(!this.pairings.keys.includes(i)){const{message:o}=ce("NO_MATCHING_KEY",`pairing topic doesn't exist: ${i}`);throw new Error(o)}if(Mn(this.pairings.get(i).expiry)){await this.deletePairing(i);const{message:o}=ce("EXPIRED",`pairing topic: ${i}`);throw new Error(o)}},this.core=e,this.logger=Je.generateChildLogger(t,this.name),this.pairings=new ba(this.core,this.logger,this.name,this.storagePrefix)}get context(){return Je.getLoggerContext(this.logger)}isInitialized(){if(!this.initialized){const{message:e}=ce("NOT_INITIALIZED",this.name);throw new Error(e)}}registerRelayerEvents(){this.core.relayer.on(tr.message,async e=>{const{topic:t,message:i}=e;if(!this.pairings.keys.includes(t)||this.ignoredPayloadTypes.includes(this.core.crypto.getPayloadType(i)))return;const o=await this.core.crypto.decode(t,i);try{ch(o)?(this.core.history.set(t,o),this.onRelayEventRequest({topic:t,payload:o})):va(o)&&(await this.core.history.resolve(o),await this.onRelayEventResponse({topic:t,payload:o}),this.core.history.delete(t,o.id))}catch(c){this.logger.error(c)}})}registerExpirerEvents(){this.core.expirer.on(zr.expired,async e=>{const{topic:t}=$p(e.target);t&&this.pairings.keys.includes(t)&&(await this.deletePairing(t,!0),this.events.emit(ws.expire,{topic:t}))})}}class $5 extends GS{constructor(e,t){super(e,t),this.core=e,this.logger=t,this.records=new Map,this.events=new Ar.EventEmitter,this.name=c5,this.version=u5,this.cached=[],this.initialized=!1,this.storagePrefix=qn,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(i=>this.records.set(i.id,i)),this.cached=[],this.registerEventListeners(),this.initialized=!0)},this.set=(i,o,c)=>{if(this.isInitialized(),this.logger.debug("Setting JSON-RPC request history record"),this.logger.trace({type:"method",method:"set",topic:i,request:o,chainId:c}),this.records.has(o.id))return;const u={id:o.id,topic:i,request:{method:o.method,params:o.params||null},chainId:c,expiry:Pr(_e.THIRTY_DAYS)};this.records.set(u.id,u),this.events.emit(sn.created,u)},this.resolve=async i=>{if(this.isInitialized(),this.logger.debug("Updating JSON-RPC response history record"),this.logger.trace({type:"method",method:"update",response:i}),!this.records.has(i.id))return;const o=await this.getRecord(i.id);typeof o.response>"u"&&(o.response=Yr(i)?{error:i.error}:{result:i.result},this.records.set(o.id,o),this.events.emit(sn.updated,o))},this.get=async(i,o)=>(this.isInitialized(),this.logger.debug("Getting record"),this.logger.trace({type:"method",method:"get",topic:i,id:o}),await this.getRecord(o)),this.delete=(i,o)=>{this.isInitialized(),this.logger.debug("Deleting record"),this.logger.trace({type:"method",method:"delete",id:o}),this.values.forEach(c=>{if(c.topic===i){if(typeof o<"u"&&c.id!==o)return;this.records.delete(c.id),this.events.emit(sn.deleted,c)}})},this.exists=async(i,o)=>(this.isInitialized(),this.records.has(o)?(await this.getRecord(o)).topic===i:!1),this.on=(i,o)=>{this.events.on(i,o)},this.once=(i,o)=>{this.events.once(i,o)},this.off=(i,o)=>{this.events.off(i,o)},this.removeListener=(i,o)=>{this.events.removeListener(i,o)},this.logger=Je.generateChildLogger(t,this.name)}get context(){return Je.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get size(){return this.records.size}get keys(){return Array.from(this.records.keys())}get values(){return Array.from(this.records.values())}get pending(){const e=[];return this.values.forEach(t=>{if(typeof t.response<"u")return;const i={topic:t.topic,request:zi(t.request.method,t.request.params,t.id),chainId:t.chainId};return e.push(i)}),e}async setJsonRpcRecords(e){await this.core.storage.setItem(this.storageKey,e)}async getJsonRpcRecords(){return await this.core.storage.getItem(this.storageKey)}getRecord(e){this.isInitialized();const t=this.records.get(e);if(!t){const{message:i}=ce("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(i)}return t}async persist(){await this.setJsonRpcRecords(this.values),this.events.emit(sn.sync)}async restore(){try{const e=await this.getJsonRpcRecords();if(typeof e>"u"||!e.length)return;if(this.records.size){const{message:t}=ce("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(t),new Error(t)}this.cached=e,this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",records:this.values})}catch(e){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(e)}}registerEventListeners(){this.events.on(sn.created,e=>{const t=sn.created;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,record:e}),this.persist()}),this.events.on(sn.updated,e=>{const t=sn.updated;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,record:e}),this.persist()}),this.events.on(sn.deleted,e=>{const t=sn.deleted;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,record:e}),this.persist()}),this.core.heartbeat.on(Wi.HEARTBEAT_EVENTS.pulse,()=>{this.cleanup()})}cleanup(){try{this.records.forEach(e=>{_e.toMiliseconds(e.expiry||0)-Date.now()<=0&&(this.logger.info(`Deleting expired history log: ${e.id}`),this.delete(e.topic,e.id))})}catch(e){this.logger.warn(e)}}isInitialized(){if(!this.initialized){const{message:e}=ce("NOT_INITIALIZED",this.name);throw new Error(e)}}}class j5 extends e2{constructor(e,t){super(e,t),this.core=e,this.logger=t,this.expirations=new Map,this.events=new Ar.EventEmitter,this.name=h5,this.version=l5,this.cached=[],this.initialized=!1,this.storagePrefix=qn,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(i=>this.expirations.set(i.target,i)),this.cached=[],this.registerEventListeners(),this.initialized=!0)},this.has=i=>{try{const o=this.formatTarget(i);return typeof this.getExpiration(o)<"u"}catch{return!1}},this.set=(i,o)=>{this.isInitialized();const c=this.formatTarget(i),u={target:c,expiry:o};this.expirations.set(c,u),this.checkExpiry(c,u),this.events.emit(zr.created,{target:c,expiration:u})},this.get=i=>{this.isInitialized();const o=this.formatTarget(i);return this.getExpiration(o)},this.del=i=>{if(this.isInitialized(),this.has(i)){const o=this.formatTarget(i),c=this.getExpiration(o);this.expirations.delete(o),this.events.emit(zr.deleted,{target:o,expiration:c})}},this.on=(i,o)=>{this.events.on(i,o)},this.once=(i,o)=>{this.events.once(i,o)},this.off=(i,o)=>{this.events.off(i,o)},this.removeListener=(i,o)=>{this.events.removeListener(i,o)},this.logger=Je.generateChildLogger(t,this.name)}get context(){return Je.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get length(){return this.expirations.size}get keys(){return Array.from(this.expirations.keys())}get values(){return Array.from(this.expirations.values())}formatTarget(e){if(typeof e=="string")return S3(e);if(typeof e=="number")return I3(e);const{message:t}=ce("UNKNOWN_TYPE",`Target type: ${typeof e}`);throw new Error(t)}async setExpirations(e){await this.core.storage.setItem(this.storageKey,e)}async getExpirations(){return await this.core.storage.getItem(this.storageKey)}async persist(){await this.setExpirations(this.values),this.events.emit(zr.sync)}async restore(){try{const e=await this.getExpirations();if(typeof e>"u"||!e.length)return;if(this.expirations.size){const{message:t}=ce("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(t),new Error(t)}this.cached=e,this.logger.debug(`Successfully Restored expirations for ${this.name}`),this.logger.trace({type:"method",method:"restore",expirations:this.values})}catch(e){this.logger.debug(`Failed to Restore expirations for ${this.name}`),this.logger.error(e)}}getExpiration(e){const t=this.expirations.get(e);if(!t){const{message:i}=ce("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.error(i),new Error(i)}return t}checkExpiry(e,t){const{expiry:i}=t;_e.toMiliseconds(i)-Date.now()<=0&&this.expire(e,t)}expire(e,t){this.expirations.delete(e),this.events.emit(zr.expired,{target:e,expiration:t})}checkExpirations(){this.core.relayer.connected&&this.expirations.forEach((e,t)=>this.checkExpiry(t,e))}registerEventListeners(){this.core.heartbeat.on(Wi.HEARTBEAT_EVENTS.pulse,()=>this.checkExpirations()),this.events.on(zr.created,e=>{const t=zr.created;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,data:e}),this.persist()}),this.events.on(zr.expired,e=>{const t=zr.expired;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,data:e}),this.persist()}),this.events.on(zr.deleted,e=>{const t=zr.deleted;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,data:e}),this.persist()})}isInitialized(){if(!this.initialized){const{message:e}=ce("NOT_INITIALIZED",this.name);throw new Error(e)}}}class U5 extends t2{constructor(e,t){super(e,t),this.projectId=e,this.logger=t,this.name=ou,this.initialized=!1,this.queue=[],this.verifyDisabled=!1,this.init=async i=>{if(this.verifyDisabled||ki()||!Ki())return;const o=this.getVerifyUrl(i==null?void 0:i.verifyUrl);this.verifyUrl!==o&&this.removeIframe(),this.verifyUrl=o;try{await this.createIframe()}catch(c){this.logger.info(`Verify iframe failed to load: ${this.verifyUrl}`),this.logger.info(c)}if(!this.initialized){this.removeIframe(),this.verifyUrl=Fu;try{await this.createIframe()}catch(c){this.logger.info(`Verify iframe failed to load: ${this.verifyUrl}`),this.logger.info(c),this.verifyDisabled=!0}}},this.register=async i=>{this.initialized?this.sendPost(i.attestationId):(this.addToQueue(i.attestationId),await this.init())},this.resolve=async i=>{if(this.isDevEnv)return"";const o=this.getVerifyUrl(i==null?void 0:i.verifyUrl);let c;try{c=await this.fetchAttestation(i.attestationId,o)}catch(u){this.logger.info(`failed to resolve attestation: ${i.attestationId} from url: ${o}`),this.logger.info(u),c=await this.fetchAttestation(i.attestationId,Fu)}return c},this.fetchAttestation=async(i,o)=>{this.logger.info(`resolving attestation: ${i} from url: ${o}`);const c=this.startAbortTimer(_e.ONE_SECOND*2),u=await fetch(`${o}/attestation/${i}`,{signal:this.abortController.signal});return clearTimeout(c),u.status===200?await u.json():void 0},this.addToQueue=i=>{this.queue.push(i)},this.processQueue=()=>{this.queue.length!==0&&(this.queue.forEach(i=>this.sendPost(i)),this.queue=[])},this.sendPost=i=>{var o;try{if(!this.iframe)return;(o=this.iframe.contentWindow)==null||o.postMessage(i,"*"),this.logger.info(`postMessage sent: ${i} ${this.verifyUrl}`)}catch{}},this.createIframe=async()=>{let i;const o=c=>{c.data==="verify_ready"&&(this.initialized=!0,this.processQueue(),window.removeEventListener("message",o),i())};await Promise.race([new Promise(c=>{if(document.getElementById(ou))return c();window.addEventListener("message",o);const u=document.createElement("iframe");u.id=ou,u.src=`${this.verifyUrl}/${this.projectId}`,u.style.display="none",document.body.append(u),this.iframe=u,i=c}),new Promise((c,u)=>setTimeout(()=>{window.removeEventListener("message",o),u("verify iframe load timeout")},_e.toMiliseconds(_e.FIVE_SECONDS)))])},this.removeIframe=()=>{this.iframe&&(this.iframe.remove(),this.iframe=void 0,this.initialized=!1)},this.getVerifyUrl=i=>{let o=i||Mi;return f5.includes(o)||(this.logger.info(`verify url: ${o}, not included in trusted list, assigning default: ${Mi}`),o=Mi),o},this.logger=Je.generateChildLogger(t,this.name),this.verifyUrl=Mi,this.abortController=new AbortController,this.isDevEnv=rh()&&d6.IS_VITEST}get context(){return Je.getLoggerContext(this.logger)}startAbortTimer(e){return this.abortController=new AbortController,setTimeout(()=>this.abortController.abort(),_e.toMiliseconds(e))}}class M5 extends r2{constructor(e,t){super(e,t),this.projectId=e,this.logger=t,this.context=d5,this.registerDeviceToken=async i=>{const{clientId:o,token:c,notificationType:u,enableEncrypted:f=!1}=i,g=`${p5}/${this.projectId}/clients`;await f6(g,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({client_id:o,type:u,token:c,always_raw:f})})},this.logger=Je.generateChildLogger(t,this.context)}}var q5=Object.defineProperty,Nd=Object.getOwnPropertySymbols,F5=Object.prototype.hasOwnProperty,z5=Object.prototype.propertyIsEnumerable,Ld=(n,e,t)=>e in n?q5(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,$d=(n,e)=>{for(var t in e||(e={}))F5.call(e,t)&&Ld(n,t,e[t]);if(Nd)for(var t of Nd(e))z5.call(e,t)&&Ld(n,t,e[t]);return n};class hh extends WS{constructor(e){super(e),this.protocol=pg,this.version=MI,this.name=uh,this.events=new Ar.EventEmitter,this.initialized=!1,this.on=(i,o)=>this.events.on(i,o),this.once=(i,o)=>this.events.once(i,o),this.off=(i,o)=>this.events.off(i,o),this.removeListener=(i,o)=>this.events.removeListener(i,o),this.projectId=e==null?void 0:e.projectId,this.relayUrl=(e==null?void 0:e.relayUrl)||yg,this.customStoragePrefix=e!=null&&e.customStoragePrefix?`:${e.customStoragePrefix}`:"";const t=typeof(e==null?void 0:e.logger)<"u"&&typeof(e==null?void 0:e.logger)!="string"?e.logger:Je.pino(Je.getDefaultLoggerOptions({level:(e==null?void 0:e.logger)||qI.logger}));this.logger=Je.generateChildLogger(t,this.name),this.heartbeat=new Wi.HeartBeat,this.crypto=new y5(this,this.logger,e==null?void 0:e.keychain),this.history=new $5(this,this.logger),this.expirer=new j5(this,this.logger),this.storage=e!=null&&e.storage?e.storage:new QD($d($d({},FI),e==null?void 0:e.storageOptions)),this.relayer=new A5({core:this,logger:this.logger,relayUrl:this.relayUrl,projectId:this.projectId}),this.pairing=new L5(this,this.logger),this.verify=new U5(this.projectId||"",this.logger),this.echoClient=new M5(this.projectId||"",this.logger)}static async init(e){const t=new hh(e);await t.initialize();const i=await t.crypto.getClientId();return await t.storage.setItem(r5,i),t}get context(){return Je.getLoggerContext(this.logger)}async start(){this.initialized||await this.initialize()}async initialize(){this.logger.trace("Initialized");try{await this.crypto.init(),await this.history.init(),await this.expirer.init(),await this.relayer.init(),await this.heartbeat.init(),await this.pairing.init(),this.initialized=!0,this.logger.info("Core Initialization Success")}catch(e){throw this.logger.warn(`Core Initialization Failure at epoch ${Date.now()}`,e),this.logger.error(e.message),e}}}const B5=hh,_g="wc",vg=2,mg="client",lh=`${_g}@${vg}:${mg}:`,cu={name:mg,logger:"error",controller:!1,relayUrl:"wss://relay.walletconnect.com"},jd="WALLETCONNECT_DEEPLINK_CHOICE",H5="proposal",bg="Proposal expired",k5="session",Vo=_e.SEVEN_DAYS,K5="engine",En={wc_sessionPropose:{req:{ttl:_e.FIVE_MINUTES,prompt:!0,tag:1100},res:{ttl:_e.FIVE_MINUTES,prompt:!1,tag:1101}},wc_sessionSettle:{req:{ttl:_e.FIVE_MINUTES,prompt:!1,tag:1102},res:{ttl:_e.FIVE_MINUTES,prompt:!1,tag:1103}},wc_sessionUpdate:{req:{ttl:_e.ONE_DAY,prompt:!1,tag:1104},res:{ttl:_e.ONE_DAY,prompt:!1,tag:1105}},wc_sessionExtend:{req:{ttl:_e.ONE_DAY,prompt:!1,tag:1106},res:{ttl:_e.ONE_DAY,prompt:!1,tag:1107}},wc_sessionRequest:{req:{ttl:_e.FIVE_MINUTES,prompt:!0,tag:1108},res:{ttl:_e.FIVE_MINUTES,prompt:!1,tag:1109}},wc_sessionEvent:{req:{ttl:_e.FIVE_MINUTES,prompt:!0,tag:1110},res:{ttl:_e.FIVE_MINUTES,prompt:!1,tag:1111}},wc_sessionDelete:{req:{ttl:_e.ONE_DAY,prompt:!1,tag:1112},res:{ttl:_e.ONE_DAY,prompt:!1,tag:1113}},wc_sessionPing:{req:{ttl:_e.THIRTY_SECONDS,prompt:!1,tag:1114},res:{ttl:_e.THIRTY_SECONDS,prompt:!1,tag:1115}}},uu={min:_e.FIVE_MINUTES,max:_e.SEVEN_DAYS},Dn={idle:"IDLE",active:"ACTIVE"},V5="request",W5=["wc_sessionPropose","wc_sessionRequest","wc_authRequest"];var G5=Object.defineProperty,Y5=Object.defineProperties,J5=Object.getOwnPropertyDescriptors,Ud=Object.getOwnPropertySymbols,Q5=Object.prototype.hasOwnProperty,X5=Object.prototype.propertyIsEnumerable,Md=(n,e,t)=>e in n?G5(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,ur=(n,e)=>{for(var t in e||(e={}))Q5.call(e,t)&&Md(n,t,e[t]);if(Ud)for(var t of Ud(e))X5.call(e,t)&&Md(n,t,e[t]);return n},ji=(n,e)=>Y5(n,J5(e));class Z5 extends i2{constructor(e){super(e),this.name=K5,this.events=new Vu,this.initialized=!1,this.ignoredPayloadTypes=[li],this.requestQueue={state:Dn.idle,queue:[]},this.sessionRequestQueue={state:Dn.idle,queue:[]},this.requestQueueDelay=_e.ONE_SECOND,this.init=async()=>{this.initialized||(await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.registerPairingEvents(),this.client.core.pairing.register({methods:Object.keys(En)}),this.initialized=!0,setTimeout(()=>{this.sessionRequestQueue.queue=this.getPendingSessionRequests(),this.processSessionRequestQueue()},_e.toMiliseconds(this.requestQueueDelay)))},this.connect=async t=>{await this.isInitialized();const i=ji(ur({},t),{requiredNamespaces:t.requiredNamespaces||{},optionalNamespaces:t.optionalNamespaces||{}});await this.isValidConnect(i);const{pairingTopic:o,requiredNamespaces:c,optionalNamespaces:u,sessionProperties:f,relays:g}=i;let p=o,_,D=!1;if(p&&(D=this.client.core.pairing.pairings.get(p).active),!p||!D){const{topic:C,uri:T}=await this.client.core.pairing.create();p=C,_=T}const S=await this.client.core.crypto.generateKeyPair(),x=En.wc_sessionPropose.req.ttl||_e.FIVE_MINUTES,O=Pr(x),F=ur({requiredNamespaces:c,optionalNamespaces:u,relays:g??[{protocol:gg}],proposer:{publicKey:S,metadata:this.client.metadata},expiryTimestamp:O},f&&{sessionProperties:f}),{reject:H,resolve:ne,done:L}=Ui(x,bg);if(this.events.once($t("session_connect"),async({error:C,session:T})=>{if(C)H(C);else if(T){T.self.publicKey=S;const E=ji(ur({},T),{requiredNamespaces:F.requiredNamespaces,optionalNamespaces:F.optionalNamespaces});await this.client.session.set(T.topic,E),await this.setExpiry(T.topic,T.expiry),p&&await this.client.core.pairing.updateMetadata({topic:p,metadata:T.peer.metadata}),ne(E)}}),!p){const{message:C}=ce("NO_MATCHING_KEY",`connect() pairing topic: ${p}`);throw new Error(C)}const M=await this.sendRequest({topic:p,method:"wc_sessionPropose",params:F,throwOnFailedPublish:!0});return await this.setProposal(M,ur({id:M},F)),{uri:_,approval:L}},this.pair=async t=>(await this.isInitialized(),await this.client.core.pairing.pair(t)),this.approve=async t=>{await this.isInitialized(),await this.isValidApprove(t);const{id:i,relayProtocol:o,namespaces:c,sessionProperties:u}=t,f=this.client.proposal.get(i);let{pairingTopic:g,proposer:p,requiredNamespaces:_,optionalNamespaces:D}=f;g=g||"";const S=await this.client.core.crypto.generateKeyPair(),x=p.publicKey,O=await this.client.core.crypto.generateSharedKey(S,x);g&&i&&(await this.client.core.pairing.updateMetadata({topic:g,metadata:p.metadata}),await this.sendResult({id:i,topic:g,result:{relay:{protocol:o??"irn"},responderPublicKey:S}}),await this.client.proposal.delete(i,bt("USER_DISCONNECTED")),await this.client.core.pairing.activate({topic:g}));const F=ur({relay:{protocol:o??"irn"},namespaces:c,pairingTopic:g,controller:{publicKey:S,metadata:this.client.metadata},expiry:Pr(Vo)},u&&{sessionProperties:u});await this.client.core.relayer.subscribe(O);const H=ji(ur({},F),{topic:O,requiredNamespaces:_,optionalNamespaces:D,pairingTopic:g,acknowledged:!1,self:F.controller,peer:{publicKey:p.publicKey,metadata:p.metadata},controller:S});await this.client.session.set(O,H);try{await this.sendRequest({topic:O,method:"wc_sessionSettle",params:F,throwOnFailedPublish:!0})}catch(ne){throw this.client.logger.error(ne),this.client.session.delete(O,bt("USER_DISCONNECTED")),await this.client.core.relayer.unsubscribe(O),ne}return await this.setExpiry(O,Pr(Vo)),{topic:O,acknowledged:()=>new Promise(ne=>setTimeout(()=>ne(this.client.session.get(O)),500))}},this.reject=async t=>{await this.isInitialized(),await this.isValidReject(t);const{id:i,reason:o}=t,{pairingTopic:c}=this.client.proposal.get(i);c&&(await this.sendError(i,c,o),await this.client.proposal.delete(i,bt("USER_DISCONNECTED")))},this.update=async t=>{await this.isInitialized(),await this.isValidUpdate(t);const{topic:i,namespaces:o}=t,c=await this.sendRequest({topic:i,method:"wc_sessionUpdate",params:{namespaces:o}}),{done:u,resolve:f,reject:g}=Ui();return this.events.once($t("session_update",c),({error:p})=>{p?g(p):f()}),await this.client.session.update(i,{namespaces:o}),{acknowledged:u}},this.extend=async t=>{await this.isInitialized(),await this.isValidExtend(t);const{topic:i}=t,o=await this.sendRequest({topic:i,method:"wc_sessionExtend",params:{}}),{done:c,resolve:u,reject:f}=Ui();return this.events.once($t("session_extend",o),({error:g})=>{g?f(g):u()}),await this.setExpiry(i,Pr(Vo)),{acknowledged:c}},this.request=async t=>{await this.isInitialized(),await this.isValidRequest(t);const{chainId:i,request:o,topic:c,expiry:u=En.wc_sessionRequest.req.ttl}=t,f=ah(),{done:g,resolve:p,reject:_}=Ui(u,"Request expired. Please try again.");return this.events.once($t("session_request",f),({error:D,result:S})=>{D?_(D):p(S)}),await Promise.all([new Promise(async D=>{await this.sendRequest({clientRpcId:f,topic:c,method:"wc_sessionRequest",params:{request:ji(ur({},o),{expiryTimestamp:Pr(u)}),chainId:i},expiry:u,throwOnFailedPublish:!0}).catch(S=>_(S)),this.client.events.emit("session_request_sent",{topic:c,request:o,chainId:i,id:f}),D()}),new Promise(async D=>{const S=await O3(this.client.core.storage,jd);x3({id:f,topic:c,wcDeepLink:S}),D()}),g()]).then(D=>D[2])},this.respond=async t=>{await this.isInitialized(),await this.isValidRespond(t);const{topic:i,response:o}=t,{id:c}=o;Sn(o)?await this.sendResult({id:c,topic:i,result:o.result,throwOnFailedPublish:!0}):Yr(o)&&await this.sendError(c,i,o.error),this.cleanupAfterResponse(t)},this.ping=async t=>{await this.isInitialized(),await this.isValidPing(t);const{topic:i}=t;if(this.client.session.keys.includes(i)){const o=await this.sendRequest({topic:i,method:"wc_sessionPing",params:{}}),{done:c,resolve:u,reject:f}=Ui();this.events.once($t("session_ping",o),({error:g})=>{g?f(g):u()}),await c()}else this.client.core.pairing.pairings.keys.includes(i)&&await this.client.core.pairing.ping({topic:i})},this.emit=async t=>{await this.isInitialized(),await this.isValidEmit(t);const{topic:i,event:o,chainId:c}=t;await this.sendRequest({topic:i,method:"wc_sessionEvent",params:{event:o,chainId:c}})},this.disconnect=async t=>{await this.isInitialized(),await this.isValidDisconnect(t);const{topic:i}=t;if(this.client.session.keys.includes(i))await this.sendRequest({topic:i,method:"wc_sessionDelete",params:bt("USER_DISCONNECTED"),throwOnFailedPublish:!0}),await this.deleteSession({topic:i,emitEvent:!1});else if(this.client.core.pairing.pairings.keys.includes(i))await this.client.core.pairing.disconnect({topic:i});else{const{message:o}=ce("MISMATCHED_TOPIC",`Session or pairing topic not found: ${i}`);throw new Error(o)}},this.find=t=>(this.isInitialized(),this.client.session.getAll().filter(i=>K3(i,t))),this.getPendingSessionRequests=()=>this.client.pendingRequest.getAll(),this.cleanupDuplicatePairings=async t=>{if(t.pairingTopic)try{const i=this.client.core.pairing.pairings.get(t.pairingTopic),o=this.client.core.pairing.pairings.getAll().filter(c=>{var u,f;return((u=c.peerMetadata)==null?void 0:u.url)&&((f=c.peerMetadata)==null?void 0:f.url)===t.peer.metadata.url&&c.topic&&c.topic!==i.topic});if(o.length===0)return;this.client.logger.info(`Cleaning up ${o.length} duplicate pairing(s)`),await Promise.all(o.map(c=>this.client.core.pairing.disconnect({topic:c.topic}))),this.client.logger.info("Duplicate pairings clean up finished")}catch(i){this.client.logger.error(i)}},this.deleteSession=async t=>{const{topic:i,expirerHasDeleted:o=!1,emitEvent:c=!0,id:u=0}=t,{self:f}=this.client.session.get(i);await this.client.core.relayer.unsubscribe(i),await this.client.session.delete(i,bt("USER_DISCONNECTED")),this.client.core.crypto.keychain.has(f.publicKey)&&await this.client.core.crypto.deleteKeyPair(f.publicKey),this.client.core.crypto.keychain.has(i)&&await this.client.core.crypto.deleteSymKey(i),o||this.client.core.expirer.del(i),this.client.core.storage.removeItem(jd).catch(g=>this.client.logger.warn(g)),this.getPendingSessionRequests().forEach(g=>{g.topic===i&&this.deletePendingSessionRequest(g.id,bt("USER_DISCONNECTED"))}),c&&this.client.events.emit("session_delete",{id:u,topic:i})},this.deleteProposal=async(t,i)=>{await Promise.all([this.client.proposal.delete(t,bt("USER_DISCONNECTED")),i?Promise.resolve():this.client.core.expirer.del(t)])},this.deletePendingSessionRequest=async(t,i,o=!1)=>{await Promise.all([this.client.pendingRequest.delete(t,i),o?Promise.resolve():this.client.core.expirer.del(t)]),this.sessionRequestQueue.queue=this.sessionRequestQueue.queue.filter(c=>c.id!==t),o&&(this.sessionRequestQueue.state=Dn.idle,this.client.events.emit("session_request_expire",{id:t}))},this.setExpiry=async(t,i)=>{this.client.session.keys.includes(t)&&await this.client.session.update(t,{expiry:i}),this.client.core.expirer.set(t,i)},this.setProposal=async(t,i)=>{await this.client.proposal.set(t,i),this.client.core.expirer.set(t,Pr(En.wc_sessionPropose.req.ttl))},this.setPendingSessionRequest=async t=>{const{id:i,topic:o,params:c,verifyContext:u}=t,f=c.request.expiryTimestamp||Pr(En.wc_sessionRequest.req.ttl);await this.client.pendingRequest.set(i,{id:i,topic:o,params:c,verifyContext:u}),f&&this.client.core.expirer.set(i,f)},this.sendRequest=async t=>{const{topic:i,method:o,params:c,expiry:u,relayRpcId:f,clientRpcId:g,throwOnFailedPublish:p}=t,_=zi(o,c,g);if(Ki()&&W5.includes(o)){const x=Fi(JSON.stringify(_));this.client.core.verify.register({attestationId:x})}const D=await this.client.core.crypto.encode(i,_),S=En[o].req;return u&&(S.ttl=u),f&&(S.id=f),this.client.core.history.set(i,_),p?(S.internal=ji(ur({},S.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(i,D,S)):this.client.core.relayer.publish(i,D,S).catch(x=>this.client.logger.error(x)),_.id},this.sendResult=async t=>{const{id:i,topic:o,result:c,throwOnFailedPublish:u}=t,f=ya(i,c),g=await this.client.core.crypto.encode(o,f),p=await this.client.core.history.get(o,i),_=En[p.request.method].res;u?(_.internal=ji(ur({},_.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(o,g,_)):this.client.core.relayer.publish(o,g,_).catch(D=>this.client.logger.error(D)),await this.client.core.history.resolve(f)},this.sendError=async(t,i,o)=>{const c=_a(t,o),u=await this.client.core.crypto.encode(i,c),f=await this.client.core.history.get(i,t),g=En[f.request.method].res;this.client.core.relayer.publish(i,u,g),await this.client.core.history.resolve(c)},this.cleanup=async()=>{const t=[],i=[];this.client.session.getAll().forEach(o=>{let c=!1;Mn(o.expiry)&&(c=!0),this.client.core.crypto.keychain.has(o.topic)||(c=!0),c&&t.push(o.topic)}),this.client.proposal.getAll().forEach(o=>{Mn(o.expiryTimestamp)&&i.push(o.id)}),await Promise.all([...t.map(o=>this.deleteSession({topic:o})),...i.map(o=>this.deleteProposal(o))])},this.onRelayEventRequest=async t=>{this.requestQueue.queue.push(t),await this.processRequestsQueue()},this.processRequestsQueue=async()=>{if(this.requestQueue.state===Dn.active){this.client.logger.info("Request queue already active, skipping...");return}for(this.client.logger.info(`Request queue starting with ${this.requestQueue.queue.length} requests`);this.requestQueue.queue.length>0;){this.requestQueue.state=Dn.active;const t=this.requestQueue.queue.shift();if(t)try{this.processRequest(t),await new Promise(i=>setTimeout(i,300))}catch(i){this.client.logger.warn(i)}}this.requestQueue.state=Dn.idle},this.processRequest=t=>{const{topic:i,payload:o}=t,c=o.method;switch(c){case"wc_sessionPropose":return this.onSessionProposeRequest(i,o);case"wc_sessionSettle":return this.onSessionSettleRequest(i,o);case"wc_sessionUpdate":return this.onSessionUpdateRequest(i,o);case"wc_sessionExtend":return this.onSessionExtendRequest(i,o);case"wc_sessionPing":return this.onSessionPingRequest(i,o);case"wc_sessionDelete":return this.onSessionDeleteRequest(i,o);case"wc_sessionRequest":return this.onSessionRequest(i,o);case"wc_sessionEvent":return this.onSessionEventRequest(i,o);default:return this.client.logger.info(`Unsupported request method ${c}`)}},this.onRelayEventResponse=async t=>{const{topic:i,payload:o}=t,c=(await this.client.core.history.get(i,o.id)).request.method;switch(c){case"wc_sessionPropose":return this.onSessionProposeResponse(i,o);case"wc_sessionSettle":return this.onSessionSettleResponse(i,o);case"wc_sessionUpdate":return this.onSessionUpdateResponse(i,o);case"wc_sessionExtend":return this.onSessionExtendResponse(i,o);case"wc_sessionPing":return this.onSessionPingResponse(i,o);case"wc_sessionRequest":return this.onSessionRequestResponse(i,o);default:return this.client.logger.info(`Unsupported response method ${c}`)}},this.onRelayEventUnknownPayload=t=>{const{topic:i}=t,{message:o}=ce("MISSING_OR_INVALID",`Decoded payload on topic ${i} is not identifiable as a JSON-RPC request or a response.`);throw new Error(o)},this.onSessionProposeRequest=async(t,i)=>{const{params:o,id:c}=i;try{this.isValidConnect(ur({},i.params));const u=o.expiryTimestamp||Pr(En.wc_sessionPropose.req.ttl),f=ur({id:c,pairingTopic:t,expiryTimestamp:u},o);await this.setProposal(c,f);const g=Fi(JSON.stringify(i)),p=await this.getVerifyContext(g,f.proposer.metadata);this.client.events.emit("session_proposal",{id:c,params:f,verifyContext:p})}catch(u){await this.sendError(c,t,u),this.client.logger.error(u)}},this.onSessionProposeResponse=async(t,i)=>{const{id:o}=i;if(Sn(i)){const{result:c}=i;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",result:c});const u=this.client.proposal.get(o);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",proposal:u});const f=u.proposer.publicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",selfPublicKey:f});const g=c.responderPublicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",peerPublicKey:g});const p=await this.client.core.crypto.generateSharedKey(f,g);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",sessionTopic:p});const _=await this.client.core.relayer.subscribe(p);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",subscriptionId:_}),await this.client.core.pairing.activate({topic:t})}else Yr(i)&&(await this.client.proposal.delete(o,bt("USER_DISCONNECTED")),this.events.emit($t("session_connect"),{error:i.error}))},this.onSessionSettleRequest=async(t,i)=>{const{id:o,params:c}=i;try{this.isValidSessionSettleRequest(c);const{relay:u,controller:f,expiry:g,namespaces:p,sessionProperties:_,pairingTopic:D}=i.params,S=ur({topic:t,relay:u,expiry:g,namespaces:p,acknowledged:!0,pairingTopic:D,requiredNamespaces:{},optionalNamespaces:{},controller:f.publicKey,self:{publicKey:"",metadata:this.client.metadata},peer:{publicKey:f.publicKey,metadata:f.metadata}},_&&{sessionProperties:_});await this.sendResult({id:i.id,topic:t,result:!0}),this.events.emit($t("session_connect"),{session:S}),this.cleanupDuplicatePairings(S)}catch(u){await this.sendError(o,t,u),this.client.logger.error(u)}},this.onSessionSettleResponse=async(t,i)=>{const{id:o}=i;Sn(i)?(await this.client.session.update(t,{acknowledged:!0}),this.events.emit($t("session_approve",o),{})):Yr(i)&&(await this.client.session.delete(t,bt("USER_DISCONNECTED")),this.events.emit($t("session_approve",o),{error:i.error}))},this.onSessionUpdateRequest=async(t,i)=>{const{params:o,id:c}=i;try{const u=`${t}_session_update`,f=Ho.get(u);if(f&&this.isRequestOutOfSync(f,c)){this.client.logger.info(`Discarding out of sync request - ${c}`);return}this.isValidUpdate(ur({topic:t},o)),await this.client.session.update(t,{namespaces:o.namespaces}),await this.sendResult({id:c,topic:t,result:!0}),this.client.events.emit("session_update",{id:c,topic:t,params:o}),Ho.set(u,c)}catch(u){await this.sendError(c,t,u),this.client.logger.error(u)}},this.isRequestOutOfSync=(t,i)=>parseInt(i.toString().slice(0,-3))<=parseInt(t.toString().slice(0,-3)),this.onSessionUpdateResponse=(t,i)=>{const{id:o}=i;Sn(i)?this.events.emit($t("session_update",o),{}):Yr(i)&&this.events.emit($t("session_update",o),{error:i.error})},this.onSessionExtendRequest=async(t,i)=>{const{id:o}=i;try{this.isValidExtend({topic:t}),await this.setExpiry(t,Pr(Vo)),await this.sendResult({id:o,topic:t,result:!0}),this.client.events.emit("session_extend",{id:o,topic:t})}catch(c){await this.sendError(o,t,c),this.client.logger.error(c)}},this.onSessionExtendResponse=(t,i)=>{const{id:o}=i;Sn(i)?this.events.emit($t("session_extend",o),{}):Yr(i)&&this.events.emit($t("session_extend",o),{error:i.error})},this.onSessionPingRequest=async(t,i)=>{const{id:o}=i;try{this.isValidPing({topic:t}),await this.sendResult({id:o,topic:t,result:!0}),this.client.events.emit("session_ping",{id:o,topic:t})}catch(c){await this.sendError(o,t,c),this.client.logger.error(c)}},this.onSessionPingResponse=(t,i)=>{const{id:o}=i;setTimeout(()=>{Sn(i)?this.events.emit($t("session_ping",o),{}):Yr(i)&&this.events.emit($t("session_ping",o),{error:i.error})},500)},this.onSessionDeleteRequest=async(t,i)=>{const{id:o}=i;try{this.isValidDisconnect({topic:t,reason:i.params}),await Promise.all([new Promise(c=>{this.client.core.relayer.once(tr.publish,async()=>{c(await this.deleteSession({topic:t,id:o}))})}),this.sendResult({id:o,topic:t,result:!0}),this.cleanupPendingSentRequestsForTopic({topic:t,error:bt("USER_DISCONNECTED")})])}catch(c){this.client.logger.error(c)}},this.onSessionRequest=async(t,i)=>{const{id:o,params:c}=i;try{this.isValidRequest(ur({topic:t},c));const u=Fi(JSON.stringify(zi("wc_sessionRequest",c,o))),f=this.client.session.get(t),g=await this.getVerifyContext(u,f.peer.metadata),p={id:o,topic:t,params:c,verifyContext:g};await this.setPendingSessionRequest(p),this.addSessionRequestToSessionRequestQueue(p),this.processSessionRequestQueue()}catch(u){await this.sendError(o,t,u),this.client.logger.error(u)}},this.onSessionRequestResponse=(t,i)=>{const{id:o}=i;Sn(i)?this.events.emit($t("session_request",o),{result:i.result}):Yr(i)&&this.events.emit($t("session_request",o),{error:i.error})},this.onSessionEventRequest=async(t,i)=>{const{id:o,params:c}=i;try{const u=`${t}_session_event_${c.event.name}`,f=Ho.get(u);if(f&&this.isRequestOutOfSync(f,o)){this.client.logger.info(`Discarding out of sync request - ${o}`);return}this.isValidEmit(ur({topic:t},c)),this.client.events.emit("session_event",{id:o,topic:t,params:c}),Ho.set(u,o)}catch(u){await this.sendError(o,t,u),this.client.logger.error(u)}},this.addSessionRequestToSessionRequestQueue=t=>{this.sessionRequestQueue.queue.push(t)},this.cleanupAfterResponse=t=>{this.deletePendingSessionRequest(t.response.id,{message:"fulfilled",code:0}),setTimeout(()=>{this.sessionRequestQueue.state=Dn.idle,this.processSessionRequestQueue()},_e.toMiliseconds(this.requestQueueDelay))},this.cleanupPendingSentRequestsForTopic=({topic:t,error:i})=>{const o=this.client.core.history.pending;o.length>0&&o.filter(c=>c.topic===t&&c.request.method==="wc_sessionRequest").forEach(c=>{this.events.emit($t("session_request",c.request.id),{error:i})})},this.processSessionRequestQueue=()=>{if(this.sessionRequestQueue.state===Dn.active){this.client.logger.info("session request queue is already active.");return}const t=this.sessionRequestQueue.queue[0];if(!t){this.client.logger.info("session request queue is empty.");return}try{this.sessionRequestQueue.state=Dn.active,this.client.events.emit("session_request",t)}catch(i){this.client.logger.error(i)}},this.onPairingCreated=t=>{if(t.active)return;const i=this.client.proposal.getAll().find(o=>o.pairingTopic===t.topic);i&&this.onSessionProposeRequest(t.topic,zi("wc_sessionPropose",{requiredNamespaces:i.requiredNamespaces,optionalNamespaces:i.optionalNamespaces,relays:i.relays,proposer:i.proposer,sessionProperties:i.sessionProperties},i.id))},this.isValidConnect=async t=>{if(!mr(t)){const{message:g}=ce("MISSING_OR_INVALID",`connect() params: ${JSON.stringify(t)}`);throw new Error(g)}const{pairingTopic:i,requiredNamespaces:o,optionalNamespaces:c,sessionProperties:u,relays:f}=t;if(br(i)||await this.isValidPairingTopic(i),!nD(f)){const{message:g}=ce("MISSING_OR_INVALID",`connect() relays: ${f}`);throw new Error(g)}!br(o)&&Os(o)!==0&&this.validateNamespaces(o,"requiredNamespaces"),!br(c)&&Os(c)!==0&&this.validateNamespaces(c,"optionalNamespaces"),br(u)||this.validateSessionProps(u,"sessionProperties")},this.validateNamespaces=(t,i)=>{const o=rD(t,"connect()",i);if(o)throw new Error(o.message)},this.isValidApprove=async t=>{if(!mr(t))throw new Error(ce("MISSING_OR_INVALID",`approve() params: ${t}`).message);const{id:i,namespaces:o,relayProtocol:c,sessionProperties:u}=t;await this.isValidProposalId(i);const f=this.client.proposal.get(i),g=Qc(o,"approve()");if(g)throw new Error(g.message);const p=Vf(f.requiredNamespaces,o,"approve()");if(p)throw new Error(p.message);if(!Gt(c,!0)){const{message:_}=ce("MISSING_OR_INVALID",`approve() relayProtocol: ${c}`);throw new Error(_)}br(u)||this.validateSessionProps(u,"sessionProperties")},this.isValidReject=async t=>{if(!mr(t)){const{message:c}=ce("MISSING_OR_INVALID",`reject() params: ${t}`);throw new Error(c)}const{id:i,reason:o}=t;if(await this.isValidProposalId(i),!sD(o)){const{message:c}=ce("MISSING_OR_INVALID",`reject() reason: ${JSON.stringify(o)}`);throw new Error(c)}},this.isValidSessionSettleRequest=t=>{if(!mr(t)){const{message:p}=ce("MISSING_OR_INVALID",`onSessionSettleRequest() params: ${t}`);throw new Error(p)}const{relay:i,controller:o,namespaces:c,expiry:u}=t;if(!Up(i)){const{message:p}=ce("MISSING_OR_INVALID","onSessionSettleRequest() relay protocol should be a string");throw new Error(p)}const f=J3(o,"onSessionSettleRequest()");if(f)throw new Error(f.message);const g=Qc(c,"onSessionSettleRequest()");if(g)throw new Error(g.message);if(Mn(u)){const{message:p}=ce("EXPIRED","onSessionSettleRequest()");throw new Error(p)}},this.isValidUpdate=async t=>{if(!mr(t)){const{message:g}=ce("MISSING_OR_INVALID",`update() params: ${t}`);throw new Error(g)}const{topic:i,namespaces:o}=t;await this.isValidSessionTopic(i);const c=this.client.session.get(i),u=Qc(o,"update()");if(u)throw new Error(u.message);const f=Vf(c.requiredNamespaces,o,"update()");if(f)throw new Error(f.message)},this.isValidExtend=async t=>{if(!mr(t)){const{message:o}=ce("MISSING_OR_INVALID",`extend() params: ${t}`);throw new Error(o)}const{topic:i}=t;await this.isValidSessionTopic(i)},this.isValidRequest=async t=>{if(!mr(t)){const{message:g}=ce("MISSING_OR_INVALID",`request() params: ${t}`);throw new Error(g)}const{topic:i,request:o,chainId:c,expiry:u}=t;await this.isValidSessionTopic(i);const{namespaces:f}=this.client.session.get(i);if(!Kf(f,c)){const{message:g}=ce("MISSING_OR_INVALID",`request() chainId: ${c}`);throw new Error(g)}if(!oD(o)){const{message:g}=ce("MISSING_OR_INVALID",`request() ${JSON.stringify(o)}`);throw new Error(g)}if(!uD(f,c,o.method)){const{message:g}=ce("MISSING_OR_INVALID",`request() method: ${o.method}`);throw new Error(g)}if(u&&!dD(u,uu)){const{message:g}=ce("MISSING_OR_INVALID",`request() expiry: ${u}. Expiry must be a number (in seconds) between ${uu.min} and ${uu.max}`);throw new Error(g)}},this.isValidRespond=async t=>{var i;if(!mr(t)){const{message:u}=ce("MISSING_OR_INVALID",`respond() params: ${t}`);throw new Error(u)}const{topic:o,response:c}=t;try{await this.isValidSessionTopic(o)}catch(u){throw(i=t==null?void 0:t.response)!=null&&i.id&&this.cleanupAfterResponse(t),u}if(!aD(c)){const{message:u}=ce("MISSING_OR_INVALID",`respond() response: ${JSON.stringify(c)}`);throw new Error(u)}},this.isValidPing=async t=>{if(!mr(t)){const{message:o}=ce("MISSING_OR_INVALID",`ping() params: ${t}`);throw new Error(o)}const{topic:i}=t;await this.isValidSessionOrPairingTopic(i)},this.isValidEmit=async t=>{if(!mr(t)){const{message:f}=ce("MISSING_OR_INVALID",`emit() params: ${t}`);throw new Error(f)}const{topic:i,event:o,chainId:c}=t;await this.isValidSessionTopic(i);const{namespaces:u}=this.client.session.get(i);if(!Kf(u,c)){const{message:f}=ce("MISSING_OR_INVALID",`emit() chainId: ${c}`);throw new Error(f)}if(!cD(o)){const{message:f}=ce("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(o)}`);throw new Error(f)}if(!hD(u,c,o.name)){const{message:f}=ce("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(o)}`);throw new Error(f)}},this.isValidDisconnect=async t=>{if(!mr(t)){const{message:o}=ce("MISSING_OR_INVALID",`disconnect() params: ${t}`);throw new Error(o)}const{topic:i}=t;await this.isValidSessionOrPairingTopic(i)},this.getVerifyContext=async(t,i)=>{const o={verified:{verifyUrl:i.verifyUrl||Mi,validation:"UNKNOWN",origin:i.url||""}};try{const c=await this.client.core.verify.resolve({attestationId:t,verifyUrl:i.verifyUrl});c&&(o.verified.origin=c.origin,o.verified.isScam=c.isScam,o.verified.validation=c.origin===new URL(i.url).origin?"VALID":"INVALID")}catch(c){this.client.logger.info(c)}return this.client.logger.info(`Verify context: ${JSON.stringify(o)}`),o},this.validateSessionProps=(t,i)=>{Object.values(t).forEach(o=>{if(!Gt(o,!1)){const{message:c}=ce("MISSING_OR_INVALID",`${i} must be in Record<string, string> format. Received: ${JSON.stringify(o)}`);throw new Error(c)}})}}async isInitialized(){if(!this.initialized){const{message:e}=ce("NOT_INITIALIZED",this.name);throw new Error(e)}await this.client.core.relayer.confirmOnlineStateOrThrow()}registerRelayerEvents(){this.client.core.relayer.on(tr.message,async e=>{const{topic:t,message:i}=e;if(this.ignoredPayloadTypes.includes(this.client.core.crypto.getPayloadType(i)))return;const o=await this.client.core.crypto.decode(t,i);try{ch(o)?(this.client.core.history.set(t,o),this.onRelayEventRequest({topic:t,payload:o})):va(o)?(await this.client.core.history.resolve(o),await this.onRelayEventResponse({topic:t,payload:o}),this.client.core.history.delete(t,o.id)):this.onRelayEventUnknownPayload({topic:t,payload:o})}catch(c){this.client.logger.error(c)}})}registerExpirerEvents(){this.client.core.expirer.on(zr.expired,async e=>{const{topic:t,id:i}=$p(e.target);if(i&&this.client.pendingRequest.keys.includes(i))return await this.deletePendingSessionRequest(i,ce("EXPIRED"),!0);t?this.client.session.keys.includes(t)&&(await this.deleteSession({topic:t,expirerHasDeleted:!0}),this.client.events.emit("session_expire",{topic:t})):i&&(await this.deleteProposal(i,!0),this.client.events.emit("proposal_expire",{id:i}))})}registerPairingEvents(){this.client.core.pairing.events.on(ws.create,e=>this.onPairingCreated(e))}isValidPairingTopic(e){if(!Gt(e,!1)){const{message:t}=ce("MISSING_OR_INVALID",`pairing topic should be a string: ${e}`);throw new Error(t)}if(!this.client.core.pairing.pairings.keys.includes(e)){const{message:t}=ce("NO_MATCHING_KEY",`pairing topic doesn't exist: ${e}`);throw new Error(t)}if(Mn(this.client.core.pairing.pairings.get(e).expiry)){const{message:t}=ce("EXPIRED",`pairing topic: ${e}`);throw new Error(t)}}async isValidSessionTopic(e){if(!Gt(e,!1)){const{message:t}=ce("MISSING_OR_INVALID",`session topic should be a string: ${e}`);throw new Error(t)}if(!this.client.session.keys.includes(e)){const{message:t}=ce("NO_MATCHING_KEY",`session topic doesn't exist: ${e}`);throw new Error(t)}if(Mn(this.client.session.get(e).expiry)){await this.deleteSession({topic:e});const{message:t}=ce("EXPIRED",`session topic: ${e}`);throw new Error(t)}if(!this.client.core.crypto.keychain.has(e)){const{message:t}=ce("MISSING_OR_INVALID",`session topic does not exist in keychain: ${e}`);throw await this.deleteSession({topic:e}),new Error(t)}}async isValidSessionOrPairingTopic(e){if(this.client.session.keys.includes(e))await this.isValidSessionTopic(e);else if(this.client.core.pairing.pairings.keys.includes(e))this.isValidPairingTopic(e);else if(Gt(e,!1)){const{message:t}=ce("NO_MATCHING_KEY",`session or pairing topic doesn't exist: ${e}`);throw new Error(t)}else{const{message:t}=ce("MISSING_OR_INVALID",`session or pairing topic should be a string: ${e}`);throw new Error(t)}}async isValidProposalId(e){if(!iD(e)){const{message:t}=ce("MISSING_OR_INVALID",`proposal id should be a number: ${e}`);throw new Error(t)}if(!this.client.proposal.keys.includes(e)){const{message:t}=ce("NO_MATCHING_KEY",`proposal id doesn't exist: ${e}`);throw new Error(t)}if(Mn(this.client.proposal.get(e).expiryTimestamp)){await this.deleteProposal(e);const{message:t}=ce("EXPIRED",`proposal id: ${e}`);throw new Error(t)}}}class ex extends ba{constructor(e,t){super(e,t,H5,lh),this.core=e,this.logger=t}}let tx=class extends ba{constructor(e,t){super(e,t,k5,lh),this.core=e,this.logger=t}};class rx extends ba{constructor(e,t){super(e,t,V5,lh,i=>i.id),this.core=e,this.logger=t}}let nx=class wg extends n2{constructor(e){super(e),this.protocol=_g,this.version=vg,this.name=cu.name,this.events=new Ar.EventEmitter,this.on=(i,o)=>this.events.on(i,o),this.once=(i,o)=>this.events.once(i,o),this.off=(i,o)=>this.events.off(i,o),this.removeListener=(i,o)=>this.events.removeListener(i,o),this.removeAllListeners=i=>this.events.removeAllListeners(i),this.connect=async i=>{try{return await this.engine.connect(i)}catch(o){throw this.logger.error(o.message),o}},this.pair=async i=>{try{return await this.engine.pair(i)}catch(o){throw this.logger.error(o.message),o}},this.approve=async i=>{try{return await this.engine.approve(i)}catch(o){throw this.logger.error(o.message),o}},this.reject=async i=>{try{return await this.engine.reject(i)}catch(o){throw this.logger.error(o.message),o}},this.update=async i=>{try{return await this.engine.update(i)}catch(o){throw this.logger.error(o.message),o}},this.extend=async i=>{try{return await this.engine.extend(i)}catch(o){throw this.logger.error(o.message),o}},this.request=async i=>{try{return await this.engine.request(i)}catch(o){throw this.logger.error(o.message),o}},this.respond=async i=>{try{return await this.engine.respond(i)}catch(o){throw this.logger.error(o.message),o}},this.ping=async i=>{try{return await this.engine.ping(i)}catch(o){throw this.logger.error(o.message),o}},this.emit=async i=>{try{return await this.engine.emit(i)}catch(o){throw this.logger.error(o.message),o}},this.disconnect=async i=>{try{return await this.engine.disconnect(i)}catch(o){throw this.logger.error(o.message),o}},this.find=i=>{try{return this.engine.find(i)}catch(o){throw this.logger.error(o.message),o}},this.getPendingSessionRequests=()=>{try{return this.engine.getPendingSessionRequests()}catch(i){throw this.logger.error(i.message),i}},this.name=(e==null?void 0:e.name)||cu.name,this.metadata=(e==null?void 0:e.metadata)||m3();const t=typeof(e==null?void 0:e.logger)<"u"&&typeof(e==null?void 0:e.logger)!="string"?e.logger:Je.pino(Je.getDefaultLoggerOptions({level:(e==null?void 0:e.logger)||cu.logger}));this.core=(e==null?void 0:e.core)||new B5(e),this.logger=Je.generateChildLogger(t,this.name),this.session=new tx(this.core,this.logger),this.proposal=new ex(this.core,this.logger),this.pendingRequest=new rx(this.core,this.logger),this.engine=new Z5(this)}static async init(e){const t=new wg(e);return await t.initialize(),t}get context(){return Je.getLoggerContext(this.logger)}get pairing(){return this.core.pairing.pairings}async initialize(){this.logger.trace("Initialized");try{await this.core.start(),await this.session.init(),await this.proposal.init(),await this.pendingRequest.init(),await this.engine.init(),this.core.verify.init({verifyUrl:this.metadata.verifyUrl}),this.logger.info("SignClient Initialization Success")}catch(e){throw this.logger.info("SignClient Initialization Failure"),this.logger.error(e.message),e}}};var zu={exports:{}};(function(n,e){var t=typeof self<"u"?self:Jr,i=function(){function c(){this.fetch=!1,this.DOMException=t.DOMException}return c.prototype=t,new c}();(function(c){(function(u){var f={searchParams:"URLSearchParams"in c,iterable:"Symbol"in c&&"iterator"in Symbol,blob:"FileReader"in c&&"Blob"in c&&function(){try{return new Blob,!0}catch{return!1}}(),formData:"FormData"in c,arrayBuffer:"ArrayBuffer"in c};function g(w){return w&&DataView.prototype.isPrototypeOf(w)}if(f.arrayBuffer)var p=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],_=ArrayBuffer.isView||function(w){return w&&p.indexOf(Object.prototype.toString.call(w))>-1};function D(w){if(typeof w!="string"&&(w=String(w)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(w))throw new TypeError("Invalid character in header field name");return w.toLowerCase()}function S(w){return typeof w!="string"&&(w=String(w)),w}function x(w){var A={next:function(){var ee=w.shift();return{done:ee===void 0,value:ee}}};return f.iterable&&(A[Symbol.iterator]=function(){return A}),A}function O(w){this.map={},w instanceof O?w.forEach(function(A,ee){this.append(ee,A)},this):Array.isArray(w)?w.forEach(function(A){this.append(A[0],A[1])},this):w&&Object.getOwnPropertyNames(w).forEach(function(A){this.append(A,w[A])},this)}O.prototype.append=function(w,A){w=D(w),A=S(A);var ee=this.map[w];this.map[w]=ee?ee+", "+A:A},O.prototype.delete=function(w){delete this.map[D(w)]},O.prototype.get=function(w){return w=D(w),this.has(w)?this.map[w]:null},O.prototype.has=function(w){return this.map.hasOwnProperty(D(w))},O.prototype.set=function(w,A){this.map[D(w)]=S(A)},O.prototype.forEach=function(w,A){for(var ee in this.map)this.map.hasOwnProperty(ee)&&w.call(A,this.map[ee],ee,this)},O.prototype.keys=function(){var w=[];return this.forEach(function(A,ee){w.push(ee)}),x(w)},O.prototype.values=function(){var w=[];return this.forEach(function(A){w.push(A)}),x(w)},O.prototype.entries=function(){var w=[];return this.forEach(function(A,ee){w.push([ee,A])}),x(w)},f.iterable&&(O.prototype[Symbol.iterator]=O.prototype.entries);function F(w){if(w.bodyUsed)return Promise.reject(new TypeError("Already read"));w.bodyUsed=!0}function H(w){return new Promise(function(A,ee){w.onload=function(){A(w.result)},w.onerror=function(){ee(w.error)}})}function ne(w){var A=new FileReader,ee=H(A);return A.readAsArrayBuffer(w),ee}function L(w){var A=new FileReader,ee=H(A);return A.readAsText(w),ee}function M(w){for(var A=new Uint8Array(w),ee=new Array(A.length),Q=0;Q<A.length;Q++)ee[Q]=String.fromCharCode(A[Q]);return ee.join("")}function C(w){if(w.slice)return w.slice(0);var A=new Uint8Array(w.byteLength);return A.set(new Uint8Array(w)),A.buffer}function T(){return this.bodyUsed=!1,this._initBody=function(w){this._bodyInit=w,w?typeof w=="string"?this._bodyText=w:f.blob&&Blob.prototype.isPrototypeOf(w)?this._bodyBlob=w:f.formData&&FormData.prototype.isPrototypeOf(w)?this._bodyFormData=w:f.searchParams&&URLSearchParams.prototype.isPrototypeOf(w)?this._bodyText=w.toString():f.arrayBuffer&&f.blob&&g(w)?(this._bodyArrayBuffer=C(w.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):f.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(w)||_(w))?this._bodyArrayBuffer=C(w):this._bodyText=w=Object.prototype.toString.call(w):this._bodyText="",this.headers.get("content-type")||(typeof w=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):f.searchParams&&URLSearchParams.prototype.isPrototypeOf(w)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},f.blob&&(this.blob=function(){var w=F(this);if(w)return w;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?F(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(ne)}),this.text=function(){var w=F(this);if(w)return w;if(this._bodyBlob)return L(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(M(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},f.formData&&(this.formData=function(){return this.text().then(W)}),this.json=function(){return this.text().then(JSON.parse)},this}var E=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function h(w){var A=w.toUpperCase();return E.indexOf(A)>-1?A:w}function b(w,A){A=A||{};var ee=A.body;if(w instanceof b){if(w.bodyUsed)throw new TypeError("Already read");this.url=w.url,this.credentials=w.credentials,A.headers||(this.headers=new O(w.headers)),this.method=w.method,this.mode=w.mode,this.signal=w.signal,!ee&&w._bodyInit!=null&&(ee=w._bodyInit,w.bodyUsed=!0)}else this.url=String(w);if(this.credentials=A.credentials||this.credentials||"same-origin",(A.headers||!this.headers)&&(this.headers=new O(A.headers)),this.method=h(A.method||this.method||"GET"),this.mode=A.mode||this.mode||null,this.signal=A.signal||this.signal,this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&ee)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(ee)}b.prototype.clone=function(){return new b(this,{body:this._bodyInit})};function W(w){var A=new FormData;return w.trim().split("&").forEach(function(ee){if(ee){var Q=ee.split("="),K=Q.shift().replace(/\+/g," "),V=Q.join("=").replace(/\+/g," ");A.append(decodeURIComponent(K),decodeURIComponent(V))}}),A}function G(w){var A=new O,ee=w.replace(/\r?\n[\t ]+/g," ");return ee.split(/\r?\n/).forEach(function(Q){var K=Q.split(":"),V=K.shift().trim();if(V){var J=K.join(":").trim();A.append(V,J)}}),A}T.call(b.prototype);function se(w,A){A||(A={}),this.type="default",this.status=A.status===void 0?200:A.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in A?A.statusText:"OK",this.headers=new O(A.headers),this.url=A.url||"",this._initBody(w)}T.call(se.prototype),se.prototype.clone=function(){return new se(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new O(this.headers),url:this.url})},se.error=function(){var w=new se(null,{status:0,statusText:""});return w.type="error",w};var ue=[301,302,303,307,308];se.redirect=function(w,A){if(ue.indexOf(A)===-1)throw new RangeError("Invalid status code");return new se(null,{status:A,headers:{location:w}})},u.DOMException=c.DOMException;try{new u.DOMException}catch{u.DOMException=function(A,ee){this.message=A,this.name=ee;var Q=Error(A);this.stack=Q.stack},u.DOMException.prototype=Object.create(Error.prototype),u.DOMException.prototype.constructor=u.DOMException}function de(w,A){return new Promise(function(ee,Q){var K=new b(w,A);if(K.signal&&K.signal.aborted)return Q(new u.DOMException("Aborted","AbortError"));var V=new XMLHttpRequest;function J(){V.abort()}V.onload=function(){var re={status:V.status,statusText:V.statusText,headers:G(V.getAllResponseHeaders()||"")};re.url="responseURL"in V?V.responseURL:re.headers.get("X-Request-URL");var be="response"in V?V.response:V.responseText;ee(new se(be,re))},V.onerror=function(){Q(new TypeError("Network request failed"))},V.ontimeout=function(){Q(new TypeError("Network request failed"))},V.onabort=function(){Q(new u.DOMException("Aborted","AbortError"))},V.open(K.method,K.url,!0),K.credentials==="include"?V.withCredentials=!0:K.credentials==="omit"&&(V.withCredentials=!1),"responseType"in V&&f.blob&&(V.responseType="blob"),K.headers.forEach(function(re,be){V.setRequestHeader(be,re)}),K.signal&&(K.signal.addEventListener("abort",J),V.onreadystatechange=function(){V.readyState===4&&K.signal.removeEventListener("abort",J)}),V.send(typeof K._bodyInit>"u"?null:K._bodyInit)})}return de.polyfill=!0,c.fetch||(c.fetch=de,c.Headers=O,c.Request=b,c.Response=se),u.Headers=O,u.Request=b,u.Response=se,u.fetch=de,Object.defineProperty(u,"__esModule",{value:!0}),u})({})})(i),i.fetch.ponyfill=!0,delete i.fetch.polyfill;var o=i;e=o.fetch,e.default=o.fetch,e.fetch=o.fetch,e.Headers=o.Headers,e.Request=o.Request,e.Response=o.Response,n.exports=e})(zu,zu.exports);var ix=zu.exports;const qd=oa(ix),sx={Accept:"application/json","Content-Type":"application/json"},ox="POST",Fd={headers:sx,method:ox},zd=10;class Bn{constructor(e,t=!1){if(this.url=e,this.disableProviderPing=t,this.events=new Ar.EventEmitter,this.isAvailable=!1,this.registering=!1,!dd(e))throw new Error(`Provided URL is not compatible with HTTP connection: ${e}`);this.url=e,this.disableProviderPing=t}get connected(){return this.isAvailable}get connecting(){return this.registering}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}off(e,t){this.events.off(e,t)}removeListener(e,t){this.events.removeListener(e,t)}async open(e=this.url){await this.register(e)}async close(){if(!this.isAvailable)throw new Error("Connection already closed");this.onClose()}async send(e,t){this.isAvailable||await this.register();try{const i=ci(e),c=await(await qd(this.url,Object.assign(Object.assign({},Fd),{body:i}))).json();this.onPayload({data:c})}catch(i){this.onError(e.id,i)}}async register(e=this.url){if(!dd(e))throw new Error(`Provided URL is not compatible with HTTP connection: ${e}`);if(this.registering){const t=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=t||this.events.listenerCount("open")>=t)&&this.events.setMaxListeners(t+1),new Promise((i,o)=>{this.events.once("register_error",c=>{this.resetMaxListeners(),o(c)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.isAvailable>"u")return o(new Error("HTTP connection is missing or invalid"));i()})})}this.url=e,this.registering=!0;try{if(!this.disableProviderPing){const t=ci({id:1,jsonrpc:"2.0",method:"test",params:[]});await qd(e,Object.assign(Object.assign({},Fd),{body:t}))}this.onOpen()}catch(t){const i=this.parseError(t);throw this.events.emit("register_error",i),this.onClose(),i}}onOpen(){this.isAvailable=!0,this.registering=!1,this.events.emit("open")}onClose(){this.isAvailable=!1,this.registering=!1,this.events.emit("close")}onPayload(e){if(typeof e.data>"u")return;const t=typeof e.data=="string"?js(e.data):e.data;this.events.emit("payload",t)}onError(e,t){const i=this.parseError(t),o=i.message||i.toString(),c=_a(e,o);this.events.emit("payload",c)}parseError(e,t=this.url){return Qp(e,t,"HTTP")}resetMaxListeners(){this.events.getMaxListeners()>zd&&this.events.setMaxListeners(zd)}}const Bd="error",ax="wss://relay.walletconnect.com",cx="wc",ux="universal_provider",Hd=`${cx}@2:${ux}:`,hx="https://rpc.walletconnect.com/v1/",xn={DEFAULT_CHAIN_CHANGED:"default_chain_changed"};var ms=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Bu={exports:{}};/**
* @license
* Lodash <https://lodash.com/>
* Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
* Released under MIT license <https://lodash.com/license>
* Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
* Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
*/(function(n,e){(function(){var t,i="4.17.21",o=200,c="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",u="Expected a function",f="Invalid `variable` option passed into `_.template`",g="__lodash_hash_undefined__",p=500,_="__lodash_placeholder__",D=1,S=2,x=4,O=1,F=2,H=1,ne=2,L=4,M=8,C=16,T=32,E=64,h=128,b=256,W=512,G=30,se="...",ue=800,de=16,w=1,A=2,ee=3,Q=1/0,K=9007199254740991,V=17976931348623157e292,J=NaN,re=4294967295,be=re-1,oe=re>>>1,we=[["ary",h],["bind",H],["bindKey",ne],["curry",M],["curryRight",C],["flip",W],["partial",T],["partialRight",E],["rearg",b]],le="[object Arguments]",ve="[object Array]",B="[object AsyncFunction]",z="[object Boolean]",$="[object Date]",d="[object DOMException]",R="[object Error]",ae="[object Function]",fe="[object GeneratorFunction]",Ie="[object Map]",Be="[object Number]",Ke="[object Null]",Ue="[object Object]",gt="[object Promise]",yt="[object Proxy]",qe="[object RegExp]",xe="[object Set]",Ne="[object String]",Le="[object Symbol]",Fe="[object Undefined]",Pe="[object WeakMap]",$e="[object WeakSet]",Se="[object ArrayBuffer]",Ce="[object DataView]",He="[object Float32Array]",Oe="[object Float64Array]",Ve="[object Int8Array]",Ge="[object Int16Array]",et="[object Int32Array]",tt="[object Uint8Array]",Qe="[object Uint8ClampedArray]",rr="[object Uint16Array]",fr="[object Uint32Array]",Qr=/\b__p \+= '';/g,nr=/\b(__p \+=) '' \+/g,an=/(__e\(.*?\)|\b__t\)) \+\n'';/g,On=/&(?:amp|lt|gt|quot|#39);/g,Hn=/[&<>"']/g,St=RegExp(On.source),_t=RegExp(Hn.source),It=/<%-([\s\S]+?)%>/g,xt=/<%([\s\S]+?)%>/g,Et=/<%=([\s\S]+?)%>/g,vt=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,jt=/^\w*$/,Ut=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Ot=/[\\^$.*+?()[\]{}|]/g,Mt=RegExp(Ot.source),Pt=/^\s+/,Tt=/\s/,Ct=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,lt=/\{\n\/\* \[wrapped with (.+)\] \*/,qt=/,? & /,Ft=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,wa=/[()=,{}\[\]\/\s]/,Ea=/\\(\\)?/g,Da=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Rr=/\w*$/,Sa=/^[-+]0x[0-9a-f]+$/i,Ia=/^0b[01]+$/i,xa=/^\[object .+?Constructor\]$/,Oa=/^0o[0-7]+$/i,Pa=/^(?:0|[1-9]\d*)$/,cn=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,gi=/($^)/,Ca=/['\n\r\u2028\u2029\\]/g,yi="\\ud800-\\udfff",Aa="\\u0300-\\u036f",Ta="\\ufe20-\\ufe2f",_i="\\u20d0-\\u20ff",Ms=Aa+Ta+_i,qs="\\u2700-\\u27bf",Br="a-z\\xdf-\\xf6\\xf8-\\xff",Ra="\\xac\\xb1\\xd7\\xf7",Na="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",La="\\u2000-\\u206f",$a=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Fs="A-Z\\xc0-\\xd6\\xd8-\\xde",zs="\\ufe0e\\ufe0f",kn=Ra+Na+La+$a,Gi="['’]",Kn="["+yi+"]",Yi="["+kn+"]",Vn="["+Ms+"]",Bs="\\d+",ja="["+qs+"]",Hs="["+Br+"]",ks="[^"+yi+kn+Bs+qs+Br+Fs+"]",vi="\\ud83c[\\udffb-\\udfff]",Ua="(?:"+Vn+"|"+vi+")",Ks="[^"+yi+"]",mi="(?:\\ud83c[\\udde6-\\uddff]){2}",Pn="[\\ud800-\\udbff][\\udc00-\\udfff]",Er="["+Fs+"]",Vs="\\u200d",Ws="(?:"+Hs+"|"+ks+")",Xr="(?:"+Er+"|"+ks+")",Gs="(?:"+Gi+"(?:d|ll|m|re|s|t|ve))?",Ys="(?:"+Gi+"(?:D|LL|M|RE|S|T|VE))?",Js=Ua+"?",Qs="["+zs+"]?",Ma="(?:"+Vs+"(?:"+[Ks,mi,Pn].join("|")+")"+Qs+Js+")*",un="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Xs="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",Zs=Qs+Js+Ma,bi="(?:"+[ja,mi,Pn].join("|")+")"+Zs,qa="(?:"+[Ks+Vn+"?",Vn,mi,Pn,Kn].join("|")+")",Ji=RegExp(Gi,"g"),Fa=RegExp(Vn,"g"),wi=RegExp(vi+"(?="+vi+")|"+qa+Zs,"g"),eo=RegExp([Er+"?"+Hs+"+"+Gs+"(?="+[Yi,Er,"$"].join("|")+")",Xr+"+"+Ys+"(?="+[Yi,Er+Ws,"$"].join("|")+")",Er+"?"+Ws+"+"+Gs,Er+"+"+Ys,Xs,un,Bs,bi].join("|"),"g"),to=RegExp("["+Vs+yi+Ms+zs+"]"),Wn=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,ro=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],za=-1,at={};at[He]=at[Oe]=at[Ve]=at[Ge]=at[et]=at[tt]=at[Qe]=at[rr]=at[fr]=!0,at[le]=at[ve]=at[Se]=at[z]=at[Ce]=at[$]=at[R]=at[ae]=at[Ie]=at[Be]=at[Ue]=at[qe]=at[xe]=at[Ne]=at[Pe]=!1;var st={};st[le]=st[ve]=st[Se]=st[Ce]=st[z]=st[$]=st[He]=st[Oe]=st[Ve]=st[Ge]=st[et]=st[Ie]=st[Be]=st[Ue]=st[qe]=st[xe]=st[Ne]=st[Le]=st[tt]=st[Qe]=st[rr]=st[fr]=!0,st[R]=st[ae]=st[Pe]=!1;var I={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"},j={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},te={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},pe={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},ct=parseFloat,Te=parseInt,dt=typeof ms=="object"&&ms&&ms.Object===Object&&ms,zt=typeof self=="object"&&self&&self.Object===Object&&self,Xe=dt||zt||Function("return this")(),ut=e&&!e.nodeType&&e,Rt=ut&&!0&&n&&!n.nodeType&&n,dr=Rt&&Rt.exports===ut,Bt=dr&&dt.process,pt=function(){try{var U=Rt&&Rt.require&&Rt.require("util").types;return U||Bt&&Bt.binding&&Bt.binding("util")}catch{}}(),ir=pt&&pt.isArrayBuffer,Hr=pt&&pt.isDate,Nr=pt&&pt.isMap,Zr=pt&&pt.isRegExp,Qi=pt&&pt.isSet,Gn=pt&&pt.isTypedArray;function Kt(U,Y,k){switch(k.length){case 0:return U.call(Y);case 1:return U.call(Y,k[0]);case 2:return U.call(Y,k[0],k[1]);case 3:return U.call(Y,k[0],k[1],k[2])}return U.apply(Y,k)}function Sg(U,Y,k,ge){for(var Ae=-1,rt=U==null?0:U.length;++Ae<rt;){var Ht=U[Ae];Y(ge,Ht,k(Ht),U)}return ge}function Lr(U,Y){for(var k=-1,ge=U==null?0:U.length;++k<ge&&Y(U[k],k,U)!==!1;);return U}function Ig(U,Y){for(var k=U==null?0:U.length;k--&&Y(U[k],k,U)!==!1;);return U}function ph(U,Y){for(var k=-1,ge=U==null?0:U.length;++k<ge;)if(!Y(U[k],k,U))return!1;return!0}function Cn(U,Y){for(var k=-1,ge=U==null?0:U.length,Ae=0,rt=[];++k<ge;){var Ht=U[k];Y(Ht,k,U)&&(rt[Ae++]=Ht)}return rt}function no(U,Y){var k=U==null?0:U.length;return!!k&&Ei(U,Y,0)>-1}function Ba(U,Y,k){for(var ge=-1,Ae=U==null?0:U.length;++ge<Ae;)if(k(Y,U[ge]))return!0;return!1}function mt(U,Y){for(var k=-1,ge=U==null?0:U.length,Ae=Array(ge);++k<ge;)Ae[k]=Y(U[k],k,U);return Ae}function An(U,Y){for(var k=-1,ge=Y.length,Ae=U.length;++k<ge;)U[Ae+k]=Y[k];return U}function Ha(U,Y,k,ge){var Ae=-1,rt=U==null?0:U.length;for(ge&&rt&&(k=U[++Ae]);++Ae<rt;)k=Y(k,U[Ae],Ae,U);return k}function xg(U,Y,k,ge){var Ae=U==null?0:U.length;for(ge&&Ae&&(k=U[--Ae]);Ae--;)k=Y(k,U[Ae],Ae,U);return k}function ka(U,Y){for(var k=-1,ge=U==null?0:U.length;++k<ge;)if(Y(U[k],k,U))return!0;return!1}var Og=Ka("length");function Pg(U){return U.split("")}function Cg(U){return U.match(Ft)||[]}function gh(U,Y,k){var ge;return k(U,function(Ae,rt,Ht){if(Y(Ae,rt,Ht))return ge=rt,!1}),ge}function io(U,Y,k,ge){for(var Ae=U.length,rt=k+(ge?1:-1);ge?rt--:++rt<Ae;)if(Y(U[rt],rt,U))return rt;return-1}function Ei(U,Y,k){return Y===Y?zg(U,Y,k):io(U,yh,k)}function Ag(U,Y,k,ge){for(var Ae=k-1,rt=U.length;++Ae<rt;)if(ge(U[Ae],Y))return Ae;return-1}function yh(U){return U!==U}function _h(U,Y){var k=U==null?0:U.length;return k?Wa(U,Y)/k:J}function Ka(U){return function(Y){return Y==null?t:Y[U]}}function Va(U){return function(Y){return U==null?t:U[Y]}}function vh(U,Y,k,ge,Ae){return Ae(U,function(rt,Ht,ht){k=ge?(ge=!1,rt):Y(k,rt,Ht,ht)}),k}function Tg(U,Y){var k=U.length;for(U.sort(Y);k--;)U[k]=U[k].value;return U}function Wa(U,Y){for(var k,ge=-1,Ae=U.length;++ge<Ae;){var rt=Y(U[ge]);rt!==t&&(k=k===t?rt:k+rt)}return k}function Ga(U,Y){for(var k=-1,ge=Array(U);++k<U;)ge[k]=Y(k);return ge}function Rg(U,Y){return mt(Y,function(k){return[k,U[k]]})}function mh(U){return U&&U.slice(0,Dh(U)+1).replace(Pt,"")}function Dr(U){return function(Y){return U(Y)}}function Ya(U,Y){return mt(Y,function(k){return U[k]})}function Xi(U,Y){return U.has(Y)}function bh(U,Y){for(var k=-1,ge=U.length;++k<ge&&Ei(Y,U[k],0)>-1;);return k}function wh(U,Y){for(var k=U.length;k--&&Ei(Y,U[k],0)>-1;);return k}function Ng(U,Y){for(var k=U.length,ge=0;k--;)U[k]===Y&&++ge;return ge}var Lg=Va(I),$g=Va(j);function jg(U){return"\\"+pe[U]}function Ug(U,Y){return U==null?t:U[Y]}function Di(U){return to.test(U)}function Mg(U){return Wn.test(U)}function qg(U){for(var Y,k=[];!(Y=U.next()).done;)k.push(Y.value);return k}function Ja(U){var Y=-1,k=Array(U.size);return U.forEach(function(ge,Ae){k[++Y]=[Ae,ge]}),k}function Eh(U,Y){return function(k){return U(Y(k))}}function Tn(U,Y){for(var k=-1,ge=U.length,Ae=0,rt=[];++k<ge;){var Ht=U[k];(Ht===Y||Ht===_)&&(U[k]=_,rt[Ae++]=k)}return rt}function so(U){var Y=-1,k=Array(U.size);return U.forEach(function(ge){k[++Y]=ge}),k}function Fg(U){var Y=-1,k=Array(U.size);return U.forEach(function(ge){k[++Y]=[ge,ge]}),k}function zg(U,Y,k){for(var ge=k-1,Ae=U.length;++ge<Ae;)if(U[ge]===Y)return ge;return-1}function Bg(U,Y,k){for(var ge=k+1;ge--;)if(U[ge]===Y)return ge;return ge}function Si(U){return Di(U)?kg(U):Og(U)}function kr(U){return Di(U)?Kg(U):Pg(U)}function Dh(U){for(var Y=U.length;Y--&&Tt.test(U.charAt(Y)););return Y}var Hg=Va(te);function kg(U){for(var Y=wi.lastIndex=0;wi.test(U);)++Y;return Y}function Kg(U){return U.match(wi)||[]}function Vg(U){return U.match(eo)||[]}var Wg=function U(Y){Y=Y==null?Xe:Ii.defaults(Xe.Object(),Y,Ii.pick(Xe,ro));var k=Y.Array,ge=Y.Date,Ae=Y.Error,rt=Y.Function,Ht=Y.Math,ht=Y.Object,Qa=Y.RegExp,Gg=Y.String,$r=Y.TypeError,oo=k.prototype,Yg=rt.prototype,xi=ht.prototype,ao=Y["__core-js_shared__"],co=Yg.toString,it=xi.hasOwnProperty,Jg=0,Sh=function(){var r=/[^.]+$/.exec(ao&&ao.keys&&ao.keys.IE_PROTO||"");return r?"Symbol(src)_1."+r:""}(),uo=xi.toString,Qg=co.call(ht),Xg=Xe._,Zg=Qa("^"+co.call(it).replace(Ot,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),ho=dr?Y.Buffer:t,Rn=Y.Symbol,lo=Y.Uint8Array,Ih=ho?ho.allocUnsafe:t,fo=Eh(ht.getPrototypeOf,ht),xh=ht.create,Oh=xi.propertyIsEnumerable,po=oo.splice,Ph=Rn?Rn.isConcatSpreadable:t,Zi=Rn?Rn.iterator:t,Yn=Rn?Rn.toStringTag:t,go=function(){try{var r=ei(ht,"defineProperty");return r({},"",{}),r}catch{}}(),e0=Y.clearTimeout!==Xe.clearTimeout&&Y.clearTimeout,t0=ge&&ge.now!==Xe.Date.now&&ge.now,r0=Y.setTimeout!==Xe.setTimeout&&Y.setTimeout,yo=Ht.ceil,_o=Ht.floor,Xa=ht.getOwnPropertySymbols,n0=ho?ho.isBuffer:t,Ch=Y.isFinite,i0=oo.join,s0=Eh(ht.keys,ht),kt=Ht.max,Xt=Ht.min,o0=ge.now,a0=Y.parseInt,Ah=Ht.random,c0=oo.reverse,Za=ei(Y,"DataView"),es=ei(Y,"Map"),ec=ei(Y,"Promise"),Oi=ei(Y,"Set"),ts=ei(Y,"WeakMap"),rs=ei(ht,"create"),vo=ts&&new ts,Pi={},u0=ti(Za),h0=ti(es),l0=ti(ec),f0=ti(Oi),d0=ti(ts),mo=Rn?Rn.prototype:t,ns=mo?mo.valueOf:t,Th=mo?mo.toString:t;function v(r){if(At(r)&&!Re(r)&&!(r instanceof Ye)){if(r instanceof jr)return r;if(it.call(r,"__wrapped__"))return Rl(r)}return new jr(r)}var Ci=function(){function r(){}return function(s){if(!Dt(s))return{};if(xh)return xh(s);r.prototype=s;var a=new r;return r.prototype=t,a}}();function bo(){}function jr(r,s){this.__wrapped__=r,this.__actions__=[],this.__chain__=!!s,this.__index__=0,this.__values__=t}v.templateSettings={escape:It,evaluate:xt,interpolate:Et,variable:"",imports:{_:v}},v.prototype=bo.prototype,v.prototype.constructor=v,jr.prototype=Ci(bo.prototype),jr.prototype.constructor=jr;function Ye(r){this.__wrapped__=r,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=re,this.__views__=[]}function p0(){var r=new Ye(this.__wrapped__);return r.__actions__=pr(this.__actions__),r.__dir__=this.__dir__,r.__filtered__=this.__filtered__,r.__iteratees__=pr(this.__iteratees__),r.__takeCount__=this.__takeCount__,r.__views__=pr(this.__views__),r}function g0(){if(this.__filtered__){var r=new Ye(this);r.__dir__=-1,r.__filtered__=!0}else r=this.clone(),r.__dir__*=-1;return r}function y0(){var r=this.__wrapped__.value(),s=this.__dir__,a=Re(r),l=s<0,y=a?r.length:0,m=Py(0,y,this.__views__),P=m.start,N=m.end,q=N-P,X=l?N:P-1,Z=this.__iteratees__,ie=Z.length,he=0,ye=Xt(q,this.__takeCount__);if(!a||!l&&y==q&&ye==q)return tl(r,this.__actions__);var Ee=[];e:for(;q--&&he<ye;){X+=s;for(var ze=-1,De=r[X];++ze<ie;){var We=Z[ze],Ze=We.iteratee,xr=We.type,ar=Ze(De);if(xr==A)De=ar;else if(!ar){if(xr==w)continue e;break e}}Ee[he++]=De}return Ee}Ye.prototype=Ci(bo.prototype),Ye.prototype.constructor=Ye;function Jn(r){var s=-1,a=r==null?0:r.length;for(this.clear();++s<a;){var l=r[s];this.set(l[0],l[1])}}function _0(){this.__data__=rs?rs(null):{},this.size=0}function v0(r){var s=this.has(r)&&delete this.__data__[r];return this.size-=s?1:0,s}function m0(r){var s=this.__data__;if(rs){var a=s[r];return a===g?t:a}return it.call(s,r)?s[r]:t}function b0(r){var s=this.__data__;return rs?s[r]!==t:it.call(s,r)}function w0(r,s){var a=this.__data__;return this.size+=this.has(r)?0:1,a[r]=rs&&s===t?g:s,this}Jn.prototype.clear=_0,Jn.prototype.delete=v0,Jn.prototype.get=m0,Jn.prototype.has=b0,Jn.prototype.set=w0;function hn(r){var s=-1,a=r==null?0:r.length;for(this.clear();++s<a;){var l=r[s];this.set(l[0],l[1])}}function E0(){this.__data__=[],this.size=0}function D0(r){var s=this.__data__,a=wo(s,r);if(a<0)return!1;var l=s.length-1;return a==l?s.pop():po.call(s,a,1),--this.size,!0}function S0(r){var s=this.__data__,a=wo(s,r);return a<0?t:s[a][1]}function I0(r){return wo(this.__data__,r)>-1}function x0(r,s){var a=this.__data__,l=wo(a,r);return l<0?(++this.size,a.push([r,s])):a[l][1]=s,this}hn.prototype.clear=E0,hn.prototype.delete=D0,hn.prototype.get=S0,hn.prototype.has=I0,hn.prototype.set=x0;function ln(r){var s=-1,a=r==null?0:r.length;for(this.clear();++s<a;){var l=r[s];this.set(l[0],l[1])}}function O0(){this.size=0,this.__data__={hash:new Jn,map:new(es||hn),string:new Jn}}function P0(r){var s=No(this,r).delete(r);return this.size-=s?1:0,s}function C0(r){return No(this,r).get(r)}function A0(r){return No(this,r).has(r)}function T0(r,s){var a=No(this,r),l=a.size;return a.set(r,s),this.size+=a.size==l?0:1,this}ln.prototype.clear=O0,ln.prototype.delete=P0,ln.prototype.get=C0,ln.prototype.has=A0,ln.prototype.set=T0;function Qn(r){var s=-1,a=r==null?0:r.length;for(this.__data__=new ln;++s<a;)this.add(r[s])}function R0(r){return this.__data__.set(r,g),this}function N0(r){return this.__data__.has(r)}Qn.prototype.add=Qn.prototype.push=R0,Qn.prototype.has=N0;function Kr(r){var s=this.__data__=new hn(r);this.size=s.size}function L0(){this.__data__=new hn,this.size=0}function $0(r){var s=this.__data__,a=s.delete(r);return this.size=s.size,a}function j0(r){return this.__data__.get(r)}function U0(r){return this.__data__.has(r)}function M0(r,s){var a=this.__data__;if(a instanceof hn){var l=a.__data__;if(!es||l.length<o-1)return l.push([r,s]),this.size=++a.size,this;a=this.__data__=new ln(l)}return a.set(r,s),this.size=a.size,this}Kr.prototype.clear=L0,Kr.prototype.delete=$0,Kr.prototype.get=j0,Kr.prototype.has=U0,Kr.prototype.set=M0;function Rh(r,s){var a=Re(r),l=!a&&ri(r),y=!a&&!l&&Un(r),m=!a&&!l&&!y&&Ni(r),P=a||l||y||m,N=P?Ga(r.length,Gg):[],q=N.length;for(var X in r)(s||it.call(r,X))&&!(P&&(X=="length"||y&&(X=="offset"||X=="parent")||m&&(X=="buffer"||X=="byteLength"||X=="byteOffset")||gn(X,q)))&&N.push(X);return N}function Nh(r){var s=r.length;return s?r[lc(0,s-1)]:t}function q0(r,s){return Lo(pr(r),Xn(s,0,r.length))}function F0(r){return Lo(pr(r))}function tc(r,s,a){(a!==t&&!Vr(r[s],a)||a===t&&!(s in r))&&fn(r,s,a)}function is(r,s,a){var l=r[s];(!(it.call(r,s)&&Vr(l,a))||a===t&&!(s in r))&&fn(r,s,a)}function wo(r,s){for(var a=r.length;a--;)if(Vr(r[a][0],s))return a;return-1}function z0(r,s,a,l){return Nn(r,function(y,m,P){s(l,y,a(y),P)}),l}function Lh(r,s){return r&&tn(s,Vt(s),r)}function B0(r,s){return r&&tn(s,yr(s),r)}function fn(r,s,a){s=="__proto__"&&go?go(r,s,{configurable:!0,enumerable:!0,value:a,writable:!0}):r[s]=a}function rc(r,s){for(var a=-1,l=s.length,y=k(l),m=r==null;++a<l;)y[a]=m?t:jc(r,s[a]);return y}function Xn(r,s,a){return r===r&&(a!==t&&(r=r<=a?r:a),s!==t&&(r=r>=s?r:s)),r}function Ur(r,s,a,l,y,m){var P,N=s&D,q=s&S,X=s&x;if(a&&(P=y?a(r,l,y,m):a(r)),P!==t)return P;if(!Dt(r))return r;var Z=Re(r);if(Z){if(P=Ay(r),!N)return pr(r,P)}else{var ie=Zt(r),he=ie==ae||ie==fe;if(Un(r))return il(r,N);if(ie==Ue||ie==le||he&&!y){if(P=q||he?{}:Dl(r),!N)return q?my(r,B0(P,r)):vy(r,Lh(P,r))}else{if(!st[ie])return y?r:{};P=Ty(r,ie,N)}}m||(m=new Kr);var ye=m.get(r);if(ye)return ye;m.set(r,P),Xl(r)?r.forEach(function(De){P.add(Ur(De,s,a,De,r,m))}):Jl(r)&&r.forEach(function(De,We){P.set(We,Ur(De,s,a,We,r,m))});var Ee=X?q?Ec:wc:q?yr:Vt,ze=Z?t:Ee(r);return Lr(ze||r,function(De,We){ze&&(We=De,De=r[We]),is(P,We,Ur(De,s,a,We,r,m))}),P}function H0(r){var s=Vt(r);return function(a){return $h(a,r,s)}}function $h(r,s,a){var l=a.length;if(r==null)return!l;for(r=ht(r);l--;){var y=a[l],m=s[y],P=r[y];if(P===t&&!(y in r)||!m(P))return!1}return!0}function jh(r,s,a){if(typeof r!="function")throw new $r(u);return ls(function(){r.apply(t,a)},s)}function ss(r,s,a,l){var y=-1,m=no,P=!0,N=r.length,q=[],X=s.length;if(!N)return q;a&&(s=mt(s,Dr(a))),l?(m=Ba,P=!1):s.length>=o&&(m=Xi,P=!1,s=new Qn(s));e:for(;++y<N;){var Z=r[y],ie=a==null?Z:a(Z);if(Z=l||Z!==0?Z:0,P&&ie===ie){for(var he=X;he--;)if(s[he]===ie)continue e;q.push(Z)}else m(s,ie,l)||q.push(Z)}return q}var Nn=ul(en),Uh=ul(ic,!0);function k0(r,s){var a=!0;return Nn(r,function(l,y,m){return a=!!s(l,y,m),a}),a}function Eo(r,s,a){for(var l=-1,y=r.length;++l<y;){var m=r[l],P=s(m);if(P!=null&&(N===t?P===P&&!Ir(P):a(P,N)))var N=P,q=m}return q}function K0(r,s,a,l){var y=r.length;for(a=Me(a),a<0&&(a=-a>y?0:y+a),l=l===t||l>y?y:Me(l),l<0&&(l+=y),l=a>l?0:ef(l);a<l;)r[a++]=s;return r}function Mh(r,s){var a=[];return Nn(r,function(l,y,m){s(l,y,m)&&a.push(l)}),a}function Yt(r,s,a,l,y){var m=-1,P=r.length;for(a||(a=Ny),y||(y=[]);++m<P;){var N=r[m];s>0&&a(N)?s>1?Yt(N,s-1,a,l,y):An(y,N):l||(y[y.length]=N)}return y}var nc=hl(),qh=hl(!0);function en(r,s){return r&&nc(r,s,Vt)}function ic(r,s){return r&&qh(r,s,Vt)}function Do(r,s){return Cn(s,function(a){return yn(r[a])})}function Zn(r,s){s=$n(s,r);for(var a=0,l=s.length;r!=null&&a<l;)r=r[rn(s[a++])];return a&&a==l?r:t}function Fh(r,s,a){var l=s(r);return Re(r)?l:An(l,a(r))}function sr(r){return r==null?r===t?Fe:Ke:Yn&&Yn in ht(r)?Oy(r):Fy(r)}function sc(r,s){return r>s}function V0(r,s){return r!=null&&it.call(r,s)}function W0(r,s){return r!=null&&s in ht(r)}function G0(r,s,a){return r>=Xt(s,a)&&r<kt(s,a)}function oc(r,s,a){for(var l=a?Ba:no,y=r[0].length,m=r.length,P=m,N=k(m),q=1/0,X=[];P--;){var Z=r[P];P&&s&&(Z=mt(Z,Dr(s))),q=Xt(Z.length,q),N[P]=!a&&(s||y>=120&&Z.length>=120)?new Qn(P&&Z):t}Z=r[0];var ie=-1,he=N[0];e:for(;++ie<y&&X.length<q;){var ye=Z[ie],Ee=s?s(ye):ye;if(ye=a||ye!==0?ye:0,!(he?Xi(he,Ee):l(X,Ee,a))){for(P=m;--P;){var ze=N[P];if(!(ze?Xi(ze,Ee):l(r[P],Ee,a)))continue e}he&&he.push(Ee),X.push(ye)}}return X}function Y0(r,s,a,l){return en(r,function(y,m,P){s(l,a(y),m,P)}),l}function os(r,s,a){s=$n(s,r),r=Ol(r,s);var l=r==null?r:r[rn(qr(s))];return l==null?t:Kt(l,r,a)}function zh(r){return At(r)&&sr(r)==le}function J0(r){return At(r)&&sr(r)==Se}function Q0(r){return At(r)&&sr(r)==$}function as(r,s,a,l,y){return r===s?!0:r==null||s==null||!At(r)&&!At(s)?r!==r&&s!==s:X0(r,s,a,l,as,y)}function X0(r,s,a,l,y,m){var P=Re(r),N=Re(s),q=P?ve:Zt(r),X=N?ve:Zt(s);q=q==le?Ue:q,X=X==le?Ue:X;var Z=q==Ue,ie=X==Ue,he=q==X;if(he&&Un(r)){if(!Un(s))return!1;P=!0,Z=!1}if(he&&!Z)return m||(m=new Kr),P||Ni(r)?bl(r,s,a,l,y,m):Iy(r,s,q,a,l,y,m);if(!(a&O)){var ye=Z&&it.call(r,"__wrapped__"),Ee=ie&&it.call(s,"__wrapped__");if(ye||Ee){var ze=ye?r.value():r,De=Ee?s.value():s;return m||(m=new Kr),y(ze,De,a,l,m)}}return he?(m||(m=new Kr),xy(r,s,a,l,y,m)):!1}function Z0(r){return At(r)&&Zt(r)==Ie}function ac(r,s,a,l){var y=a.length,m=y,P=!l;if(r==null)return!m;for(r=ht(r);y--;){var N=a[y];if(P&&N[2]?N[1]!==r[N[0]]:!(N[0]in r))return!1}for(;++y<m;){N=a[y];var q=N[0],X=r[q],Z=N[1];if(P&&N[2]){if(X===t&&!(q in r))return!1}else{var ie=new Kr;if(l)var he=l(X,Z,q,r,s,ie);if(!(he===t?as(Z,X,O|F,l,ie):he))return!1}}return!0}function Bh(r){if(!Dt(r)||$y(r))return!1;var s=yn(r)?Zg:xa;return s.test(ti(r))}function ey(r){return At(r)&&sr(r)==qe}function ty(r){return At(r)&&Zt(r)==xe}function ry(r){return At(r)&&Fo(r.length)&&!!at[sr(r)]}function Hh(r){return typeof r=="function"?r:r==null?_r:typeof r=="object"?Re(r)?Vh(r[0],r[1]):Kh(r):ff(r)}function cc(r){if(!hs(r))return s0(r);var s=[];for(var a in ht(r))it.call(r,a)&&a!="constructor"&&s.push(a);return s}function ny(r){if(!Dt(r))return qy(r);var s=hs(r),a=[];for(var l in r)l=="constructor"&&(s||!it.call(r,l))||a.push(l);return a}function uc(r,s){return r<s}function kh(r,s){var a=-1,l=gr(r)?k(r.length):[];return Nn(r,function(y,m,P){l[++a]=s(y,m,P)}),l}function Kh(r){var s=Sc(r);return s.length==1&&s[0][2]?Il(s[0][0],s[0][1]):function(a){return a===r||ac(a,r,s)}}function Vh(r,s){return xc(r)&&Sl(s)?Il(rn(r),s):function(a){var l=jc(a,r);return l===t&&l===s?Uc(a,r):as(s,l,O|F)}}function So(r,s,a,l,y){r!==s&&nc(s,function(m,P){if(y||(y=new Kr),Dt(m))iy(r,s,P,a,So,l,y);else{var N=l?l(Pc(r,P),m,P+"",r,s,y):t;N===t&&(N=m),tc(r,P,N)}},yr)}function iy(r,s,a,l,y,m,P){var N=Pc(r,a),q=Pc(s,a),X=P.get(q);if(X){tc(r,a,X);return}var Z=m?m(N,q,a+"",r,s,P):t,ie=Z===t;if(ie){var he=Re(q),ye=!he&&Un(q),Ee=!he&&!ye&&Ni(q);Z=q,he||ye||Ee?Re(N)?Z=N:Nt(N)?Z=pr(N):ye?(ie=!1,Z=il(q,!0)):Ee?(ie=!1,Z=sl(q,!0)):Z=[]:fs(q)||ri(q)?(Z=N,ri(N)?Z=tf(N):(!Dt(N)||yn(N))&&(Z=Dl(q))):ie=!1}ie&&(P.set(q,Z),y(Z,q,l,m,P),P.delete(q)),tc(r,a,Z)}function Wh(r,s){var a=r.length;if(a)return s+=s<0?a:0,gn(s,a)?r[s]:t}function Gh(r,s,a){s.length?s=mt(s,function(m){return Re(m)?function(P){return Zn(P,m.length===1?m[0]:m)}:m}):s=[_r];var l=-1;s=mt(s,Dr(me()));var y=kh(r,function(m,P,N){var q=mt(s,function(X){return X(m)});return{criteria:q,index:++l,value:m}});return Tg(y,function(m,P){return _y(m,P,a)})}function sy(r,s){return Yh(r,s,function(a,l){return Uc(r,l)})}function Yh(r,s,a){for(var l=-1,y=s.length,m={};++l<y;){var P=s[l],N=Zn(r,P);a(N,P)&&cs(m,$n(P,r),N)}return m}function oy(r){return function(s){return Zn(s,r)}}function hc(r,s,a,l){var y=l?Ag:Ei,m=-1,P=s.length,N=r;for(r===s&&(s=pr(s)),a&&(N=mt(r,Dr(a)));++m<P;)for(var q=0,X=s[m],Z=a?a(X):X;(q=y(N,Z,q,l))>-1;)N!==r&&po.call(N,q,1),po.call(r,q,1);return r}function Jh(r,s){for(var a=r?s.length:0,l=a-1;a--;){var y=s[a];if(a==l||y!==m){var m=y;gn(y)?po.call(r,y,1):pc(r,y)}}return r}function lc(r,s){return r+_o(Ah()*(s-r+1))}function ay(r,s,a,l){for(var y=-1,m=kt(yo((s-r)/(a||1)),0),P=k(m);m--;)P[l?m:++y]=r,r+=a;return P}function fc(r,s){var a="";if(!r||s<1||s>K)return a;do s%2&&(a+=r),s=_o(s/2),s&&(r+=r);while(s);return a}function ke(r,s){return Cc(xl(r,s,_r),r+"")}function cy(r){return Nh(Li(r))}function uy(r,s){var a=Li(r);return Lo(a,Xn(s,0,a.length))}function cs(r,s,a,l){if(!Dt(r))return r;s=$n(s,r);for(var y=-1,m=s.length,P=m-1,N=r;N!=null&&++y<m;){var q=rn(s[y]),X=a;if(q==="__proto__"||q==="constructor"||q==="prototype")return r;if(y!=P){var Z=N[q];X=l?l(Z,q,N):t,X===t&&(X=Dt(Z)?Z:gn(s[y+1])?[]:{})}is(N,q,X),N=N[q]}return r}var Qh=vo?function(r,s){return vo.set(r,s),r}:_r,hy=go?function(r,s){return go(r,"toString",{configurable:!0,enumerable:!1,value:qc(s),writable:!0})}:_r;function ly(r){return Lo(Li(r))}function Mr(r,s,a){var l=-1,y=r.length;s<0&&(s=-s>y?0:y+s),a=a>y?y:a,a<0&&(a+=y),y=s>a?0:a-s>>>0,s>>>=0;for(var m=k(y);++l<y;)m[l]=r[l+s];return m}function fy(r,s){var a;return Nn(r,function(l,y,m){return a=s(l,y,m),!a}),!!a}function Io(r,s,a){var l=0,y=r==null?l:r.length;if(typeof s=="number"&&s===s&&y<=oe){for(;l<y;){var m=l+y>>>1,P=r[m];P!==null&&!Ir(P)&&(a?P<=s:P<s)?l=m+1:y=m}return y}return dc(r,s,_r,a)}function dc(r,s,a,l){var y=0,m=r==null?0:r.length;if(m===0)return 0;s=a(s);for(var P=s!==s,N=s===null,q=Ir(s),X=s===t;y<m;){var Z=_o((y+m)/2),ie=a(r[Z]),he=ie!==t,ye=ie===null,Ee=ie===ie,ze=Ir(ie);if(P)var De=l||Ee;else X?De=Ee&&(l||he):N?De=Ee&&he&&(l||!ye):q?De=Ee&&he&&!ye&&(l||!ze):ye||ze?De=!1:De=l?ie<=s:ie<s;De?y=Z+1:m=Z}return Xt(m,be)}function Xh(r,s){for(var a=-1,l=r.length,y=0,m=[];++a<l;){var P=r[a],N=s?s(P):P;if(!a||!Vr(N,q)){var q=N;m[y++]=P===0?0:P}}return m}function Zh(r){return typeof r=="number"?r:Ir(r)?J:+r}function Sr(r){if(typeof r=="string")return r;if(Re(r))return mt(r,Sr)+"";if(Ir(r))return Th?Th.call(r):"";var s=r+"";return s=="0"&&1/r==-Q?"-0":s}function Ln(r,s,a){var l=-1,y=no,m=r.length,P=!0,N=[],q=N;if(a)P=!1,y=Ba;else if(m>=o){var X=s?null:Dy(r);if(X)return so(X);P=!1,y=Xi,q=new Qn}else q=s?[]:N;e:for(;++l<m;){var Z=r[l],ie=s?s(Z):Z;if(Z=a||Z!==0?Z:0,P&&ie===ie){for(var he=q.length;he--;)if(q[he]===ie)continue e;s&&q.push(ie),N.push(Z)}else y(q,ie,a)||(q!==N&&q.push(ie),N.push(Z))}return N}function pc(r,s){return s=$n(s,r),r=Ol(r,s),r==null||delete r[rn(qr(s))]}function el(r,s,a,l){return cs(r,s,a(Zn(r,s)),l)}function xo(r,s,a,l){for(var y=r.length,m=l?y:-1;(l?m--:++m<y)&&s(r[m],m,r););return a?Mr(r,l?0:m,l?m+1:y):Mr(r,l?m+1:0,l?y:m)}function tl(r,s){var a=r;return a instanceof Ye&&(a=a.value()),Ha(s,function(l,y){return y.func.apply(y.thisArg,An([l],y.args))},a)}function gc(r,s,a){var l=r.length;if(l<2)return l?Ln(r[0]):[];for(var y=-1,m=k(l);++y<l;)for(var P=r[y],N=-1;++N<l;)N!=y&&(m[y]=ss(m[y]||P,r[N],s,a));return Ln(Yt(m,1),s,a)}function rl(r,s,a){for(var l=-1,y=r.length,m=s.length,P={};++l<y;){var N=l<m?s[l]:t;a(P,r[l],N)}return P}function yc(r){return Nt(r)?r:[]}function _c(r){return typeof r=="function"?r:_r}function $n(r,s){return Re(r)?r:xc(r,s)?[r]:Tl(nt(r))}var dy=ke;function jn(r,s,a){var l=r.length;return a=a===t?l:a,!s&&a>=l?r:Mr(r,s,a)}var nl=e0||function(r){return Xe.clearTimeout(r)};function il(r,s){if(s)return r.slice();var a=r.length,l=Ih?Ih(a):new r.constructor(a);return r.copy(l),l}function vc(r){var s=new r.constructor(r.byteLength);return new lo(s).set(new lo(r)),s}function py(r,s){var a=s?vc(r.buffer):r.buffer;return new r.constructor(a,r.byteOffset,r.byteLength)}function gy(r){var s=new r.constructor(r.source,Rr.exec(r));return s.lastIndex=r.lastIndex,s}function yy(r){return ns?ht(ns.call(r)):{}}function sl(r,s){var a=s?vc(r.buffer):r.buffer;return new r.constructor(a,r.byteOffset,r.length)}function ol(r,s){if(r!==s){var a=r!==t,l=r===null,y=r===r,m=Ir(r),P=s!==t,N=s===null,q=s===s,X=Ir(s);if(!N&&!X&&!m&&r>s||m&&P&&q&&!N&&!X||l&&P&&q||!a&&q||!y)return 1;if(!l&&!m&&!X&&r<s||X&&a&&y&&!l&&!m||N&&a&&y||!P&&y||!q)return-1}return 0}function _y(r,s,a){for(var l=-1,y=r.criteria,m=s.criteria,P=y.length,N=a.length;++l<P;){var q=ol(y[l],m[l]);if(q){if(l>=N)return q;var X=a[l];return q*(X=="desc"?-1:1)}}return r.index-s.index}function al(r,s,a,l){for(var y=-1,m=r.length,P=a.length,N=-1,q=s.length,X=kt(m-P,0),Z=k(q+X),ie=!l;++N<q;)Z[N]=s[N];for(;++y<P;)(ie||y<m)&&(Z[a[y]]=r[y]);for(;X--;)Z[N++]=r[y++];return Z}function cl(r,s,a,l){for(var y=-1,m=r.length,P=-1,N=a.length,q=-1,X=s.length,Z=kt(m-N,0),ie=k(Z+X),he=!l;++y<Z;)ie[y]=r[y];for(var ye=y;++q<X;)ie[ye+q]=s[q];for(;++P<N;)(he||y<m)&&(ie[ye+a[P]]=r[y++]);return ie}function pr(r,s){var a=-1,l=r.length;for(s||(s=k(l));++a<l;)s[a]=r[a];return s}function tn(r,s,a,l){var y=!a;a||(a={});for(var m=-1,P=s.length;++m<P;){var N=s[m],q=l?l(a[N],r[N],N,a,r):t;q===t&&(q=r[N]),y?fn(a,N,q):is(a,N,q)}return a}function vy(r,s){return tn(r,Ic(r),s)}function my(r,s){return tn(r,wl(r),s)}function Oo(r,s){return function(a,l){var y=Re(a)?Sg:z0,m=s?s():{};return y(a,r,me(l,2),m)}}function Ai(r){return ke(function(s,a){var l=-1,y=a.length,m=y>1?a[y-1]:t,P=y>2?a[2]:t;for(m=r.length>3&&typeof m=="function"?(y--,m):t,P&&or(a[0],a[1],P)&&(m=y<3?t:m,y=1),s=ht(s);++l<y;){var N=a[l];N&&r(s,N,l,m)}return s})}function ul(r,s){return function(a,l){if(a==null)return a;if(!gr(a))return r(a,l);for(var y=a.length,m=s?y:-1,P=ht(a);(s?m--:++m<y)&&l(P[m],m,P)!==!1;);return a}}function hl(r){return function(s,a,l){for(var y=-1,m=ht(s),P=l(s),N=P.length;N--;){var q=P[r?N:++y];if(a(m[q],q,m)===!1)break}return s}}function by(r,s,a){var l=s&H,y=us(r);function m(){var P=this&&this!==Xe&&this instanceof m?y:r;return P.apply(l?a:this,arguments)}return m}function ll(r){return function(s){s=nt(s);var a=Di(s)?kr(s):t,l=a?a[0]:s.charAt(0),y=a?jn(a,1).join(""):s.slice(1);return l[r]()+y}}function Ti(r){return function(s){return Ha(hf(uf(s).replace(Ji,"")),r,"")}}function us(r){return function(){var s=arguments;switch(s.length){case 0:return new r;case 1:return new r(s[0]);case 2:return new r(s[0],s[1]);case 3:return new r(s[0],s[1],s[2]);case 4:return new r(s[0],s[1],s[2],s[3]);case 5:return new r(s[0],s[1],s[2],s[3],s[4]);case 6:return new r(s[0],s[1],s[2],s[3],s[4],s[5]);case 7:return new r(s[0],s[1],s[2],s[3],s[4],s[5],s[6])}var a=Ci(r.prototype),l=r.apply(a,s);return Dt(l)?l:a}}function wy(r,s,a){var l=us(r);function y(){for(var m=arguments.length,P=k(m),N=m,q=Ri(y);N--;)P[N]=arguments[N];var X=m<3&&P[0]!==q&&P[m-1]!==q?[]:Tn(P,q);if(m-=X.length,m<a)return yl(r,s,Po,y.placeholder,t,P,X,t,t,a-m);var Z=this&&this!==Xe&&this instanceof y?l:r;return Kt(Z,this,P)}return y}function fl(r){return function(s,a,l){var y=ht(s);if(!gr(s)){var m=me(a,3);s=Vt(s),a=function(N){return m(y[N],N,y)}}var P=r(s,a,l);return P>-1?y[m?s[P]:P]:t}}function dl(r){return pn(function(s){var a=s.length,l=a,y=jr.prototype.thru;for(r&&s.reverse();l--;){var m=s[l];if(typeof m!="function")throw new $r(u);if(y&&!P&&Ro(m)=="wrapper")var P=new jr([],!0)}for(l=P?l:a;++l<a;){m=s[l];var N=Ro(m),q=N=="wrapper"?Dc(m):t;q&&Oc(q[0])&&q[1]==(h|M|T|b)&&!q[4].length&&q[9]==1?P=P[Ro(q[0])].apply(P,q[3]):P=m.length==1&&Oc(m)?P[N]():P.thru(m)}return function(){var X=arguments,Z=X[0];if(P&&X.length==1&&Re(Z))return P.plant(Z).value();for(var ie=0,he=a?s[ie].apply(this,X):Z;++ie<a;)he=s[ie].call(this,he);return he}})}function Po(r,s,a,l,y,m,P,N,q,X){var Z=s&h,ie=s&H,he=s&ne,ye=s&(M|C),Ee=s&W,ze=he?t:us(r);function De(){for(var We=arguments.length,Ze=k(We),xr=We;xr--;)Ze[xr]=arguments[xr];if(ye)var ar=Ri(De),Or=Ng(Ze,ar);if(l&&(Ze=al(Ze,l,y,ye)),m&&(Ze=cl(Ze,m,P,ye)),We-=Or,ye&&We<X){var Lt=Tn(Ze,ar);return yl(r,s,Po,De.placeholder,a,Ze,Lt,N,q,X-We)}var Wr=ie?a:this,vn=he?Wr[r]:r;return We=Ze.length,N?Ze=zy(Ze,N):Ee&&We>1&&Ze.reverse(),Z&&q<We&&(Ze.length=q),this&&this!==Xe&&this instanceof De&&(vn=ze||us(vn)),vn.apply(Wr,Ze)}return De}function pl(r,s){return function(a,l){return Y0(a,r,s(l),{})}}function Co(r,s){return function(a,l){var y;if(a===t&&l===t)return s;if(a!==t&&(y=a),l!==t){if(y===t)return l;typeof a=="string"||typeof l=="string"?(a=Sr(a),l=Sr(l)):(a=Zh(a),l=Zh(l)),y=r(a,l)}return y}}function mc(r){return pn(function(s){return s=mt(s,Dr(me())),ke(function(a){var l=this;return r(s,function(y){return Kt(y,l,a)})})})}function Ao(r,s){s=s===t?" ":Sr(s);var a=s.length;if(a<2)return a?fc(s,r):s;var l=fc(s,yo(r/Si(s)));return Di(s)?jn(kr(l),0,r).join(""):l.slice(0,r)}function Ey(r,s,a,l){var y=s&H,m=us(r);function P(){for(var N=-1,q=arguments.length,X=-1,Z=l.length,ie=k(Z+q),he=this&&this!==Xe&&this instanceof P?m:r;++X<Z;)ie[X]=l[X];for(;q--;)ie[X++]=arguments[++N];return Kt(he,y?a:this,ie)}return P}function gl(r){return function(s,a,l){return l&&typeof l!="number"&&or(s,a,l)&&(a=l=t),s=_n(s),a===t?(a=s,s=0):a=_n(a),l=l===t?s<a?1:-1:_n(l),ay(s,a,l,r)}}function To(r){return function(s,a){return typeof s=="string"&&typeof a=="string"||(s=Fr(s),a=Fr(a)),r(s,a)}}function yl(r,s,a,l,y,m,P,N,q,X){var Z=s&M,ie=Z?P:t,he=Z?t:P,ye=Z?m:t,Ee=Z?t:m;s|=Z?T:E,s&=~(Z?E:T),s&L||(s&=~(H|ne));var ze=[r,s,y,ye,ie,Ee,he,N,q,X],De=a.apply(t,ze);return Oc(r)&&Pl(De,ze),De.placeholder=l,Cl(De,r,s)}function bc(r){var s=Ht[r];return function(a,l){if(a=Fr(a),l=l==null?0:Xt(Me(l),292),l&&Ch(a)){var y=(nt(a)+"e").split("e"),m=s(y[0]+"e"+(+y[1]+l));return y=(nt(m)+"e").split("e"),+(y[0]+"e"+(+y[1]-l))}return s(a)}}var Dy=Oi&&1/so(new Oi([,-0]))[1]==Q?function(r){return new Oi(r)}:Bc;function _l(r){return function(s){var a=Zt(s);return a==Ie?Ja(s):a==xe?Fg(s):Rg(s,r(s))}}function dn(r,s,a,l,y,m,P,N){var q=s&ne;if(!q&&typeof r!="function")throw new $r(u);var X=l?l.length:0;if(X||(s&=~(T|E),l=y=t),P=P===t?P:kt(Me(P),0),N=N===t?N:Me(N),X-=y?y.length:0,s&E){var Z=l,ie=y;l=y=t}var he=q?t:Dc(r),ye=[r,s,a,l,y,Z,ie,m,P,N];if(he&&My(ye,he),r=ye[0],s=ye[1],a=ye[2],l=ye[3],y=ye[4],N=ye[9]=ye[9]===t?q?0:r.length:kt(ye[9]-X,0),!N&&s&(M|C)&&(s&=~(M|C)),!s||s==H)var Ee=by(r,s,a);else s==M||s==C?Ee=wy(r,s,N):(s==T||s==(H|T))&&!y.length?Ee=Ey(r,s,a,l):Ee=Po.apply(t,ye);var ze=he?Qh:Pl;return Cl(ze(Ee,ye),r,s)}function vl(r,s,a,l){return r===t||Vr(r,xi[a])&&!it.call(l,a)?s:r}function ml(r,s,a,l,y,m){return Dt(r)&&Dt(s)&&(m.set(s,r),So(r,s,t,ml,m),m.delete(s)),r}function Sy(r){return fs(r)?t:r}function bl(r,s,a,l,y,m){var P=a&O,N=r.length,q=s.length;if(N!=q&&!(P&&q>N))return!1;var X=m.get(r),Z=m.get(s);if(X&&Z)return X==s&&Z==r;var ie=-1,he=!0,ye=a&F?new Qn:t;for(m.set(r,s),m.set(s,r);++ie<N;){var Ee=r[ie],ze=s[ie];if(l)var De=P?l(ze,Ee,ie,s,r,m):l(Ee,ze,ie,r,s,m);if(De!==t){if(De)continue;he=!1;break}if(ye){if(!ka(s,function(We,Ze){if(!Xi(ye,Ze)&&(Ee===We||y(Ee,We,a,l,m)))return ye.push(Ze)})){he=!1;break}}else if(!(Ee===ze||y(Ee,ze,a,l,m))){he=!1;break}}return m.delete(r),m.delete(s),he}function Iy(r,s,a,l,y,m,P){switch(a){case Ce:if(r.byteLength!=s.byteLength||r.byteOffset!=s.byteOffset)return!1;r=r.buffer,s=s.buffer;case Se:return!(r.byteLength!=s.byteLength||!m(new lo(r),new lo(s)));case z:case $:case Be:return Vr(+r,+s);case R:return r.name==s.name&&r.message==s.message;case qe:case Ne:return r==s+"";case Ie:var N=Ja;case xe:var q=l&O;if(N||(N=so),r.size!=s.size&&!q)return!1;var X=P.get(r);if(X)return X==s;l|=F,P.set(r,s);var Z=bl(N(r),N(s),l,y,m,P);return P.delete(r),Z;case Le:if(ns)return ns.call(r)==ns.call(s)}return!1}function xy(r,s,a,l,y,m){var P=a&O,N=wc(r),q=N.length,X=wc(s),Z=X.length;if(q!=Z&&!P)return!1;for(var ie=q;ie--;){var he=N[ie];if(!(P?he in s:it.call(s,he)))return!1}var ye=m.get(r),Ee=m.get(s);if(ye&&Ee)return ye==s&&Ee==r;var ze=!0;m.set(r,s),m.set(s,r);for(var De=P;++ie<q;){he=N[ie];var We=r[he],Ze=s[he];if(l)var xr=P?l(Ze,We,he,s,r,m):l(We,Ze,he,r,s,m);if(!(xr===t?We===Ze||y(We,Ze,a,l,m):xr)){ze=!1;break}De||(De=he=="constructor")}if(ze&&!De){var ar=r.constructor,Or=s.constructor;ar!=Or&&"constructor"in r&&"constructor"in s&&!(typeof ar=="function"&&ar instanceof ar&&typeof Or=="function"&&Or instanceof Or)&&(ze=!1)}return m.delete(r),m.delete(s),ze}function pn(r){return Cc(xl(r,t,$l),r+"")}function wc(r){return Fh(r,Vt,Ic)}function Ec(r){return Fh(r,yr,wl)}var Dc=vo?function(r){return vo.get(r)}:Bc;function Ro(r){for(var s=r.name+"",a=Pi[s],l=it.call(Pi,s)?a.length:0;l--;){var y=a[l],m=y.func;if(m==null||m==r)return y.name}return s}function Ri(r){var s=it.call(v,"placeholder")?v:r;return s.placeholder}function me(){var r=v.iteratee||Fc;return r=r===Fc?Hh:r,arguments.length?r(arguments[0],arguments[1]):r}function No(r,s){var a=r.__data__;return Ly(s)?a[typeof s=="string"?"string":"hash"]:a.map}function Sc(r){for(var s=Vt(r),a=s.length;a--;){var l=s[a],y=r[l];s[a]=[l,y,Sl(y)]}return s}function ei(r,s){var a=Ug(r,s);return Bh(a)?a:t}function Oy(r){var s=it.call(r,Yn),a=r[Yn];try{r[Yn]=t;var l=!0}catch{}var y=uo.call(r);return l&&(s?r[Yn]=a:delete r[Yn]),y}var Ic=Xa?function(r){return r==null?[]:(r=ht(r),Cn(Xa(r),function(s){return Oh.call(r,s)}))}:Hc,wl=Xa?function(r){for(var s=[];r;)An(s,Ic(r)),r=fo(r);return s}:Hc,Zt=sr;(Za&&Zt(new Za(new ArrayBuffer(1)))!=Ce||es&&Zt(new es)!=Ie||ec&&Zt(ec.resolve())!=gt||Oi&&Zt(new Oi)!=xe||ts&&Zt(new ts)!=Pe)&&(Zt=function(r){var s=sr(r),a=s==Ue?r.constructor:t,l=a?ti(a):"";if(l)switch(l){case u0:return Ce;case h0:return Ie;case l0:return gt;case f0:return xe;case d0:return Pe}return s});function Py(r,s,a){for(var l=-1,y=a.length;++l<y;){var m=a[l],P=m.size;switch(m.type){case"drop":r+=P;break;case"dropRight":s-=P;break;case"take":s=Xt(s,r+P);break;case"takeRight":r=kt(r,s-P);break}}return{start:r,end:s}}function Cy(r){var s=r.match(lt);return s?s[1].split(qt):[]}function El(r,s,a){s=$n(s,r);for(var l=-1,y=s.length,m=!1;++l<y;){var P=rn(s[l]);if(!(m=r!=null&&a(r,P)))break;r=r[P]}return m||++l!=y?m:(y=r==null?0:r.length,!!y&&Fo(y)&&gn(P,y)&&(Re(r)||ri(r)))}function Ay(r){var s=r.length,a=new r.constructor(s);return s&&typeof r[0]=="string"&&it.call(r,"index")&&(a.index=r.index,a.input=r.input),a}function Dl(r){return typeof r.constructor=="function"&&!hs(r)?Ci(fo(r)):{}}function Ty(r,s,a){var l=r.constructor;switch(s){case Se:return vc(r);case z:case $:return new l(+r);case Ce:return py(r,a);case He:case Oe:case Ve:case Ge:case et:case tt:case Qe:case rr:case fr:return sl(r,a);case Ie:return new l;case Be:case Ne:return new l(r);case qe:return gy(r);case xe:return new l;case Le:return yy(r)}}function Ry(r,s){var a=s.length;if(!a)return r;var l=a-1;return s[l]=(a>1?"& ":"")+s[l],s=s.join(a>2?", ":" "),r.replace(Ct,`{
/* [wrapped with `+s+`] */
`)}function Ny(r){return Re(r)||ri(r)||!!(Ph&&r&&r[Ph])}function gn(r,s){var a=typeof r;return s=s??K,!!s&&(a=="number"||a!="symbol"&&Pa.test(r))&&r>-1&&r%1==0&&r<s}function or(r,s,a){if(!Dt(a))return!1;var l=typeof s;return(l=="number"?gr(a)&&gn(s,a.length):l=="string"&&s in a)?Vr(a[s],r):!1}function xc(r,s){if(Re(r))return!1;var a=typeof r;return a=="number"||a=="symbol"||a=="boolean"||r==null||Ir(r)?!0:jt.test(r)||!vt.test(r)||s!=null&&r in ht(s)}function Ly(r){var s=typeof r;return s=="string"||s=="number"||s=="symbol"||s=="boolean"?r!=="__proto__":r===null}function Oc(r){var s=Ro(r),a=v[s];if(typeof a!="function"||!(s in Ye.prototype))return!1;if(r===a)return!0;var l=Dc(a);return!!l&&r===l[0]}function $y(r){return!!Sh&&Sh in r}var jy=ao?yn:kc;function hs(r){var s=r&&r.constructor,a=typeof s=="function"&&s.prototype||xi;return r===a}function Sl(r){return r===r&&!Dt(r)}function Il(r,s){return function(a){return a==null?!1:a[r]===s&&(s!==t||r in ht(a))}}function Uy(r){var s=Mo(r,function(l){return a.size===p&&a.clear(),l}),a=s.cache;return s}function My(r,s){var a=r[1],l=s[1],y=a|l,m=y<(H|ne|h),P=l==h&&a==M||l==h&&a==b&&r[7].length<=s[8]||l==(h|b)&&s[7].length<=s[8]&&a==M;if(!(m||P))return r;l&H&&(r[2]=s[2],y|=a&H?0:L);var N=s[3];if(N){var q=r[3];r[3]=q?al(q,N,s[4]):N,r[4]=q?Tn(r[3],_):s[4]}return N=s[5],N&&(q=r[5],r[5]=q?cl(q,N,s[6]):N,r[6]=q?Tn(r[5],_):s[6]),N=s[7],N&&(r[7]=N),l&h&&(r[8]=r[8]==null?s[8]:Xt(r[8],s[8])),r[9]==null&&(r[9]=s[9]),r[0]=s[0],r[1]=y,r}function qy(r){var s=[];if(r!=null)for(var a in ht(r))s.push(a);return s}function Fy(r){return uo.call(r)}function xl(r,s,a){return s=kt(s===t?r.length-1:s,0),function(){for(var l=arguments,y=-1,m=kt(l.length-s,0),P=k(m);++y<m;)P[y]=l[s+y];y=-1;for(var N=k(s+1);++y<s;)N[y]=l[y];return N[s]=a(P),Kt(r,this,N)}}function Ol(r,s){return s.length<2?r:Zn(r,Mr(s,0,-1))}function zy(r,s){for(var a=r.length,l=Xt(s.length,a),y=pr(r);l--;){var m=s[l];r[l]=gn(m,a)?y[m]:t}return r}function Pc(r,s){if(!(s==="constructor"&&typeof r[s]=="function")&&s!="__proto__")return r[s]}var Pl=Al(Qh),ls=r0||function(r,s){return Xe.setTimeout(r,s)},Cc=Al(hy);function Cl(r,s,a){var l=s+"";return Cc(r,Ry(l,By(Cy(l),a)))}function Al(r){var s=0,a=0;return function(){var l=o0(),y=de-(l-a);if(a=l,y>0){if(++s>=ue)return arguments[0]}else s=0;return r.apply(t,arguments)}}function Lo(r,s){var a=-1,l=r.length,y=l-1;for(s=s===t?l:s;++a<s;){var m=lc(a,y),P=r[m];r[m]=r[a],r[a]=P}return r.length=s,r}var Tl=Uy(function(r){var s=[];return r.charCodeAt(0)===46&&s.push(""),r.replace(Ut,function(a,l,y,m){s.push(y?m.replace(Ea,"$1"):l||a)}),s});function rn(r){if(typeof r=="string"||Ir(r))return r;var s=r+"";return s=="0"&&1/r==-Q?"-0":s}function ti(r){if(r!=null){try{return co.call(r)}catch{}try{return r+""}catch{}}return""}function By(r,s){return Lr(we,function(a){var l="_."+a[0];s&a[1]&&!no(r,l)&&r.push(l)}),r.sort()}function Rl(r){if(r instanceof Ye)return r.clone();var s=new jr(r.__wrapped__,r.__chain__);return s.__actions__=pr(r.__actions__),s.__index__=r.__index__,s.__values__=r.__values__,s}function Hy(r,s,a){(a?or(r,s,a):s===t)?s=1:s=kt(Me(s),0);var l=r==null?0:r.length;if(!l||s<1)return[];for(var y=0,m=0,P=k(yo(l/s));y<l;)P[m++]=Mr(r,y,y+=s);return P}function ky(r){for(var s=-1,a=r==null?0:r.length,l=0,y=[];++s<a;){var m=r[s];m&&(y[l++]=m)}return y}function Ky(){var r=arguments.length;if(!r)return[];for(var s=k(r-1),a=arguments[0],l=r;l--;)s[l-1]=arguments[l];return An(Re(a)?pr(a):[a],Yt(s,1))}var Vy=ke(function(r,s){return Nt(r)?ss(r,Yt(s,1,Nt,!0)):[]}),Wy=ke(function(r,s){var a=qr(s);return Nt(a)&&(a=t),Nt(r)?ss(r,Yt(s,1,Nt,!0),me(a,2)):[]}),Gy=ke(function(r,s){var a=qr(s);return Nt(a)&&(a=t),Nt(r)?ss(r,Yt(s,1,Nt,!0),t,a):[]});function Yy(r,s,a){var l=r==null?0:r.length;return l?(s=a||s===t?1:Me(s),Mr(r,s<0?0:s,l)):[]}function Jy(r,s,a){var l=r==null?0:r.length;return l?(s=a||s===t?1:Me(s),s=l-s,Mr(r,0,s<0?0:s)):[]}function Qy(r,s){return r&&r.length?xo(r,me(s,3),!0,!0):[]}function Xy(r,s){return r&&r.length?xo(r,me(s,3),!0):[]}function Zy(r,s,a,l){var y=r==null?0:r.length;return y?(a&&typeof a!="number"&&or(r,s,a)&&(a=0,l=y),K0(r,s,a,l)):[]}function Nl(r,s,a){var l=r==null?0:r.length;if(!l)return-1;var y=a==null?0:Me(a);return y<0&&(y=kt(l+y,0)),io(r,me(s,3),y)}function Ll(r,s,a){var l=r==null?0:r.length;if(!l)return-1;var y=l-1;return a!==t&&(y=Me(a),y=a<0?kt(l+y,0):Xt(y,l-1)),io(r,me(s,3),y,!0)}function $l(r){var s=r==null?0:r.length;return s?Yt(r,1):[]}function e_(r){var s=r==null?0:r.length;return s?Yt(r,Q):[]}function t_(r,s){var a=r==null?0:r.length;return a?(s=s===t?1:Me(s),Yt(r,s)):[]}function r_(r){for(var s=-1,a=r==null?0:r.length,l={};++s<a;){var y=r[s];l[y[0]]=y[1]}return l}function jl(r){return r&&r.length?r[0]:t}function n_(r,s,a){var l=r==null?0:r.length;if(!l)return-1;var y=a==null?0:Me(a);return y<0&&(y=kt(l+y,0)),Ei(r,s,y)}function i_(r){var s=r==null?0:r.length;return s?Mr(r,0,-1):[]}var s_=ke(function(r){var s=mt(r,yc);return s.length&&s[0]===r[0]?oc(s):[]}),o_=ke(function(r){var s=qr(r),a=mt(r,yc);return s===qr(a)?s=t:a.pop(),a.length&&a[0]===r[0]?oc(a,me(s,2)):[]}),a_=ke(function(r){var s=qr(r),a=mt(r,yc);return s=typeof s=="function"?s:t,s&&a.pop(),a.length&&a[0]===r[0]?oc(a,t,s):[]});function c_(r,s){return r==null?"":i0.call(r,s)}function qr(r){var s=r==null?0:r.length;return s?r[s-1]:t}function u_(r,s,a){var l=r==null?0:r.length;if(!l)return-1;var y=l;return a!==t&&(y=Me(a),y=y<0?kt(l+y,0):Xt(y,l-1)),s===s?Bg(r,s,y):io(r,yh,y,!0)}function h_(r,s){return r&&r.length?Wh(r,Me(s)):t}var l_=ke(Ul);function Ul(r,s){return r&&r.length&&s&&s.length?hc(r,s):r}function f_(r,s,a){return r&&r.length&&s&&s.length?hc(r,s,me(a,2)):r}function d_(r,s,a){return r&&r.length&&s&&s.length?hc(r,s,t,a):r}var p_=pn(function(r,s){var a=r==null?0:r.length,l=rc(r,s);return Jh(r,mt(s,function(y){return gn(y,a)?+y:y}).sort(ol)),l});function g_(r,s){var a=[];if(!(r&&r.length))return a;var l=-1,y=[],m=r.length;for(s=me(s,3);++l<m;){var P=r[l];s(P,l,r)&&(a.push(P),y.push(l))}return Jh(r,y),a}function Ac(r){return r==null?r:c0.call(r)}function y_(r,s,a){var l=r==null?0:r.length;return l?(a&&typeof a!="number"&&or(r,s,a)?(s=0,a=l):(s=s==null?0:Me(s),a=a===t?l:Me(a)),Mr(r,s,a)):[]}function __(r,s){return Io(r,s)}function v_(r,s,a){return dc(r,s,me(a,2))}function m_(r,s){var a=r==null?0:r.length;if(a){var l=Io(r,s);if(l<a&&Vr(r[l],s))return l}return-1}function b_(r,s){return Io(r,s,!0)}function w_(r,s,a){return dc(r,s,me(a,2),!0)}function E_(r,s){var a=r==null?0:r.length;if(a){var l=Io(r,s,!0)-1;if(Vr(r[l],s))return l}return-1}function D_(r){return r&&r.length?Xh(r):[]}function S_(r,s){return r&&r.length?Xh(r,me(s,2)):[]}function I_(r){var s=r==null?0:r.length;return s?Mr(r,1,s):[]}function x_(r,s,a){return r&&r.length?(s=a||s===t?1:Me(s),Mr(r,0,s<0?0:s)):[]}function O_(r,s,a){var l=r==null?0:r.length;return l?(s=a||s===t?1:Me(s),s=l-s,Mr(r,s<0?0:s,l)):[]}function P_(r,s){return r&&r.length?xo(r,me(s,3),!1,!0):[]}function C_(r,s){return r&&r.length?xo(r,me(s,3)):[]}var A_=ke(function(r){return Ln(Yt(r,1,Nt,!0))}),T_=ke(function(r){var s=qr(r);return Nt(s)&&(s=t),Ln(Yt(r,1,Nt,!0),me(s,2))}),R_=ke(function(r){var s=qr(r);return s=typeof s=="function"?s:t,Ln(Yt(r,1,Nt,!0),t,s)});function N_(r){return r&&r.length?Ln(r):[]}function L_(r,s){return r&&r.length?Ln(r,me(s,2)):[]}function $_(r,s){return s=typeof s=="function"?s:t,r&&r.length?Ln(r,t,s):[]}function Tc(r){if(!(r&&r.length))return[];var s=0;return r=Cn(r,function(a){if(Nt(a))return s=kt(a.length,s),!0}),Ga(s,function(a){return mt(r,Ka(a))})}function Ml(r,s){if(!(r&&r.length))return[];var a=Tc(r);return s==null?a:mt(a,function(l){return Kt(s,t,l)})}var j_=ke(function(r,s){return Nt(r)?ss(r,s):[]}),U_=ke(function(r){return gc(Cn(r,Nt))}),M_=ke(function(r){var s=qr(r);return Nt(s)&&(s=t),gc(Cn(r,Nt),me(s,2))}),q_=ke(function(r){var s=qr(r);return s=typeof s=="function"?s:t,gc(Cn(r,Nt),t,s)}),F_=ke(Tc);function z_(r,s){return rl(r||[],s||[],is)}function B_(r,s){return rl(r||[],s||[],cs)}var H_=ke(function(r){var s=r.length,a=s>1?r[s-1]:t;return a=typeof a=="function"?(r.pop(),a):t,Ml(r,a)});function ql(r){var s=v(r);return s.__chain__=!0,s}function k_(r,s){return s(r),r}function $o(r,s){return s(r)}var K_=pn(function(r){var s=r.length,a=s?r[0]:0,l=this.__wrapped__,y=function(m){return rc(m,r)};return s>1||this.__actions__.length||!(l instanceof Ye)||!gn(a)?this.thru(y):(l=l.slice(a,+a+(s?1:0)),l.__actions__.push({func:$o,args:[y],thisArg:t}),new jr(l,this.__chain__).thru(function(m){return s&&!m.length&&m.push(t),m}))});function V_(){return ql(this)}function W_(){return new jr(this.value(),this.__chain__)}function G_(){this.__values__===t&&(this.__values__=Zl(this.value()));var r=this.__index__>=this.__values__.length,s=r?t:this.__values__[this.__index__++];return{done:r,value:s}}function Y_(){return this}function J_(r){for(var s,a=this;a instanceof bo;){var l=Rl(a);l.__index__=0,l.__values__=t,s?y.__wrapped__=l:s=l;var y=l;a=a.__wrapped__}return y.__wrapped__=r,s}function Q_(){var r=this.__wrapped__;if(r instanceof Ye){var s=r;return this.__actions__.length&&(s=new Ye(this)),s=s.reverse(),s.__actions__.push({func:$o,args:[Ac],thisArg:t}),new jr(s,this.__chain__)}return this.thru(Ac)}function X_(){return tl(this.__wrapped__,this.__actions__)}var Z_=Oo(function(r,s,a){it.call(r,a)?++r[a]:fn(r,a,1)});function ev(r,s,a){var l=Re(r)?ph:k0;return a&&or(r,s,a)&&(s=t),l(r,me(s,3))}function tv(r,s){var a=Re(r)?Cn:Mh;return a(r,me(s,3))}var rv=fl(Nl),nv=fl(Ll);function iv(r,s){return Yt(jo(r,s),1)}function sv(r,s){return Yt(jo(r,s),Q)}function ov(r,s,a){return a=a===t?1:Me(a),Yt(jo(r,s),a)}function Fl(r,s){var a=Re(r)?Lr:Nn;return a(r,me(s,3))}function zl(r,s){var a=Re(r)?Ig:Uh;return a(r,me(s,3))}var av=Oo(function(r,s,a){it.call(r,a)?r[a].push(s):fn(r,a,[s])});function cv(r,s,a,l){r=gr(r)?r:Li(r),a=a&&!l?Me(a):0;var y=r.length;return a<0&&(a=kt(y+a,0)),zo(r)?a<=y&&r.indexOf(s,a)>-1:!!y&&Ei(r,s,a)>-1}var uv=ke(function(r,s,a){var l=-1,y=typeof s=="function",m=gr(r)?k(r.length):[];return Nn(r,function(P){m[++l]=y?Kt(s,P,a):os(P,s,a)}),m}),hv=Oo(function(r,s,a){fn(r,a,s)});function jo(r,s){var a=Re(r)?mt:kh;return a(r,me(s,3))}function lv(r,s,a,l){return r==null?[]:(Re(s)||(s=s==null?[]:[s]),a=l?t:a,Re(a)||(a=a==null?[]:[a]),Gh(r,s,a))}var fv=Oo(function(r,s,a){r[a?0:1].push(s)},function(){return[[],[]]});function dv(r,s,a){var l=Re(r)?Ha:vh,y=arguments.length<3;return l(r,me(s,4),a,y,Nn)}function pv(r,s,a){var l=Re(r)?xg:vh,y=arguments.length<3;return l(r,me(s,4),a,y,Uh)}function gv(r,s){var a=Re(r)?Cn:Mh;return a(r,qo(me(s,3)))}function yv(r){var s=Re(r)?Nh:cy;return s(r)}function _v(r,s,a){(a?or(r,s,a):s===t)?s=1:s=Me(s);var l=Re(r)?q0:uy;return l(r,s)}function vv(r){var s=Re(r)?F0:ly;return s(r)}function mv(r){if(r==null)return 0;if(gr(r))return zo(r)?Si(r):r.length;var s=Zt(r);return s==Ie||s==xe?r.size:cc(r).length}function bv(r,s,a){var l=Re(r)?ka:fy;return a&&or(r,s,a)&&(s=t),l(r,me(s,3))}var wv=ke(function(r,s){if(r==null)return[];var a=s.length;return a>1&&or(r,s[0],s[1])?s=[]:a>2&&or(s[0],s[1],s[2])&&(s=[s[0]]),Gh(r,Yt(s,1),[])}),Uo=t0||function(){return Xe.Date.now()};function Ev(r,s){if(typeof s!="function")throw new $r(u);return r=Me(r),function(){if(--r<1)return s.apply(this,arguments)}}function Bl(r,s,a){return s=a?t:s,s=r&&s==null?r.length:s,dn(r,h,t,t,t,t,s)}function Hl(r,s){var a;if(typeof s!="function")throw new $r(u);return r=Me(r),function(){return--r>0&&(a=s.apply(this,arguments)),r<=1&&(s=t),a}}var Rc=ke(function(r,s,a){var l=H;if(a.length){var y=Tn(a,Ri(Rc));l|=T}return dn(r,l,s,a,y)}),kl=ke(function(r,s,a){var l=H|ne;if(a.length){var y=Tn(a,Ri(kl));l|=T}return dn(s,l,r,a,y)});function Kl(r,s,a){s=a?t:s;var l=dn(r,M,t,t,t,t,t,s);return l.placeholder=Kl.placeholder,l}function Vl(r,s,a){s=a?t:s;var l=dn(r,C,t,t,t,t,t,s);return l.placeholder=Vl.placeholder,l}function Wl(r,s,a){var l,y,m,P,N,q,X=0,Z=!1,ie=!1,he=!0;if(typeof r!="function")throw new $r(u);s=Fr(s)||0,Dt(a)&&(Z=!!a.leading,ie="maxWait"in a,m=ie?kt(Fr(a.maxWait)||0,s):m,he="trailing"in a?!!a.trailing:he);function ye(Lt){var Wr=l,vn=y;return l=y=t,X=Lt,P=r.apply(vn,Wr),P}function Ee(Lt){return X=Lt,N=ls(We,s),Z?ye(Lt):P}function ze(Lt){var Wr=Lt-q,vn=Lt-X,df=s-Wr;return ie?Xt(df,m-vn):df}function De(Lt){var Wr=Lt-q,vn=Lt-X;return q===t||Wr>=s||Wr<0||ie&&vn>=m}function We(){var Lt=Uo();if(De(Lt))return Ze(Lt);N=ls(We,ze(Lt))}function Ze(Lt){return N=t,he&&l?ye(Lt):(l=y=t,P)}function xr(){N!==t&&nl(N),X=0,l=q=y=N=t}function ar(){return N===t?P:Ze(Uo())}function Or(){var Lt=Uo(),Wr=De(Lt);if(l=arguments,y=this,q=Lt,Wr){if(N===t)return Ee(q);if(ie)return nl(N),N=ls(We,s),ye(q)}return N===t&&(N=ls(We,s)),P}return Or.cancel=xr,Or.flush=ar,Or}var Dv=ke(function(r,s){return jh(r,1,s)}),Sv=ke(function(r,s,a){return jh(r,Fr(s)||0,a)});function Iv(r){return dn(r,W)}function Mo(r,s){if(typeof r!="function"||s!=null&&typeof s!="function")throw new $r(u);var a=function(){var l=arguments,y=s?s.apply(this,l):l[0],m=a.cache;if(m.has(y))return m.get(y);var P=r.apply(this,l);return a.cache=m.set(y,P)||m,P};return a.cache=new(Mo.Cache||ln),a}Mo.Cache=ln;function qo(r){if(typeof r!="function")throw new $r(u);return function(){var s=arguments;switch(s.length){case 0:return!r.call(this);case 1:return!r.call(this,s[0]);case 2:return!r.call(this,s[0],s[1]);case 3:return!r.call(this,s[0],s[1],s[2])}return!r.apply(this,s)}}function xv(r){return Hl(2,r)}var Ov=dy(function(r,s){s=s.length==1&&Re(s[0])?mt(s[0],Dr(me())):mt(Yt(s,1),Dr(me()));var a=s.length;return ke(function(l){for(var y=-1,m=Xt(l.length,a);++y<m;)l[y]=s[y].call(this,l[y]);return Kt(r,this,l)})}),Nc=ke(function(r,s){var a=Tn(s,Ri(Nc));return dn(r,T,t,s,a)}),Gl=ke(function(r,s){var a=Tn(s,Ri(Gl));return dn(r,E,t,s,a)}),Pv=pn(function(r,s){return dn(r,b,t,t,t,s)});function Cv(r,s){if(typeof r!="function")throw new $r(u);return s=s===t?s:Me(s),ke(r,s)}function Av(r,s){if(typeof r!="function")throw new $r(u);return s=s==null?0:kt(Me(s),0),ke(function(a){var l=a[s],y=jn(a,0,s);return l&&An(y,l),Kt(r,this,y)})}function Tv(r,s,a){var l=!0,y=!0;if(typeof r!="function")throw new $r(u);return Dt(a)&&(l="leading"in a?!!a.leading:l,y="trailing"in a?!!a.trailing:y),Wl(r,s,{leading:l,maxWait:s,trailing:y})}function Rv(r){return Bl(r,1)}function Nv(r,s){return Nc(_c(s),r)}function Lv(){if(!arguments.length)return[];var r=arguments[0];return Re(r)?r:[r]}function $v(r){return Ur(r,x)}function jv(r,s){return s=typeof s=="function"?s:t,Ur(r,x,s)}function Uv(r){return Ur(r,D|x)}function Mv(r,s){return s=typeof s=="function"?s:t,Ur(r,D|x,s)}function qv(r,s){return s==null||$h(r,s,Vt(s))}function Vr(r,s){return r===s||r!==r&&s!==s}var Fv=To(sc),zv=To(function(r,s){return r>=s}),ri=zh(function(){return arguments}())?zh:function(r){return At(r)&&it.call(r,"callee")&&!Oh.call(r,"callee")},Re=k.isArray,Bv=ir?Dr(ir):J0;function gr(r){return r!=null&&Fo(r.length)&&!yn(r)}function Nt(r){return At(r)&&gr(r)}function Hv(r){return r===!0||r===!1||At(r)&&sr(r)==z}var Un=n0||kc,kv=Hr?Dr(Hr):Q0;function Kv(r){return At(r)&&r.nodeType===1&&!fs(r)}function Vv(r){if(r==null)return!0;if(gr(r)&&(Re(r)||typeof r=="string"||typeof r.splice=="function"||Un(r)||Ni(r)||ri(r)))return!r.length;var s=Zt(r);if(s==Ie||s==xe)return!r.size;if(hs(r))return!cc(r).length;for(var a in r)if(it.call(r,a))return!1;return!0}function Wv(r,s){return as(r,s)}function Gv(r,s,a){a=typeof a=="function"?a:t;var l=a?a(r,s):t;return l===t?as(r,s,t,a):!!l}function Lc(r){if(!At(r))return!1;var s=sr(r);return s==R||s==d||typeof r.message=="string"&&typeof r.name=="string"&&!fs(r)}function Yv(r){return typeof r=="number"&&Ch(r)}function yn(r){if(!Dt(r))return!1;var s=sr(r);return s==ae||s==fe||s==B||s==yt}function Yl(r){return typeof r=="number"&&r==Me(r)}function Fo(r){return typeof r=="number"&&r>-1&&r%1==0&&r<=K}function Dt(r){var s=typeof r;return r!=null&&(s=="object"||s=="function")}function At(r){return r!=null&&typeof r=="object"}var Jl=Nr?Dr(Nr):Z0;function Jv(r,s){return r===s||ac(r,s,Sc(s))}function Qv(r,s,a){return a=typeof a=="function"?a:t,ac(r,s,Sc(s),a)}function Xv(r){return Ql(r)&&r!=+r}function Zv(r){if(jy(r))throw new Ae(c);return Bh(r)}function em(r){return r===null}function tm(r){return r==null}function Ql(r){return typeof r=="number"||At(r)&&sr(r)==Be}function fs(r){if(!At(r)||sr(r)!=Ue)return!1;var s=fo(r);if(s===null)return!0;var a=it.call(s,"constructor")&&s.constructor;return typeof a=="function"&&a instanceof a&&co.call(a)==Qg}var $c=Zr?Dr(Zr):ey;function rm(r){return Yl(r)&&r>=-K&&r<=K}var Xl=Qi?Dr(Qi):ty;function zo(r){return typeof r=="string"||!Re(r)&&At(r)&&sr(r)==Ne}function Ir(r){return typeof r=="symbol"||At(r)&&sr(r)==Le}var Ni=Gn?Dr(Gn):ry;function nm(r){return r===t}function im(r){return At(r)&&Zt(r)==Pe}function sm(r){return At(r)&&sr(r)==$e}var om=To(uc),am=To(function(r,s){return r<=s});function Zl(r){if(!r)return[];if(gr(r))return zo(r)?kr(r):pr(r);if(Zi&&r[Zi])return qg(r[Zi]());var s=Zt(r),a=s==Ie?Ja:s==xe?so:Li;return a(r)}function _n(r){if(!r)return r===0?r:0;if(r=Fr(r),r===Q||r===-Q){var s=r<0?-1:1;return s*V}return r===r?r:0}function Me(r){var s=_n(r),a=s%1;return s===s?a?s-a:s:0}function ef(r){return r?Xn(Me(r),0,re):0}function Fr(r){if(typeof r=="number")return r;if(Ir(r))return J;if(Dt(r)){var s=typeof r.valueOf=="function"?r.valueOf():r;r=Dt(s)?s+"":s}if(typeof r!="string")return r===0?r:+r;r=mh(r);var a=Ia.test(r);return a||Oa.test(r)?Te(r.slice(2),a?2:8):Sa.test(r)?J:+r}function tf(r){return tn(r,yr(r))}function cm(r){return r?Xn(Me(r),-K,K):r===0?r:0}function nt(r){return r==null?"":Sr(r)}var um=Ai(function(r,s){if(hs(s)||gr(s)){tn(s,Vt(s),r);return}for(var a in s)it.call(s,a)&&is(r,a,s[a])}),rf=Ai(function(r,s){tn(s,yr(s),r)}),Bo=Ai(function(r,s,a,l){tn(s,yr(s),r,l)}),hm=Ai(function(r,s,a,l){tn(s,Vt(s),r,l)}),lm=pn(rc);function fm(r,s){var a=Ci(r);return s==null?a:Lh(a,s)}var dm=ke(function(r,s){r=ht(r);var a=-1,l=s.length,y=l>2?s[2]:t;for(y&&or(s[0],s[1],y)&&(l=1);++a<l;)for(var m=s[a],P=yr(m),N=-1,q=P.length;++N<q;){var X=P[N],Z=r[X];(Z===t||Vr(Z,xi[X])&&!it.call(r,X))&&(r[X]=m[X])}return r}),pm=ke(function(r){return r.push(t,ml),Kt(nf,t,r)});function gm(r,s){return gh(r,me(s,3),en)}function ym(r,s){return gh(r,me(s,3),ic)}function _m(r,s){return r==null?r:nc(r,me(s,3),yr)}function vm(r,s){return r==null?r:qh(r,me(s,3),yr)}function mm(r,s){return r&&en(r,me(s,3))}function bm(r,s){return r&&ic(r,me(s,3))}function wm(r){return r==null?[]:Do(r,Vt(r))}function Em(r){return r==null?[]:Do(r,yr(r))}function jc(r,s,a){var l=r==null?t:Zn(r,s);return l===t?a:l}function Dm(r,s){return r!=null&&El(r,s,V0)}function Uc(r,s){return r!=null&&El(r,s,W0)}var Sm=pl(function(r,s,a){s!=null&&typeof s.toString!="function"&&(s=uo.call(s)),r[s]=a},qc(_r)),Im=pl(function(r,s,a){s!=null&&typeof s.toString!="function"&&(s=uo.call(s)),it.call(r,s)?r[s].push(a):r[s]=[a]},me),xm=ke(os);function Vt(r){return gr(r)?Rh(r):cc(r)}function yr(r){return gr(r)?Rh(r,!0):ny(r)}function Om(r,s){var a={};return s=me(s,3),en(r,function(l,y,m){fn(a,s(l,y,m),l)}),a}function Pm(r,s){var a={};return s=me(s,3),en(r,function(l,y,m){fn(a,y,s(l,y,m))}),a}var Cm=Ai(function(r,s,a){So(r,s,a)}),nf=Ai(function(r,s,a,l){So(r,s,a,l)}),Am=pn(function(r,s){var a={};if(r==null)return a;var l=!1;s=mt(s,function(m){return m=$n(m,r),l||(l=m.length>1),m}),tn(r,Ec(r),a),l&&(a=Ur(a,D|S|x,Sy));for(var y=s.length;y--;)pc(a,s[y]);return a});function Tm(r,s){return sf(r,qo(me(s)))}var Rm=pn(function(r,s){return r==null?{}:sy(r,s)});function sf(r,s){if(r==null)return{};var a=mt(Ec(r),function(l){return[l]});return s=me(s),Yh(r,a,function(l,y){return s(l,y[0])})}function Nm(r,s,a){s=$n(s,r);var l=-1,y=s.length;for(y||(y=1,r=t);++l<y;){var m=r==null?t:r[rn(s[l])];m===t&&(l=y,m=a),r=yn(m)?m.call(r):m}return r}function Lm(r,s,a){return r==null?r:cs(r,s,a)}function $m(r,s,a,l){return l=typeof l=="function"?l:t,r==null?r:cs(r,s,a,l)}var of=_l(Vt),af=_l(yr);function jm(r,s,a){var l=Re(r),y=l||Un(r)||Ni(r);if(s=me(s,4),a==null){var m=r&&r.constructor;y?a=l?new m:[]:Dt(r)?a=yn(m)?Ci(fo(r)):{}:a={}}return(y?Lr:en)(r,function(P,N,q){return s(a,P,N,q)}),a}function Um(r,s){return r==null?!0:pc(r,s)}function Mm(r,s,a){return r==null?r:el(r,s,_c(a))}function qm(r,s,a,l){return l=typeof l=="function"?l:t,r==null?r:el(r,s,_c(a),l)}function Li(r){return r==null?[]:Ya(r,Vt(r))}function Fm(r){return r==null?[]:Ya(r,yr(r))}function zm(r,s,a){return a===t&&(a=s,s=t),a!==t&&(a=Fr(a),a=a===a?a:0),s!==t&&(s=Fr(s),s=s===s?s:0),Xn(Fr(r),s,a)}function Bm(r,s,a){return s=_n(s),a===t?(a=s,s=0):a=_n(a),r=Fr(r),G0(r,s,a)}function Hm(r,s,a){if(a&&typeof a!="boolean"&&or(r,s,a)&&(s=a=t),a===t&&(typeof s=="boolean"?(a=s,s=t):typeof r=="boolean"&&(a=r,r=t)),r===t&&s===t?(r=0,s=1):(r=_n(r),s===t?(s=r,r=0):s=_n(s)),r>s){var l=r;r=s,s=l}if(a||r%1||s%1){var y=Ah();return Xt(r+y*(s-r+ct("1e-"+((y+"").length-1))),s)}return lc(r,s)}var km=Ti(function(r,s,a){return s=s.toLowerCase(),r+(a?cf(s):s)});function cf(r){return Mc(nt(r).toLowerCase())}function uf(r){return r=nt(r),r&&r.replace(cn,Lg).replace(Fa,"")}function Km(r,s,a){r=nt(r),s=Sr(s);var l=r.length;a=a===t?l:Xn(Me(a),0,l);var y=a;return a-=s.length,a>=0&&r.slice(a,y)==s}function Vm(r){return r=nt(r),r&&_t.test(r)?r.replace(Hn,$g):r}function Wm(r){return r=nt(r),r&&Mt.test(r)?r.replace(Ot,"\\$&"):r}var Gm=Ti(function(r,s,a){return r+(a?"-":"")+s.toLowerCase()}),Ym=Ti(function(r,s,a){return r+(a?" ":"")+s.toLowerCase()}),Jm=ll("toLowerCase");function Qm(r,s,a){r=nt(r),s=Me(s);var l=s?Si(r):0;if(!s||l>=s)return r;var y=(s-l)/2;return Ao(_o(y),a)+r+Ao(yo(y),a)}function Xm(r,s,a){r=nt(r),s=Me(s);var l=s?Si(r):0;return s&&l<s?r+Ao(s-l,a):r}function Zm(r,s,a){r=nt(r),s=Me(s);var l=s?Si(r):0;return s&&l<s?Ao(s-l,a)+r:r}function e1(r,s,a){return a||s==null?s=0:s&&(s=+s),a0(nt(r).replace(Pt,""),s||0)}function t1(r,s,a){return(a?or(r,s,a):s===t)?s=1:s=Me(s),fc(nt(r),s)}function r1(){var r=arguments,s=nt(r[0]);return r.length<3?s:s.replace(r[1],r[2])}var n1=Ti(function(r,s,a){return r+(a?"_":"")+s.toLowerCase()});function i1(r,s,a){return a&&typeof a!="number"&&or(r,s,a)&&(s=a=t),a=a===t?re:a>>>0,a?(r=nt(r),r&&(typeof s=="string"||s!=null&&!$c(s))&&(s=Sr(s),!s&&Di(r))?jn(kr(r),0,a):r.split(s,a)):[]}var s1=Ti(function(r,s,a){return r+(a?" ":"")+Mc(s)});function o1(r,s,a){return r=nt(r),a=a==null?0:Xn(Me(a),0,r.length),s=Sr(s),r.slice(a,a+s.length)==s}function a1(r,s,a){var l=v.templateSettings;a&&or(r,s,a)&&(s=t),r=nt(r),s=Bo({},s,l,vl);var y=Bo({},s.imports,l.imports,vl),m=Vt(y),P=Ya(y,m),N,q,X=0,Z=s.interpolate||gi,ie="__p += '",he=Qa((s.escape||gi).source+"|"+Z.source+"|"+(Z===Et?Da:gi).source+"|"+(s.evaluate||gi).source+"|$","g"),ye="//# sourceURL="+(it.call(s,"sourceURL")?(s.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++za+"]")+`
`;r.replace(he,function(De,We,Ze,xr,ar,Or){return Ze||(Ze=xr),ie+=r.slice(X,Or).replace(Ca,jg),We&&(N=!0,ie+=`' +
__e(`+We+`) +
'`),ar&&(q=!0,ie+=`';
`+ar+`;
__p += '`),Ze&&(ie+=`' +
((__t = (`+Ze+`)) == null ? '' : __t) +
'`),X=Or+De.length,De}),ie+=`';
`;var Ee=it.call(s,"variable")&&s.variable;if(!Ee)ie=`with (obj) {
`+ie+`
}
`;else if(wa.test(Ee))throw new Ae(f);ie=(q?ie.replace(Qr,""):ie).replace(nr,"$1").replace(an,"$1;"),ie="function("+(Ee||"obj")+`) {
`+(Ee?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(N?", __e = _.escape":"")+(q?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+ie+`return __p
}`;var ze=lf(function(){return rt(m,ye+"return "+ie).apply(t,P)});if(ze.source=ie,Lc(ze))throw ze;return ze}function c1(r){return nt(r).toLowerCase()}function u1(r){return nt(r).toUpperCase()}function h1(r,s,a){if(r=nt(r),r&&(a||s===t))return mh(r);if(!r||!(s=Sr(s)))return r;var l=kr(r),y=kr(s),m=bh(l,y),P=wh(l,y)+1;return jn(l,m,P).join("")}function l1(r,s,a){if(r=nt(r),r&&(a||s===t))return r.slice(0,Dh(r)+1);if(!r||!(s=Sr(s)))return r;var l=kr(r),y=wh(l,kr(s))+1;return jn(l,0,y).join("")}function f1(r,s,a){if(r=nt(r),r&&(a||s===t))return r.replace(Pt,"");if(!r||!(s=Sr(s)))return r;var l=kr(r),y=bh(l,kr(s));return jn(l,y).join("")}function d1(r,s){var a=G,l=se;if(Dt(s)){var y="separator"in s?s.separator:y;a="length"in s?Me(s.length):a,l="omission"in s?Sr(s.omission):l}r=nt(r);var m=r.length;if(Di(r)){var P=kr(r);m=P.length}if(a>=m)return r;var N=a-Si(l);if(N<1)return l;var q=P?jn(P,0,N).join(""):r.slice(0,N);if(y===t)return q+l;if(P&&(N+=q.length-N),$c(y)){if(r.slice(N).search(y)){var X,Z=q;for(y.global||(y=Qa(y.source,nt(Rr.exec(y))+"g")),y.lastIndex=0;X=y.exec(Z);)var ie=X.index;q=q.slice(0,ie===t?N:ie)}}else if(r.indexOf(Sr(y),N)!=N){var he=q.lastIndexOf(y);he>-1&&(q=q.slice(0,he))}return q+l}function p1(r){return r=nt(r),r&&St.test(r)?r.replace(On,Hg):r}var g1=Ti(function(r,s,a){return r+(a?" ":"")+s.toUpperCase()}),Mc=ll("toUpperCase");function hf(r,s,a){return r=nt(r),s=a?t:s,s===t?Mg(r)?Vg(r):Cg(r):r.match(s)||[]}var lf=ke(function(r,s){try{return Kt(r,t,s)}catch(a){return Lc(a)?a:new Ae(a)}}),y1=pn(function(r,s){return Lr(s,function(a){a=rn(a),fn(r,a,Rc(r[a],r))}),r});function _1(r){var s=r==null?0:r.length,a=me();return r=s?mt(r,function(l){if(typeof l[1]!="function")throw new $r(u);return[a(l[0]),l[1]]}):[],ke(function(l){for(var y=-1;++y<s;){var m=r[y];if(Kt(m[0],this,l))return Kt(m[1],this,l)}})}function v1(r){return H0(Ur(r,D))}function qc(r){return function(){return r}}function m1(r,s){return r==null||r!==r?s:r}var b1=dl(),w1=dl(!0);function _r(r){return r}function Fc(r){return Hh(typeof r=="function"?r:Ur(r,D))}function E1(r){return Kh(Ur(r,D))}function D1(r,s){return Vh(r,Ur(s,D))}var S1=ke(function(r,s){return function(a){return os(a,r,s)}}),I1=ke(function(r,s){return function(a){return os(r,a,s)}});function zc(r,s,a){var l=Vt(s),y=Do(s,l);a==null&&!(Dt(s)&&(y.length||!l.length))&&(a=s,s=r,r=this,y=Do(s,Vt(s)));var m=!(Dt(a)&&"chain"in a)||!!a.chain,P=yn(r);return Lr(y,function(N){var q=s[N];r[N]=q,P&&(r.prototype[N]=function(){var X=this.__chain__;if(m||X){var Z=r(this.__wrapped__),ie=Z.__actions__=pr(this.__actions__);return ie.push({func:q,args:arguments,thisArg:r}),Z.__chain__=X,Z}return q.apply(r,An([this.value()],arguments))})}),r}function x1(){return Xe._===this&&(Xe._=Xg),this}function Bc(){}function O1(r){return r=Me(r),ke(function(s){return Wh(s,r)})}var P1=mc(mt),C1=mc(ph),A1=mc(ka);function ff(r){return xc(r)?Ka(rn(r)):oy(r)}function T1(r){return function(s){return r==null?t:Zn(r,s)}}var R1=gl(),N1=gl(!0);function Hc(){return[]}function kc(){return!1}function L1(){return{}}function $1(){return""}function j1(){return!0}function U1(r,s){if(r=Me(r),r<1||r>K)return[];var a=re,l=Xt(r,re);s=me(s),r-=re;for(var y=Ga(l,s);++a<r;)s(a);return y}function M1(r){return Re(r)?mt(r,rn):Ir(r)?[r]:pr(Tl(nt(r)))}function q1(r){var s=++Jg;return nt(r)+s}var F1=Co(function(r,s){return r+s},0),z1=bc("ceil"),B1=Co(function(r,s){return r/s},1),H1=bc("floor");function k1(r){return r&&r.length?Eo(r,_r,sc):t}function K1(r,s){return r&&r.length?Eo(r,me(s,2),sc):t}function V1(r){return _h(r,_r)}function W1(r,s){return _h(r,me(s,2))}function G1(r){return r&&r.length?Eo(r,_r,uc):t}function Y1(r,s){return r&&r.length?Eo(r,me(s,2),uc):t}var J1=Co(function(r,s){return r*s},1),Q1=bc("round"),X1=Co(function(r,s){return r-s},0);function Z1(r){return r&&r.length?Wa(r,_r):0}function eb(r,s){return r&&r.length?Wa(r,me(s,2)):0}return v.after=Ev,v.ary=Bl,v.assign=um,v.assignIn=rf,v.assignInWith=Bo,v.assignWith=hm,v.at=lm,v.before=Hl,v.bind=Rc,v.bindAll=y1,v.bindKey=kl,v.castArray=Lv,v.chain=ql,v.chunk=Hy,v.compact=ky,v.concat=Ky,v.cond=_1,v.conforms=v1,v.constant=qc,v.countBy=Z_,v.create=fm,v.curry=Kl,v.curryRight=Vl,v.debounce=Wl,v.defaults=dm,v.defaultsDeep=pm,v.defer=Dv,v.delay=Sv,v.difference=Vy,v.differenceBy=Wy,v.differenceWith=Gy,v.drop=Yy,v.dropRight=Jy,v.dropRightWhile=Qy,v.dropWhile=Xy,v.fill=Zy,v.filter=tv,v.flatMap=iv,v.flatMapDeep=sv,v.flatMapDepth=ov,v.flatten=$l,v.flattenDeep=e_,v.flattenDepth=t_,v.flip=Iv,v.flow=b1,v.flowRight=w1,v.fromPairs=r_,v.functions=wm,v.functionsIn=Em,v.groupBy=av,v.initial=i_,v.intersection=s_,v.intersectionBy=o_,v.intersectionWith=a_,v.invert=Sm,v.invertBy=Im,v.invokeMap=uv,v.iteratee=Fc,v.keyBy=hv,v.keys=Vt,v.keysIn=yr,v.map=jo,v.mapKeys=Om,v.mapValues=Pm,v.matches=E1,v.matchesProperty=D1,v.memoize=Mo,v.merge=Cm,v.mergeWith=nf,v.method=S1,v.methodOf=I1,v.mixin=zc,v.negate=qo,v.nthArg=O1,v.omit=Am,v.omitBy=Tm,v.once=xv,v.orderBy=lv,v.over=P1,v.overArgs=Ov,v.overEvery=C1,v.overSome=A1,v.partial=Nc,v.partialRight=Gl,v.partition=fv,v.pick=Rm,v.pickBy=sf,v.property=ff,v.propertyOf=T1,v.pull=l_,v.pullAll=Ul,v.pullAllBy=f_,v.pullAllWith=d_,v.pullAt=p_,v.range=R1,v.rangeRight=N1,v.rearg=Pv,v.reject=gv,v.remove=g_,v.rest=Cv,v.reverse=Ac,v.sampleSize=_v,v.set=Lm,v.setWith=$m,v.shuffle=vv,v.slice=y_,v.sortBy=wv,v.sortedUniq=D_,v.sortedUniqBy=S_,v.split=i1,v.spread=Av,v.tail=I_,v.take=x_,v.takeRight=O_,v.takeRightWhile=P_,v.takeWhile=C_,v.tap=k_,v.throttle=Tv,v.thru=$o,v.toArray=Zl,v.toPairs=of,v.toPairsIn=af,v.toPath=M1,v.toPlainObject=tf,v.transform=jm,v.unary=Rv,v.union=A_,v.unionBy=T_,v.unionWith=R_,v.uniq=N_,v.uniqBy=L_,v.uniqWith=$_,v.unset=Um,v.unzip=Tc,v.unzipWith=Ml,v.update=Mm,v.updateWith=qm,v.values=Li,v.valuesIn=Fm,v.without=j_,v.words=hf,v.wrap=Nv,v.xor=U_,v.xorBy=M_,v.xorWith=q_,v.zip=F_,v.zipObject=z_,v.zipObjectDeep=B_,v.zipWith=H_,v.entries=of,v.entriesIn=af,v.extend=rf,v.extendWith=Bo,zc(v,v),v.add=F1,v.attempt=lf,v.camelCase=km,v.capitalize=cf,v.ceil=z1,v.clamp=zm,v.clone=$v,v.cloneDeep=Uv,v.cloneDeepWith=Mv,v.cloneWith=jv,v.conformsTo=qv,v.deburr=uf,v.defaultTo=m1,v.divide=B1,v.endsWith=Km,v.eq=Vr,v.escape=Vm,v.escapeRegExp=Wm,v.every=ev,v.find=rv,v.findIndex=Nl,v.findKey=gm,v.findLast=nv,v.findLastIndex=Ll,v.findLastKey=ym,v.floor=H1,v.forEach=Fl,v.forEachRight=zl,v.forIn=_m,v.forInRight=vm,v.forOwn=mm,v.forOwnRight=bm,v.get=jc,v.gt=Fv,v.gte=zv,v.has=Dm,v.hasIn=Uc,v.head=jl,v.identity=_r,v.includes=cv,v.indexOf=n_,v.inRange=Bm,v.invoke=xm,v.isArguments=ri,v.isArray=Re,v.isArrayBuffer=Bv,v.isArrayLike=gr,v.isArrayLikeObject=Nt,v.isBoolean=Hv,v.isBuffer=Un,v.isDate=kv,v.isElement=Kv,v.isEmpty=Vv,v.isEqual=Wv,v.isEqualWith=Gv,v.isError=Lc,v.isFinite=Yv,v.isFunction=yn,v.isInteger=Yl,v.isLength=Fo,v.isMap=Jl,v.isMatch=Jv,v.isMatchWith=Qv,v.isNaN=Xv,v.isNative=Zv,v.isNil=tm,v.isNull=em,v.isNumber=Ql,v.isObject=Dt,v.isObjectLike=At,v.isPlainObject=fs,v.isRegExp=$c,v.isSafeInteger=rm,v.isSet=Xl,v.isString=zo,v.isSymbol=Ir,v.isTypedArray=Ni,v.isUndefined=nm,v.isWeakMap=im,v.isWeakSet=sm,v.join=c_,v.kebabCase=Gm,v.last=qr,v.lastIndexOf=u_,v.lowerCase=Ym,v.lowerFirst=Jm,v.lt=om,v.lte=am,v.max=k1,v.maxBy=K1,v.mean=V1,v.meanBy=W1,v.min=G1,v.minBy=Y1,v.stubArray=Hc,v.stubFalse=kc,v.stubObject=L1,v.stubString=$1,v.stubTrue=j1,v.multiply=J1,v.nth=h_,v.noConflict=x1,v.noop=Bc,v.now=Uo,v.pad=Qm,v.padEnd=Xm,v.padStart=Zm,v.parseInt=e1,v.random=Hm,v.reduce=dv,v.reduceRight=pv,v.repeat=t1,v.replace=r1,v.result=Nm,v.round=Q1,v.runInContext=U,v.sample=yv,v.size=mv,v.snakeCase=n1,v.some=bv,v.sortedIndex=__,v.sortedIndexBy=v_,v.sortedIndexOf=m_,v.sortedLastIndex=b_,v.sortedLastIndexBy=w_,v.sortedLastIndexOf=E_,v.startCase=s1,v.startsWith=o1,v.subtract=X1,v.sum=Z1,v.sumBy=eb,v.template=a1,v.times=U1,v.toFinite=_n,v.toInteger=Me,v.toLength=ef,v.toLower=c1,v.toNumber=Fr,v.toSafeInteger=cm,v.toString=nt,v.toUpper=u1,v.trim=h1,v.trimEnd=l1,v.trimStart=f1,v.truncate=d1,v.unescape=p1,v.uniqueId=q1,v.upperCase=g1,v.upperFirst=Mc,v.each=Fl,v.eachRight=zl,v.first=jl,zc(v,function(){var r={};return en(v,function(s,a){it.call(v.prototype,a)||(r[a]=s)}),r}(),{chain:!1}),v.VERSION=i,Lr(["bind","bindKey","curry","curryRight","partial","partialRight"],function(r){v[r].placeholder=v}),Lr(["drop","take"],function(r,s){Ye.prototype[r]=function(a){a=a===t?1:kt(Me(a),0);var l=this.__filtered__&&!s?new Ye(this):this.clone();return l.__filtered__?l.__takeCount__=Xt(a,l.__takeCount__):l.__views__.push({size:Xt(a,re),type:r+(l.__dir__<0?"Right":"")}),l},Ye.prototype[r+"Right"]=function(a){return this.reverse()[r](a).reverse()}}),Lr(["filter","map","takeWhile"],function(r,s){var a=s+1,l=a==w||a==ee;Ye.prototype[r]=function(y){var m=this.clone();return m.__iteratees__.push({iteratee:me(y,3),type:a}),m.__filtered__=m.__filtered__||l,m}}),Lr(["head","last"],function(r,s){var a="take"+(s?"Right":"");Ye.prototype[r]=function(){return this[a](1).value()[0]}}),Lr(["initial","tail"],function(r,s){var a="drop"+(s?"":"Right");Ye.prototype[r]=function(){return this.__filtered__?new Ye(this):this[a](1)}}),Ye.prototype.compact=function(){return this.filter(_r)},Ye.prototype.find=function(r){return this.filter(r).head()},Ye.prototype.findLast=function(r){return this.reverse().find(r)},Ye.prototype.invokeMap=ke(function(r,s){return typeof r=="function"?new Ye(this):this.map(function(a){return os(a,r,s)})}),Ye.prototype.reject=function(r){return this.filter(qo(me(r)))},Ye.prototype.slice=function(r,s){r=Me(r);var a=this;return a.__filtered__&&(r>0||s<0)?new Ye(a):(r<0?a=a.takeRight(-r):r&&(a=a.drop(r)),s!==t&&(s=Me(s),a=s<0?a.dropRight(-s):a.take(s-r)),a)},Ye.prototype.takeRightWhile=function(r){return this.reverse().takeWhile(r).reverse()},Ye.prototype.toArray=function(){return this.take(re)},en(Ye.prototype,function(r,s){var a=/^(?:filter|find|map|reject)|While$/.test(s),l=/^(?:head|last)$/.test(s),y=v[l?"take"+(s=="last"?"Right":""):s],m=l||/^find/.test(s);y&&(v.prototype[s]=function(){var P=this.__wrapped__,N=l?[1]:arguments,q=P instanceof Ye,X=N[0],Z=q||Re(P),ie=function(We){var Ze=y.apply(v,An([We],N));return l&&he?Ze[0]:Ze};Z&&a&&typeof X=="function"&&X.length!=1&&(q=Z=!1);var he=this.__chain__,ye=!!this.__actions__.length,Ee=m&&!he,ze=q&&!ye;if(!m&&Z){P=ze?P:new Ye(this);var De=r.apply(P,N);return De.__actions__.push({func:$o,args:[ie],thisArg:t}),new jr(De,he)}return Ee&&ze?r.apply(this,N):(De=this.thru(ie),Ee?l?De.value()[0]:De.value():De)})}),Lr(["pop","push","shift","sort","splice","unshift"],function(r){var s=oo[r],a=/^(?:push|sort|unshift)$/.test(r)?"tap":"thru",l=/^(?:pop|shift)$/.test(r);v.prototype[r]=function(){var y=arguments;if(l&&!this.__chain__){var m=this.value();return s.apply(Re(m)?m:[],y)}return this[a](function(P){return s.apply(Re(P)?P:[],y)})}}),en(Ye.prototype,function(r,s){var a=v[s];if(a){var l=a.name+"";it.call(Pi,l)||(Pi[l]=[]),Pi[l].push({name:s,func:a})}}),Pi[Po(t,ne).name]=[{name:"wrapper",func:t}],Ye.prototype.clone=p0,Ye.prototype.reverse=g0,Ye.prototype.value=y0,v.prototype.at=K_,v.prototype.chain=V_,v.prototype.commit=W_,v.prototype.next=G_,v.prototype.plant=J_,v.prototype.reverse=Q_,v.prototype.toJSON=v.prototype.valueOf=v.prototype.value=X_,v.prototype.first=v.prototype.head,Zi&&(v.prototype[Zi]=Y_),v},Ii=Wg();Rt?((Rt.exports=Ii)._=Ii,ut._=Ii):Xe._=Ii}).call(ms)})(Bu,Bu.exports);var lx=Object.defineProperty,fx=Object.defineProperties,dx=Object.getOwnPropertyDescriptors,kd=Object.getOwnPropertySymbols,px=Object.prototype.hasOwnProperty,gx=Object.prototype.propertyIsEnumerable,Kd=(n,e,t)=>e in n?lx(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,Wo=(n,e)=>{for(var t in e||(e={}))px.call(e,t)&&Kd(n,t,e[t]);if(kd)for(var t of kd(e))gx.call(e,t)&&Kd(n,t,e[t]);return n},yx=(n,e)=>fx(n,dx(e));function Fn(n,e,t){var i;const o=t3(n);return((i=e.rpcMap)==null?void 0:i[o.reference])||`${hx}?chainId=${o.namespace}:${o.reference}&projectId=${t}`}function pi(n){return n.includes(":")?n.split(":")[1]:n}function Eg(n){return n.map(e=>`${e.split(":")[0]}:${e.split(":")[1]}`)}function _x(n,e){const t=Object.keys(e.namespaces).filter(o=>o.includes(n));if(!t.length)return[];const i=[];return t.forEach(o=>{const c=e.namespaces[o].accounts;i.push(...c)}),i}function Vd(n={},e={}){const t=Wd(n),i=Wd(e);return Bu.exports.merge(t,i)}function Wd(n){var e,t,i,o;const c={};if(!Os(n))return c;for(const[u,f]of Object.entries(n)){const g=nh(u)?[u]:f.chains,p=f.methods||[],_=f.events||[],D=f.rpcMap||{},S=bs(u);c[S]=yx(Wo(Wo({},c[S]),f),{chains:Jc(g,(e=c[S])==null?void 0:e.chains),methods:Jc(p,(t=c[S])==null?void 0:t.methods),events:Jc(_,(i=c[S])==null?void 0:i.events),rpcMap:Wo(Wo({},D),(o=c[S])==null?void 0:o.rpcMap)})}return c}function vx(n){return n.includes(":")?n.split(":")[2]:n}function mx(n){const e={};for(const[t,i]of Object.entries(n)){const o=i.methods||[],c=i.events||[],u=i.accounts||[],f=nh(t)?[t]:i.chains?i.chains:Eg(i.accounts);e[t]={chains:f,methods:o,events:c,accounts:u}}return e}function hu(n){return typeof n=="number"?n:n.includes("0x")?parseInt(n,16):(n=n.includes(":")?n.split(":")[1]:n,isNaN(Number(n))?n:Number(n))}const Dg={},wt=n=>Dg[n],lu=(n,e)=>{Dg[n]=e};class bx{constructor(e){this.name="polkadot",this.namespace=e.namespace,this.events=wt("events"),this.client=wt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){this.httpProviders[e]||this.setHttpProvider(e,t),this.chainId=e,this.events.emit(xn.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getAccounts(){const e=this.namespace.accounts;return e?e.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2])||[]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(t=>{var i;const o=pi(t);e[o]=this.createHttpProvider(o,(i=this.namespace.rpcMap)==null?void 0:i[t])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){const i=this.createHttpProvider(e,t);i&&(this.httpProviders[e]=i)}createHttpProvider(e,t){const i=t||Fn(e,this.namespace,this.client.core.projectId);if(!i)throw new Error(`No RPC url provided for chainId: ${e}`);return new In(new Bn(i,wt("disableProviderPing")))}}class wx{constructor(e){this.name="eip155",this.namespace=e.namespace,this.events=wt("events"),this.client=wt("client"),this.httpProviders=this.createHttpProviders(),this.chainId=parseInt(this.getDefaultChain())}async request(e){switch(e.request.method){case"eth_requestAccounts":return this.getAccounts();case"eth_accounts":return this.getAccounts();case"wallet_switchEthereumChain":return await this.handleSwitchChain(e);case"eth_chainId":return parseInt(this.getDefaultChain())}return this.namespace.methods.includes(e.request.method)?await this.client.request(e):this.getHttpProvider().request(e.request)}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}setDefaultChain(e,t){this.httpProviders[e]||this.setHttpProvider(parseInt(e),t),this.chainId=parseInt(e),this.events.emit(xn.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId.toString();if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}createHttpProvider(e,t){const i=t||Fn(`${this.name}:${e}`,this.namespace,this.client.core.projectId);if(!i)throw new Error(`No RPC url provided for chainId: ${e}`);return new In(new Bn(i,wt("disableProviderPing")))}setHttpProvider(e,t){const i=this.createHttpProvider(e,t);i&&(this.httpProviders[e]=i)}createHttpProviders(){const e={};return this.namespace.chains.forEach(t=>{var i;const o=parseInt(pi(t));e[o]=this.createHttpProvider(o,(i=this.namespace.rpcMap)==null?void 0:i[t])}),e}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2]))]:[]}getHttpProvider(){const e=this.chainId,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}async handleSwitchChain(e){var t,i;let o=e.request.params?(t=e.request.params[0])==null?void 0:t.chainId:"0x0";o=o.startsWith("0x")?o:`0x${o}`;const c=parseInt(o,16);if(this.isChainApproved(c))this.setDefaultChain(`${c}`);else if(this.namespace.methods.includes("wallet_switchEthereumChain"))await this.client.request({topic:e.topic,request:{method:e.request.method,params:[{chainId:o}]},chainId:(i=this.namespace.chains)==null?void 0:i[0]}),this.setDefaultChain(`${c}`);else throw new Error(`Failed to switch to chain 'eip155:${c}'. The chain is not approved or the wallet does not support 'wallet_switchEthereumChain' method.`);return null}isChainApproved(e){return this.namespace.chains.includes(`${this.name}:${e}`)}}class Ex{constructor(e){this.name="solana",this.namespace=e.namespace,this.events=wt("events"),this.client=wt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){this.httpProviders[e]||this.setHttpProvider(e,t),this.chainId=e,this.events.emit(xn.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(t=>{var i;const o=pi(t);e[o]=this.createHttpProvider(o,(i=this.namespace.rpcMap)==null?void 0:i[t])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){const i=this.createHttpProvider(e,t);i&&(this.httpProviders[e]=i)}createHttpProvider(e,t){const i=t||Fn(e,this.namespace,this.client.core.projectId);if(!i)throw new Error(`No RPC url provided for chainId: ${e}`);return new In(new Bn(i,wt("disableProviderPing")))}}class Dx{constructor(e){this.name="cosmos",this.namespace=e.namespace,this.events=wt("events"),this.client=wt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){this.httpProviders[e]||this.setHttpProvider(e,t),this.chainId=e,this.events.emit(xn.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(t=>{var i;const o=pi(t);e[o]=this.createHttpProvider(o,(i=this.namespace.rpcMap)==null?void 0:i[t])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){const i=this.createHttpProvider(e,t);i&&(this.httpProviders[e]=i)}createHttpProvider(e,t){const i=t||Fn(e,this.namespace,this.client.core.projectId);if(!i)throw new Error(`No RPC url provided for chainId: ${e}`);return new In(new Bn(i,wt("disableProviderPing")))}}class Sx{constructor(e){this.name="cip34",this.namespace=e.namespace,this.events=wt("events"),this.client=wt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){this.httpProviders[e]||this.setHttpProvider(e,t),this.chainId=e,this.events.emit(xn.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(t=>{const i=this.getCardanoRPCUrl(t),o=pi(t);e[o]=this.createHttpProvider(o,i)}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}getCardanoRPCUrl(e){const t=this.namespace.rpcMap;if(t)return t[e]}setHttpProvider(e,t){const i=this.createHttpProvider(e,t);i&&(this.httpProviders[e]=i)}createHttpProvider(e,t){const i=t||this.getCardanoRPCUrl(e);if(!i)throw new Error(`No RPC url provided for chainId: ${e}`);return new In(new Bn(i,wt("disableProviderPing")))}}class Ix{constructor(e){this.name="elrond",this.namespace=e.namespace,this.events=wt("events"),this.client=wt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){this.httpProviders[e]||this.setHttpProvider(e,t),this.chainId=e,this.events.emit(xn.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(t=>{var i;const o=pi(t);e[o]=this.createHttpProvider(o,(i=this.namespace.rpcMap)==null?void 0:i[t])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){const i=this.createHttpProvider(e,t);i&&(this.httpProviders[e]=i)}createHttpProvider(e,t){const i=t||Fn(e,this.namespace,this.client.core.projectId);if(!i)throw new Error(`No RPC url provided for chainId: ${e}`);return new In(new Bn(i,wt("disableProviderPing")))}}class xx{constructor(e){this.name="multiversx",this.namespace=e.namespace,this.events=wt("events"),this.client=wt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){this.httpProviders[e]||this.setHttpProvider(e,t),this.chainId=e,this.events.emit(xn.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(t=>{var i;const o=pi(t);e[o]=this.createHttpProvider(o,(i=this.namespace.rpcMap)==null?void 0:i[t])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){const i=this.createHttpProvider(e,t);i&&(this.httpProviders[e]=i)}createHttpProvider(e,t){const i=t||Fn(e,this.namespace,this.client.core.projectId);if(!i)throw new Error(`No RPC url provided for chainId: ${e}`);return new In(new Bn(i,wt("disableProviderPing")))}}class Ox{constructor(e){this.name="near",this.namespace=e.namespace,this.events=wt("events"),this.client=wt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){if(this.chainId=e,!this.httpProviders[e]){const i=t||Fn(`${this.name}:${e}`,this.namespace);if(!i)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,i)}this.events.emit(xn.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?e.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2])||[]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(t=>{var i;e[t]=this.createHttpProvider(t,(i=this.namespace.rpcMap)==null?void 0:i[t])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){const i=this.createHttpProvider(e,t);i&&(this.httpProviders[e]=i)}createHttpProvider(e,t){const i=t||Fn(e,this.namespace);return typeof i>"u"?void 0:new In(new Bn(i,wt("disableProviderPing")))}}var Px=Object.defineProperty,Cx=Object.defineProperties,Ax=Object.getOwnPropertyDescriptors,Gd=Object.getOwnPropertySymbols,Tx=Object.prototype.hasOwnProperty,Rx=Object.prototype.propertyIsEnumerable,Yd=(n,e,t)=>e in n?Px(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,Go=(n,e)=>{for(var t in e||(e={}))Tx.call(e,t)&&Yd(n,t,e[t]);if(Gd)for(var t of Gd(e))Rx.call(e,t)&&Yd(n,t,e[t]);return n},fu=(n,e)=>Cx(n,Ax(e));class fh{constructor(e){this.events=new Vu,this.rpcProviders={},this.shouldAbortPairingAttempt=!1,this.maxPairingAttempts=10,this.disableProviderPing=!1,this.providerOpts=e,this.logger=typeof(e==null?void 0:e.logger)<"u"&&typeof(e==null?void 0:e.logger)!="string"?e.logger:Je.pino(Je.getDefaultLoggerOptions({level:(e==null?void 0:e.logger)||Bd})),this.disableProviderPing=(e==null?void 0:e.disableProviderPing)||!1}static async init(e){const t=new fh(e);return await t.initialize(),t}async request(e,t,i){const[o,c]=this.validateChain(t);if(!this.session)throw new Error("Please call connect() before request()");return await this.getProvider(o).request({request:Go({},e),chainId:`${o}:${c}`,topic:this.session.topic,expiry:i})}sendAsync(e,t,i,o){const c=new Date().getTime();this.request(e,i,o).then(u=>t(null,ya(c,u))).catch(u=>t(u,void 0))}async enable(){if(!this.client)throw new Error("Sign Client not initialized");return this.session||await this.connect({namespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties}),await this.requestAccounts()}async disconnect(){var e;if(!this.session)throw new Error("Please call connect() before enable()");await this.client.disconnect({topic:(e=this.session)==null?void 0:e.topic,reason:bt("USER_DISCONNECTED")}),await this.cleanup()}async connect(e){if(!this.client)throw new Error("Sign Client not initialized");if(this.setNamespaces(e),await this.cleanupPendingPairings(),!e.skipPairing)return await this.pair(e.pairingTopic)}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}removeListener(e,t){this.events.removeListener(e,t)}off(e,t){this.events.off(e,t)}get isWalletConnect(){return!0}async pair(e){this.shouldAbortPairingAttempt=!1;let t=0;do{if(this.shouldAbortPairingAttempt)throw new Error("Pairing aborted");if(t>=this.maxPairingAttempts)throw new Error("Max auto pairing attempts reached");const{uri:i,approval:o}=await this.client.connect({pairingTopic:e,requiredNamespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties});i&&(this.uri=i,this.events.emit("display_uri",i)),await o().then(c=>{this.session=c;const u=mx(c.namespaces);this.namespaces=Vd(this.namespaces,u),this.persist("namespaces",this.namespaces)}).catch(c=>{if(c.message!==bg)throw c;t++})}while(!this.session);return this.onConnect(),this.session}setDefaultChain(e,t){try{if(!this.session)return;const[i,o]=this.validateChain(e);this.getProvider(i).setDefaultChain(o,t)}catch(i){if(!/Please call connect/.test(i.message))throw i}}async cleanupPendingPairings(e={}){this.logger.info("Cleaning up inactive pairings...");const t=this.client.pairing.getAll();if(on(t)){for(const i of t)e.deletePairings?this.client.core.expirer.set(i.topic,0):await this.client.core.relayer.subscriber.unsubscribe(i.topic);this.logger.info(`Inactive pairings cleared: ${t.length}`)}}abortPairingAttempt(){this.shouldAbortPairingAttempt=!0}async checkStorage(){if(this.namespaces=await this.getFromStore("namespaces"),this.optionalNamespaces=await this.getFromStore("optionalNamespaces")||{},this.client.session.length){const e=this.client.session.keys.length-1;this.session=this.client.session.get(this.client.session.keys[e]),this.createProviders()}}async initialize(){this.logger.trace("Initialized"),await this.createClient(),await this.checkStorage(),this.registerEventListeners()}async createClient(){this.client=this.providerOpts.client||await nx.init({logger:this.providerOpts.logger||Bd,relayUrl:this.providerOpts.relayUrl||ax,projectId:this.providerOpts.projectId,metadata:this.providerOpts.metadata,storageOptions:this.providerOpts.storageOptions,storage:this.providerOpts.storage,name:this.providerOpts.name}),this.logger.trace("SignClient Initialized")}createProviders(){if(!this.client)throw new Error("Sign Client not initialized");if(!this.session)throw new Error("Session not initialized. Please call connect() before enable()");const e=[...new Set(Object.keys(this.session.namespaces).map(t=>bs(t)))];lu("client",this.client),lu("events",this.events),lu("disableProviderPing",this.disableProviderPing),e.forEach(t=>{if(!this.session)return;const i=_x(t,this.session),o=Eg(i),c=Vd(this.namespaces,this.optionalNamespaces),u=fu(Go({},c[t]),{accounts:i,chains:o});switch(t){case"eip155":this.rpcProviders[t]=new wx({namespace:u});break;case"solana":this.rpcProviders[t]=new Ex({namespace:u});break;case"cosmos":this.rpcProviders[t]=new Dx({namespace:u});break;case"polkadot":this.rpcProviders[t]=new bx({namespace:u});break;case"cip34":this.rpcProviders[t]=new Sx({namespace:u});break;case"elrond":this.rpcProviders[t]=new Ix({namespace:u});break;case"multiversx":this.rpcProviders[t]=new xx({namespace:u});break;case"near":this.rpcProviders[t]=new Ox({namespace:u});break}})}registerEventListeners(){if(typeof this.client>"u")throw new Error("Sign Client is not initialized");this.client.on("session_ping",e=>{this.events.emit("session_ping",e)}),this.client.on("session_event",e=>{const{params:t}=e,{event:i}=t;if(i.name==="accountsChanged"){const o=i.data;o&&on(o)&&this.events.emit("accountsChanged",o.map(vx))}else if(i.name==="chainChanged"){const o=t.chainId,c=t.event.data,u=bs(o),f=hu(o)!==hu(c)?`${u}:${hu(c)}`:o;this.onChainChanged(f)}else this.events.emit(i.name,i.data);this.events.emit("session_event",e)}),this.client.on("session_update",({topic:e,params:t})=>{var i;const{namespaces:o}=t,c=(i=this.client)==null?void 0:i.session.get(e);this.session=fu(Go({},c),{namespaces:o}),this.onSessionUpdate(),this.events.emit("session_update",{topic:e,params:t})}),this.client.on("session_delete",async e=>{await this.cleanup(),this.events.emit("session_delete",e),this.events.emit("disconnect",fu(Go({},bt("USER_DISCONNECTED")),{data:e.topic}))}),this.on(xn.DEFAULT_CHAIN_CHANGED,e=>{this.onChainChanged(e,!0)})}getProvider(e){if(!this.rpcProviders[e])throw new Error(`Provider not found: ${e}`);return this.rpcProviders[e]}onSessionUpdate(){Object.keys(this.rpcProviders).forEach(e=>{var t;this.getProvider(e).updateNamespace((t=this.session)==null?void 0:t.namespaces[e])})}setNamespaces(e){const{namespaces:t,optionalNamespaces:i,sessionProperties:o}=e;t&&Object.keys(t).length&&(this.namespaces=t),i&&Object.keys(i).length&&(this.optionalNamespaces=i),this.sessionProperties=o,this.persist("namespaces",t),this.persist("optionalNamespaces",i)}validateChain(e){const[t,i]=(e==null?void 0:e.split(":"))||["",""];if(!this.namespaces||!Object.keys(this.namespaces).length)return[t,i];if(t&&!Object.keys(this.namespaces||{}).map(u=>bs(u)).includes(t))throw new Error(`Namespace '${t}' is not configured. Please call connect() first with namespace config.`);if(t&&i)return[t,i];const o=bs(Object.keys(this.namespaces)[0]),c=this.rpcProviders[o].getDefaultChain();return[o,c]}async requestAccounts(){const[e]=this.validateChain();return await this.getProvider(e).requestAccounts()}onChainChanged(e,t=!1){if(!this.namespaces)return;const[i,o]=this.validateChain(e);o&&(t||this.getProvider(i).setDefaultChain(o),this.namespaces[i]?this.namespaces[i].defaultChain=o:this.namespaces[`${i}:${o}`]?this.namespaces[`${i}:${o}`].defaultChain=o:this.namespaces[`${i}:${o}`]={defaultChain:o},this.persist("namespaces",this.namespaces),this.events.emit("chainChanged",o))}onConnect(){this.createProviders(),this.events.emit("connect",{session:this.session})}async cleanup(){this.session=void 0,this.namespaces=void 0,this.optionalNamespaces=void 0,this.sessionProperties=void 0,this.persist("namespaces",void 0),this.persist("optionalNamespaces",void 0),this.persist("sessionProperties",void 0),await this.cleanupPendingPairings({deletePairings:!0})}persist(e,t){this.client.core.storage.setItem(`${Hd}/${e}`,t)}async getFromStore(e){return await this.client.core.storage.getItem(`${Hd}/${e}`)}}const Nx=fh,Lx="wc",$x="ethereum_provider",jx=`${Lx}@2:${$x}:`,Ux="https://rpc.walletconnect.com/v1/",Hu=["eth_sendTransaction","personal_sign"],Mx=["eth_accounts","eth_requestAccounts","eth_sendRawTransaction","eth_sign","eth_signTransaction","eth_signTypedData","eth_signTypedData_v3","eth_signTypedData_v4","eth_sendTransaction","personal_sign","wallet_switchEthereumChain","wallet_addEthereumChain","wallet_getPermissions","wallet_requestPermissions","wallet_registerOnboarding","wallet_watchAsset","wallet_scanQRCode"],ku=["chainChanged","accountsChanged"],qx=["chainChanged","accountsChanged","message","disconnect","connect"];var Fx=Object.defineProperty,zx=Object.defineProperties,Bx=Object.getOwnPropertyDescriptors,Jd=Object.getOwnPropertySymbols,Hx=Object.prototype.hasOwnProperty,kx=Object.prototype.propertyIsEnumerable,Qd=(n,e,t)=>e in n?Fx(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,Es=(n,e)=>{for(var t in e||(e={}))Hx.call(e,t)&&Qd(n,t,e[t]);if(Jd)for(var t of Jd(e))kx.call(e,t)&&Qd(n,t,e[t]);return n},Xd=(n,e)=>zx(n,Bx(e));function sa(n){return Number(n[0].split(":")[1])}function du(n){return`0x${n.toString(16)}`}function Kx(n){const{chains:e,optionalChains:t,methods:i,optionalMethods:o,events:c,optionalEvents:u,rpcMap:f}=n;if(!on(e))throw new Error("Invalid chains");const g={chains:e,methods:i||Hu,events:c||ku,rpcMap:Es({},e.length?{[sa(e)]:f[sa(e)]}:{})},p=c==null?void 0:c.filter(x=>!ku.includes(x)),_=i==null?void 0:i.filter(x=>!Hu.includes(x));if(!t&&!u&&!o&&!(p!=null&&p.length)&&!(_!=null&&_.length))return{required:e.length?g:void 0};const D=(p==null?void 0:p.length)&&(_==null?void 0:_.length)||!t,S={chains:[...new Set(D?g.chains.concat(t||[]):t)],methods:[...new Set(g.methods.concat(o!=null&&o.length?o:Mx))],events:[...new Set(g.events.concat(u!=null&&u.length?u:qx))],rpcMap:f};return{required:e.length?g:void 0,optional:t.length?S:void 0}}class dh{constructor(){this.events=new Ar.EventEmitter,this.namespace="eip155",this.accounts=[],this.chainId=1,this.STORAGE_KEY=jx,this.on=(e,t)=>(this.events.on(e,t),this),this.once=(e,t)=>(this.events.once(e,t),this),this.removeListener=(e,t)=>(this.events.removeListener(e,t),this),this.off=(e,t)=>(this.events.off(e,t),this),this.parseAccount=e=>this.isCompatibleChainId(e)?this.parseAccountId(e).address:e,this.signer={},this.rpc={}}static async init(e){const t=new dh;return await t.initialize(e),t}async request(e,t){return await this.signer.request(e,this.formatChainId(this.chainId),t)}sendAsync(e,t,i){this.signer.sendAsync(e,t,this.formatChainId(this.chainId),i)}get connected(){return this.signer.client?this.signer.client.core.relayer.connected:!1}get connecting(){return this.signer.client?this.signer.client.core.relayer.connecting:!1}async enable(){return this.session||await this.connect(),await this.request({method:"eth_requestAccounts"})}async connect(e){if(!this.signer.client)throw new Error("Provider not initialized. Call init() first");this.loadConnectOpts(e);const{required:t,optional:i}=Kx(this.rpc);try{const o=await new Promise(async(u,f)=>{var g;this.rpc.showQrModal&&((g=this.modal)==null||g.subscribeModal(p=>{!p.open&&!this.signer.session&&(this.signer.abortPairingAttempt(),f(new Error("Connection request reset. Please try again.")))})),await this.signer.connect(Xd(Es({namespaces:Es({},t&&{[this.namespace]:t})},i&&{optionalNamespaces:{[this.namespace]:i}}),{pairingTopic:e==null?void 0:e.pairingTopic})).then(p=>{u(p)}).catch(p=>{f(new Error(p.message))})});if(!o)return;const c=r3(o.namespaces,[this.namespace]);this.setChainIds(this.rpc.chains.length?this.rpc.chains:c),this.setAccounts(c),this.events.emit("connect",{chainId:du(this.chainId)})}catch(o){throw this.signer.logger.error(o),o}finally{this.modal&&this.modal.closeModal()}}async disconnect(){this.session&&await this.signer.disconnect(),this.reset()}get isWalletConnect(){return!0}get session(){return this.signer.session}registerEventListeners(){this.signer.on("session_event",e=>{const{params:t}=e,{event:i}=t;i.name==="accountsChanged"?(this.accounts=this.parseAccounts(i.data),this.events.emit("accountsChanged",this.accounts)):i.name==="chainChanged"?this.setChainId(this.formatChainId(i.data)):this.events.emit(i.name,i.data),this.events.emit("session_event",e)}),this.signer.on("chainChanged",e=>{const t=parseInt(e);this.chainId=t,this.events.emit("chainChanged",du(this.chainId)),this.persist()}),this.signer.on("session_update",e=>{this.events.emit("session_update",e)}),this.signer.on("session_delete",e=>{this.reset(),this.events.emit("session_delete",e),this.events.emit("disconnect",Xd(Es({},bt("USER_DISCONNECTED")),{data:e.topic,name:"USER_DISCONNECTED"}))}),this.signer.on("display_uri",e=>{var t,i;this.rpc.showQrModal&&((t=this.modal)==null||t.closeModal(),(i=this.modal)==null||i.openModal({uri:e})),this.events.emit("display_uri",e)})}switchEthereumChain(e){this.request({method:"wallet_switchEthereumChain",params:[{chainId:e.toString(16)}]})}isCompatibleChainId(e){return typeof e=="string"?e.startsWith(`${this.namespace}:`):!1}formatChainId(e){return`${this.namespace}:${e}`}parseChainId(e){return Number(e.split(":")[1])}setChainIds(e){const t=e.filter(i=>this.isCompatibleChainId(i)).map(i=>this.parseChainId(i));t.length&&(this.chainId=t[0],this.events.emit("chainChanged",du(this.chainId)),this.persist())}setChainId(e){if(this.isCompatibleChainId(e)){const t=this.parseChainId(e);this.chainId=t,this.switchEthereumChain(t)}}parseAccountId(e){const[t,i,o]=e.split(":");return{chainId:`${t}:${i}`,address:o}}setAccounts(e){this.accounts=e.filter(t=>this.parseChainId(this.parseAccountId(t).chainId)===this.chainId).map(t=>this.parseAccountId(t).address),this.events.emit("accountsChanged",this.accounts)}getRpcConfig(e){var t,i;const o=(t=e==null?void 0:e.chains)!=null?t:[],c=(i=e==null?void 0:e.optionalChains)!=null?i:[],u=o.concat(c);if(!u.length)throw new Error("No chains specified in either `chains` or `optionalChains`");const f=o.length?(e==null?void 0:e.methods)||Hu:[],g=o.length?(e==null?void 0:e.events)||ku:[],p=(e==null?void 0:e.optionalMethods)||[],_=(e==null?void 0:e.optionalEvents)||[],D=(e==null?void 0:e.rpcMap)||this.buildRpcMap(u,e.projectId),S=(e==null?void 0:e.qrModalOptions)||void 0;return{chains:o==null?void 0:o.map(x=>this.formatChainId(x)),optionalChains:c.map(x=>this.formatChainId(x)),methods:f,events:g,optionalMethods:p,optionalEvents:_,rpcMap:D,showQrModal:!!(e!=null&&e.showQrModal),qrModalOptions:S,projectId:e.projectId,metadata:e.metadata}}buildRpcMap(e,t){const i={};return e.forEach(o=>{i[o]=this.getRpcUrl(o,t)}),i}async initialize(e){if(this.rpc=this.getRpcConfig(e),this.chainId=this.rpc.chains.length?sa(this.rpc.chains):sa(this.rpc.optionalChains),this.signer=await Nx.init({projectId:this.rpc.projectId,metadata:this.rpc.metadata,disableProviderPing:e.disableProviderPing,relayUrl:e.relayUrl,storageOptions:e.storageOptions}),this.registerEventListeners(),await this.loadPersistedSession(),this.rpc.showQrModal){let t;try{const{WalletConnectModal:i}=await tb(()=>import("./index-D_h92p73.js").then(o=>o.i),__vite__mapDeps([0,1,2]),import.meta.url);t=i}catch{throw new Error("To use QR modal, please install @walletconnect/modal package")}if(t)try{this.modal=new t(Es({projectId:this.rpc.projectId},this.rpc.qrModalOptions))}catch(i){throw this.signer.logger.error(i),new Error("Could not generate WalletConnectModal Instance")}}}loadConnectOpts(e){if(!e)return;const{chains:t,optionalChains:i,rpcMap:o}=e;t&&on(t)&&(this.rpc.chains=t.map(c=>this.formatChainId(c)),t.forEach(c=>{this.rpc.rpcMap[c]=(o==null?void 0:o[c])||this.getRpcUrl(c)})),i&&on(i)&&(this.rpc.optionalChains=[],this.rpc.optionalChains=i==null?void 0:i.map(c=>this.formatChainId(c)),i.forEach(c=>{this.rpc.rpcMap[c]=(o==null?void 0:o[c])||this.getRpcUrl(c)}))}getRpcUrl(e,t){var i;return((i=this.rpc.rpcMap)==null?void 0:i[e])||`${Ux}?chainId=eip155:${e}&projectId=${t||this.rpc.projectId}`}async loadPersistedSession(){if(!this.session)return;const e=await this.signer.client.core.storage.getItem(`${this.STORAGE_KEY}/chainId`),t=this.session.namespaces[`${this.namespace}:${e}`]?this.session.namespaces[`${this.namespace}:${e}`]:this.session.namespaces[this.namespace];this.setChainIds(e?[this.formatChainId(e)]:t==null?void 0:t.accounts),this.setAccounts(t==null?void 0:t.accounts)}reset(){this.chainId=1,this.accounts=[]}persist(){this.session&&this.signer.client.core.storage.setItem(`${this.STORAGE_KEY}/chainId`,this.chainId)}parseAccounts(e){return typeof e=="string"||e instanceof String?[this.parseAccount(e)]:e.map(t=>this.parseAccount(t))}}const uO=dh;export{uO as EthereumProvider,qx as OPTIONAL_EVENTS,Mx as OPTIONAL_METHODS,ku as REQUIRED_EVENTS,Hu as REQUIRED_METHODS,dh as default};
